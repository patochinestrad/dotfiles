(self.webpackChunk=self.webpackChunk||[]).push([[8721],{35111:(e,t,i)=>{var a=i(91980),s="chrome-extension://__MSG_@@extension_id__/",r="moz-extension://__MSG_@@extension_id__/",n="safari-web-extension://__MSG_@@extension_id__/",o=self.GR_RESOURCE_ROOT||s,l=self.GR_RESOURCE_ROOT||r,c=self.GR_RESOURCE_ROOT||n;e.exports={__css:a.toString().replace(new RegExp(s,"g"),o).replace(new RegExp(r,"g"),l).replace(new RegExp(n,"g"),c),...a.locals}},9172:(e,t,i)=>{if(i.d(t,{FU:()=>h,OY:()=>C,Td:()=>m,UI:()=>f,XG:()=>E,ab:()=>w,eC:()=>u,ex:()=>S,fo:()=>b,gO:()=>l,r4:()=>v,xq:()=>p}),1388==i.j)var a=i(57050);var s=i(7992),r=i(48015);if(1388==i.j)var n=i(5114);if(1388==i.j)var o=i(55415);function l(e,t){var i,a,s;const r=null===(s=null===(a=null===(i=null==t?void 0:t.citationBuilder)||void 0===i?void 0:i.domains)||void 0===a?void 0:a[e])||void 0===s?void 0:s.disabled;return void 0!==r?!r:void 0}function c(e,t){return w(t).some((t=>new RegExp(t.domain).test(e)))}function d(e){var t,i;return!(null!==(i=null===(t=e.citationBuilder)||void 0===t?void 0:t.disabled)&&void 0!==i&&i)}function u(e,t){return w(t).some((t=>{const i=new RegExp(t.domain),a=new RegExp(t.pathname);return i.test(e.hostname)&&a.test(e.pathname)}))}function p(e){return n.tryCatch((()=>{const t=new URL(e).hostname.split(".");return t.slice(t.length-2).join(".")}))}function m(e,t,i,a){return i?function(e,t,i){const a=l(e,i);return d(t)&&(void 0===a&&c(e,t)||!0===a)}(e,t,a):function(e,t,i){return d(t)&&c(e,t)&&!1!==l(e,i)}(e,t,a)}function h(e,t){return w(t).some((t=>new RegExp(t.domain).test(e)&&!0===t.reparse))}const g={verticalLocation:"bottom",horizontalLocation:"left",offsetX:17,offsetY:32};function f(e,t){var i;return(null===(i=w(t).find((t=>new RegExp(t.domain).test(e))))||void 0===i?void 0:i.buttonPosition)||g}function v(e,t,i){return d(t)&&(i?!function(e,t){var i,a;return(null!==(a=null===(i=t.citationBuilder)||void 0===i?void 0:i.blockedDomains)&&void 0!==a?a:[]).includes(e)}(e,t):c(e,t))}function b(e,t){var i,a,s;const r=new Set(null!==(a=null===(i=e.citationBuilder)||void 0===i?void 0:i.blockedDomains)&&void 0!==a?a:[]);return Object.entries((null===(s=t.citationBuilder)||void 0===s?void 0:s.domains)||{}).filter((([,e])=>void 0!==e&&!e.disabled)).filter((([e])=>{return t=e,!r.has(t);var t})).map((([e])=>e))}function w(e){var t,i;return null!==(i=null===(t=e.citationBuilder)||void 0===t?void 0:t.sources)&&void 0!==i?i:[]}const y=(0,r.hz)((()=>{const e=document.location.href;return(0,s.KK)(e)})),S=(0,r.hz)((e=>{const t=document.location.href;return{url:t,domain:(0,s.KK)(t),isUrlAllowlisted:u(document.location,e)}})),k=(0,r.hz)((()=>r.iy.create()));function E(e){const t=k(),i=y();return(0,a.zG)(e,o.pickProps("citeCopyButtonClick","citeCopyIntextClick","citePopupButtonDisable","citePopupButtonShow","citePopupEditClick","citePopupButtonClick","citePopupEditSuccess","citePopupMissingInfoShow","citePopupMissingInfoFormShow","feedbackSentButtonClick","citePopupAddMissingClick"),(e=>({...e,domain:i,sessionId:t})))}function C(e,t){return e.manualInvocation&&!0===l(t.domain,t)}},45854:(e,t,i)=>{i.d(t,{I:()=>c,O:()=>a});var a,s=i(27378),r=i(50474),n=i(88056),o=i(19429),l=i(35407);!function(e){e.Context=s.createContext(n.Y.invariantContent("AssistantTextResources")),e.holder=o.VF((()=>({setGoalsTooltip:"Set goals to get tailored writing suggestions",proofitTooltip:"Expert writing help"})))}(a||(a={}));const c=l.createFrom(l.composeS({denali:r.m.holder,assistant:a.holder}))((()=>({denali:{}})))},30675:(e,t,i)=>{i.d(t,{t:()=>U});var a=i(57050),s=i(17528),r=i(48015),n=i(36991);var o=i(7604),l=i(89456),c=i(14315),d=i(70063),u=i(32385),p=i(55649),m=i(32952),h=i(85985),g=i(77176),f=i(93508);class v{constructor(){this._mapByHighlightId=new Map,this._mapByAlertId=new Map,this._highlightDataChanged=new m.xQ,this.highlightDataChanged=this._highlightDataChanged}getByHighlightId(e){return this._mapByHighlightId.get(e)}getByAlertId(e){const t=this._mapByAlertId.get(e)||new Set;return Array.from(t).map((e=>this._mapByHighlightId.get(e))).filter((e=>!!e))}get(e){return this._mapByHighlightId.get(e)}has(e){return this._mapByHighlightId.has(e)}set(e,t){this._mapByHighlightId.set(e,t);const i=this._mapByAlertId.get(t.alertId)||new Set;i.add(e),this._mapByAlertId.set(t.alertId,i),this._highlightDataChanged.next(e)}delete(e){const t=this._mapByHighlightId.get(e);if(t){const i=this._mapByAlertId.get(t.alertId);void 0!==i&&(i.delete(e),0===i.size&&this._mapByAlertId.delete(t.alertId)),this._mapByHighlightId.delete(e)}this._highlightDataChanged.next(e)}forEach(e){this._mapByHighlightId.forEach(e)}getHighlightDataObs(e){return this._highlightDataChanged.pipe(h.h((t=>t===e)),g.U((()=>this.getByHighlightId(e))),f.O(this.getByHighlightId(e)))}}class b{constructor(e,t,i,a,s=(()=>d.E9.zero),r=p.Y.create("DenaliHighlightsUpdater")){this._denaliHighlights=e,this._getFluidHighlights=t,this._getTextMap=i,this._getParentRect=a,this._getParentScroll=s,this._log=r}register(e,t,i,a){if(null!==e){if(this._denaliHighlights.has(e))return this.update(e,t,i,a);{const s=new c.Fd(e,t,this._getFluidHighlights(),this._getParentRect,this._getParentScroll),r={id:e,alertId:a.alertId,mark:s,visualization:i};this._denaliHighlights.set(e,r);const n=this._getTextMap().getPlainText();return this._getFluidHighlights().addHighlight(e,(0,u.rX)((0,u.mp)(s.range),n),a),r}}return null}remove(e){this._denaliHighlights.has(e)?(this._getFluidHighlights().removeHighlights([e]),this._denaliHighlights.delete(e)):this._log.warn(`can't remove mark #${e}, doesn't exist`)}update(e,t,i,a){const s=this._denaliHighlights.get(e);if(s){this._denaliHighlights.set(e,{...s,visualization:i});const r=this._getTextMap().getPlainText();return this._getFluidHighlights().updateHighlight(e,(0,u.rX)(t.meta.range(),r),a),s}return this._log.warn("cannot update not existing highlight",e),null}clearAll(){this._denaliHighlights.forEach((e=>{this._getFluidHighlights().removeHighlights([e.id])}))}}var w=i(88355),y=i(98805),S=i(25938),k=i(8709),E=i(59443),C=i(24645),A=i(51374),_=i(9922),I=i(24209),x=i(40151),T=i(76974),M=i(95300),R=i(77150),F=i(80900),L=i(50628),P=i(95195),N=i(5114),B=i(22232),V=i(71249),O=i(95574);class U{constructor(e,t,i,s,r,n,d=p.Y.create("DenaliViewAdapter"),u,f){this._highlights=e,this._textObserver=t,this._replacementService=i,this._layout=s,this._scroller=r,this._selectedHighlightsTracker=n,this._log=d,this._requestAwaitService=u,this._formattingService=f,this._subs=new _.w.Keeper,this._disposed=!1,this._highlightedAlertId=null,this._marks=new Map,this._highlightsDataStore=new v,this._highlightUpdater=new b(this._highlightsDataStore,(()=>this._highlights),(()=>this._textObserver.getTextSource()),(()=>{const e=this._layout.textField.rect.getApproximate();return l.Pf.create({...e.client,...e.size})}),(()=>this._layout.textField.scroll.getApproximate())),this.highlightHoverProvider={getHoveredStateBehavior:e=>this._highlightsDataStore.getHighlightDataObs(e).pipe(g.U((e=>e&&e.visualization.type===c.sO.Change.VisualState.Type.highlighted?{[c.sO.Change.VisualState.Source.sidebar]:o.pc.hoveredNeedsAttention,[c.sO.Change.VisualState.Source.text]:o.pc.hovered,[c.sO.Change.VisualState.Source.api]:this._highlightedAlertId===e.alertId?o.pc.hovered:o.pc.none}[e.visualization.source]:o.pc.none)))},this._updateContentsBuffer=new m.xQ,this._flushUpdater=new m.xQ,this.getContents=(e,t)=>{if(this._log.trace(`getContents, ${String(e)}, ${String(t)}`),this._formattingService){const i=this._textObserver.getTextSource().getRichText();return S.RI.unsafeRes(void 0!==e?i.slice(e,void 0!==t?e+t:void 0):i)}{const i=void 0!==e?this.getText().slice(e,void 0!==t?e+t:void 0):this.getText();return S.RI.resFromText(i)}},this.changes=I.T((0,a.zG)(S.RI.res(this.getContents().delta),P.fold((()=>x.E),(e=>T.of(e)))),this._textObserver.contentChanges.async.pipe(h.h((e=>e.changes.length>0)),g.U((({deltaChange:e})=>e)))),this.activeMarks=new M.X(N.none),this.contentUpdated=new m.xQ,this.hoveredMarks=new M.X(N.none),this.textChangedAfterPaste=new m.xQ,this.activeWord=new M.X(N.none),this.clickedWord=new M.X(N.none),this.ongoingSelection=new M.X(!1),this._log.info(`${U.name} created`),this._subs.push(this._subscribeToContentUpdates(),this._subscribeToSelectedHighlight(),this._trackFocusedAlert())}_trackFocusedAlert(){return this._highlightsDataStore.highlightDataChanged.pipe(g.U((e=>this._highlightsDataStore.getByHighlightId(e))),h.h((e=>!!e))).subscribe((e=>{this._highlightedAlertId===e.alertId||e.visualization.type!==c.sO.Change.VisualState.Type.highlighted||e.visualization.source!==c.sO.Change.VisualState.Source.text&&e.visualization.source!==c.sO.Change.VisualState.Source.sidebar?e.alertId===this._highlightedAlertId&&e.visualization.type===c.sO.Change.VisualState.Type.visible&&(this._highlightedAlertId=null,this._log.trace(`Mark ${e.id} unfocused - alertId ${e.alertId}`)):(this._highlightedAlertId=e.alertId,this._log.trace(`Mark ${e.id} focused - alertId ${e.alertId}`))}))}pushChanges(e,t){this._log.trace("pushChanges",{change:e,source:t}),S.RI.isFlush(e)?this._flushUpdater.next():S.RI.isReset(e)?this._log.warn("Got unknown reset"):this._updateContents(e.delta,t)}getText(){return this._log.trace("getText"),this._formattingService?(0,w.l)(this._textObserver.getTextSource().getRichText(),""):this._textObserver.getTextSource().getPlainText()}getTextLength(){return this._log.trace("getTextLength"),this.getText().length}flushChanges(){this._log.trace("flushChanges")}getCursor(){return this._log.trace("getCursor"),E.Y1.empty}setCursor(e,t,i){return this._log.trace("setCursor",{_index:e,_length:t,_source:i}),P.right(void 0)}getLastPossibleCursorPosition(){return this._log.trace("getLastPossibleCursorPosition"),0}_doMarkAction(e){const t=o.y$.Id.createFromMark(e.id),i=e.meta.capiAlertId;switch(e.action){case C.v.Change.ActionType.create:{const a=this._highlightUpdater.register(t,e,e.meta.visualState,{alertId:i,highlightId:t,highlightColor:e.meta.highlightColor,highlightDisplayFormat:e.meta.highlightDisplayFormat,highlightDisappearOnHoverDelay:e.meta.highlightDisappearOnHoverDelay,highlightLiveliness:null}),s=(null==a?void 0:a.mark)||null;return s&&this._marks.set(s.id,s),s}case C.v.Change.ActionType.update:{const a=this._highlightUpdater.update(t,e,e.meta.visualState,{alertId:i,highlightId:t,highlightColor:e.meta.highlightColor,highlightDisplayFormat:e.meta.highlightDisplayFormat,highlightDisappearOnHoverDelay:e.meta.highlightDisappearOnHoverDelay,highlightLiveliness:null}),s=(null==a?void 0:a.mark)||null;return s&&this._marks.set(s.id,s),s}case C.v.Change.ActionType.remove:return this._highlightUpdater.remove(t),this._marks.delete(e.id),null;default:(0,B.vE)(e)}}changeMarks(e){return this._disposed?(this._log.debug("changeMarks called after disposed, returning empty result"),C.v.Change.Result.getEmpty()):(this._log.trace("changeMarks",{rawMarks:e}),e.reduce(((e,t)=>{switch(t.action){case C.v.Change.ActionType.create:e.created.set(t.id,P.fromNullable(new Error("Cannot create mark"))(this._doMarkAction(t)));break;case C.v.Change.ActionType.update:e.updated.set(t.id,P.fromNullable(new Error("Cannot update mark"))(this._doMarkAction(t)));break;case C.v.Change.ActionType.remove:this._doMarkAction(t),e.removed.set(t.id,P.right(void 0))}return e}),C.v.Change.Result.getEmpty()))}scrollToMark(e,t){var i;const a=null!==(i=this._marks.get(e))&&void 0!==i?i:null;return this._log.trace("scrollToMark",{markId:e,mark:a,opts:t}),a?this._scroller.scrollToMark(a,t):(this._log.warn(`Tried to scroll to nonexistent mark with id: ${e}`),x.E)}_subscribeToContentUpdates(){return this._updateContentsBuffer.pipe(R.R((()=>I.T(F.H((0,y.Xd)(20)),this._flushUpdater).pipe(L.P()))),h.h((e=>e.length>0)),g.U((e=>e.reduce(((e,t)=>e.compose(t)),new k.i)))).subscribe((e=>{const t=this._replacementService.performBatchReplacements((i=e,i.reduce((({actions:e,index:t},i)=>{const a=e[0];return n.s.isInsertString(i)?(e.unshift({pos:{start:t,end:t},value:i.insert}),{actions:e,index:t}):n.s.isInsertEmbed(i)?{actions:e,index:t+1}:n.s.isRetain(i)?{actions:e,index:t+i.retain}:n.s.isDelete(i)?(a&&a.pos.start===a.pos.end&&a.pos.end===t?a.pos={...a.pos,end:a.pos.end+i.delete}:e.unshift({pos:{start:t,end:t+i.delete},value:""}),{actions:e,index:t+i.delete}):void(0,r.vE)(i)}),{actions:[],index:0}).actions.reduce(((e,t)=>(e.length&&e[e.length-1].value&&e[e.length-1].pos.start===t.pos.start?e[e.length-1].value=`${t.value}${e[e.length-1].value}`:e.push(t),e)),[]))).then((()=>{const t=(e=>e.reduce((({formattings:e,index:t},i)=>s.m.hasFormatting(i)?n.s.isInsertString(i)?(e.push({range:{start:t,end:"\n"===i.insert?t:t+i.insert.length},formatting:i.attributes}),{formattings:e,index:t+i.insert.length}):n.s.isInsertEmbed(i)?{formattings:e,index:t+1}:n.s.isRetain(i)?(e.push({range:{start:t,end:t+i.retain},formatting:i.attributes}),{formattings:e,index:t+i.retain}):{formattings:e,index:t}:n.s.isInsertString(i)?{formattings:e,index:t+i.insert.length}:n.s.isInsertEmbed(i)?{formattings:e,index:t+1}:n.s.isRetain(i)?{formattings:e,index:t+i.retain}:n.s.isDelete(i)?{formattings:e,index:t}:void(0,r.vE)(i)),{formattings:[],index:0}).formattings)(e);this._formattingService&&t.length&&(this._log.trace("Have formattings, applying",t),t.forEach((e=>{this._formattingService&&this._formattingService.apply(e.range,e.formatting)})))}),(()=>{this._log.warn("Failed to apply batch replacements")}));var i;this._requestAwaitService&&this._requestAwaitService.addRequest(t)}))}_subscribeToSelectedHighlight(){return this._selectedHighlightsTracker.pipe(g.U((0,a.ls)(V.UI((e=>{var t;return(0,a.zG)(N.fromNullable(null===(t=this._highlightsDataStore.get(e))||void 0===t?void 0:t.mark),N.filter((e=>(0,a.zG)(e.range(),P.fold(a.W8,(0,a.ff)(A.x.isEnclosingView))))))})),V.oA))).subscribe((e=>this.activeMarks.next(N.some(e))))}_updateContents(e,t){this._updateContentsBuffer.next((0,w.AQ)(e))}getSelectionRect(){throw this._log.trace("getSelectionRect"),Error("not implemented")}setContents(e){this._log.trace("setContents",{_value:e})}getHTML(){return this._log.trace("getHTML"),""}getPossibleCursorPosition(e,t){return this._log.trace("getPossibleCursorPosition",{_x:e,_y:t}),O.tryCatchError((()=>{throw new Error("Not implemented")}))}dispose(){this._highlightUpdater.clearAll(),this._subs.dispose(),this._log.info(`${U.name} disposed`),this._disposed=!0}}},25952:(e,t,i)=>{i.d(t,{Y:()=>p,q:()=>m});var a=i(57050),s=i(41398),r=i(77176),n=i(93508),o=i(5381),l=i(42466),c=i(73607),d=i(66896),u=i(5114);const p=(e,t)=>{const i=(0,c.ux)(e.lensState,e.cardsListScrollManager,e.capabilities),a=Math.max(600,t.size.height+o.O.headerHeight+o.O.panelHeight);return i.pipe((0,s.M)(e.predictionsPreviewViewModel.previewState),(0,r.U)((([e,t])=>{if(t.kind!==l.fA.visible)return e;const i=[t.readersAttention,t.tone].filter(u.isSome).length;return i>0?e+o.O.predictionsPreviewHeaderHeight+o.O.predictionInsightHeight*i+o.O.predictionInsightBottomMargin:e})),(0,n.O)(0),(0,r.U)((e=>Math.max(e+o.O.headerHeight,a))),(0,r.U)((e=>Math.min(e,750))))},m=(e,t,i)=>s=>{const r=e(),n=e=>e*i(),o=n(1),l=n(2.25);return(0,a.zG)(t(),u.map((e=>e-(0,c.US)(r))),u.map((e=>d.R.isMainLens(r)&&s?e-l-o:e-o)),u.map((e=>e-n(1))),u.filter((e=>e>0)))}},23167:(e,t,i)=>{i.d(t,{f:()=>o});var a=i(95300),s=i(2844),r=i(66310),n=i(7604);class o{constructor(e){this._originalHoverProvider=e,this._assistantHoverProviderSbj=new a.X(null)}setAssistantHover(e){this._assistantHoverProviderSbj.next(e)}removeAssistantHover(){this._assistantHoverProviderSbj.next(null)}getHoveredStateBehavior(e){const t=this._originalHoverProvider.getHoveredStateBehavior(e);return this._assistantHoverProviderSbj.pipe((0,r.w)((i=>null==i?t:(0,s.aj)(t,i.getHoveredStateBehavior(e),((e,t)=>t!==n.pc.none?t:e)))))}}},74789:(e,t,i)=>{i.d(t,{W:()=>a});const a=(e,t,i)=>{const a=e.textField.visibleRect.getApproximate();let s=(i||0)-a.client.top;(s<=0||s>=a.size.height)&&(s=a.size.height/2);const r=t.top-s-a.client.top,n=t.right-t.left,o=Math.max(0,(a.size.width-n)/2);t.left,a.client.left;requestAnimationFrame((()=>e.textField.scroller.scrollBy({top:r,left:void 0})))}},26035:(e,t,i)=>{i.d(t,{t:()=>c});var a=i(40327),s=i(32385),r=i(14315),n=i(91402),o=i(44586),l=i(95195);function c({scrollToMarkRect:e,scrollToRange:t}){return{scrollToMark:(i,c)=>(0,a.pipe)(r.Fd.getMarkRect(i),l.orElse((()=>(t((0,s.mp)(i.range)),r.Fd.getMarkRect(i)))),l.fold((e=>n._(new Error(`Cannot get mark's rect: ${i.id}: ${e.message}`))),(t=>new o.y((i=>{i.next(void 0),e(t,c)})))))}}},4370:(e,t,i)=>{i.r(t),i.d(t,{AssistantController:()=>a.AssistantController,AssistantControllerImpl:()=>On,AssistantControllerInjectedParams:()=>a.AssistantControllerInjectedParams,AssistantService:()=>Yn,AssistantServiceInjectedParams:()=>s.AssistantServiceInjectedParams,LocalAssistantHighlightCollection:()=>r.c});var a={};i.r(a),i.d(a,{Z:()=>On});var s={};i.r(s),i.d(s,{e:()=>Yn});var r=i(74564),n=i(40327),o=i(27378),l=i(55649),c=i(44730),d=i(31528),u=i(25952),p=i(85886),m=i(28682),h=i(92693),g=i(57050),f=i(95294),v=i(7737),b=i(26109),w=i(59881),y=i(89131),S=i(62623),k=i(33194),E=i(9205),C=i(14601),A=i(77176),_=i(28043),I=i(2844),x=i(98403),T=i(38983);class M{constructor(e,t,i,a){if(this._cardsViewModel=t,this._subs=new C.w,this._successReportFooterBulkDismissAlertsCount=T.h.create(0),this.showBulkDismissFeed=()=>{this._cardsViewModel.actionEvents.next(k.fr.create([{type:"pushAssistantFeed",feedId:k.D1.AssistantFeed.BULK_DISMISS_CARD_FEED_ID}]))},a.isGateEnabled(E.K.SduiBulkDismiss)){const t=e.pipe(A.U(k.D1.StrongAlertRef.getStrongAlertRefBulkDismissAlertIds),A.U((e=>e.size)),_.x());this._subs.add(I.aj([t,i.pipe(_.x())]).pipe(A.U((([e,t])=>t?e:0))).subscribe(x.wW(this._successReportFooterBulkDismissAlertsCount)))}}get successReportFooterBulkDismissAlertsCount(){return this._successReportFooterBulkDismissAlertsCount.view()}dispose(){this._subs.unsubscribe()}}var R,F=i(35214),L=i(74660),P=i(16892),N=i(48521),B=i(35416),V=i(6100),O=i(5114),U=i(45701),D=i(8125),H=i(34217),G=i(52976),j=i(98182),W=i(24040),z=i(60984),q=i(52726);!function(e){const t=e=>(0,n.pipe)(B.In.getActiveItemOfType(a)(e),O.chain(G.P.Capabilities.toAlertItem));function i(e){return B.nL.Items.mapper((e=>e.kind),{[G.P.Kind]:e})}function a(e){return e.kind===G.P.Kind}function s(){return{viewState:()=>e=>(e.kind,G.P.Kind,{view:e,kind:"alertRefSDUI"})}}e.isSelectableItem=a,e.getActiveItemWithAlert=function(e){return t(e)},e.getActiveAlignableItem=e=>t(e),e.getActiveFocusableItem=e=>t(e),e.checksFeedItemsMapper=i,e.isAlertRefSDUI=a,e.defaultOrd=t=>(0,F.fold)(U.getMonoid())([(0,n.pipe)(U.ordBoolean,U.contramap((0,D.ff)(G.P.Item.isBulkAcceptSDUI))),(0,n.pipe)(U.ordBoolean,U.contramap(G.P.Item.isBulkDismissSDUI)),e.getByActiveAlertPositionOrd(t)]),e.sduiToChecksFeedOrd=function(t){return i=>U.fromCompare(((a,s)=>j.e.isSDUIItem(a)&&j.e.isSDUIItem(s)?j.e.getOrd(i).compare(a,s):e.getByActiveAlertPositionOrd(t).compare(a,s)))},e.getByActiveAlertPositionOrd=e=>(0,F.fold)(U.getMonoid())([(0,n.pipe)(L.h$.ordHRange,U.contramap((t=>(0,n.pipe)(e.hasActiveAlert(t),O.map((e=>e.alert)),O.getOrElse((()=>({getHighlightRanges:()=>[{start:0,end:0}]})))))))]),e.item=e=>H.UI.Union.make("kind",{alertRefSDUI:W.p.SingleCard(e),empty:z.Q.Empty}),e.viewState=s,e.createCardListFlow=q.p,e.listItemOrd=e=>U.contramap((e=>e.cell.item.view))(e).compare;const r={equals:(e,t)=>e.kind===t.kind&&P.s.eqById.equals(e,t)},o=e=>({equals:(t,i)=>{const a={[G.P.Kind]:e};return r.equals(t,i)&&function(e,t){return(i,a)=>t[e(i)].equals(i,a)}((e=>e.kind),a)(t,i)}});function l(){return{changePosition:e=>i(G.P.Capabilities.changePosition(e))}}function c(){return{completeTransition:e=>i(G.P.Capabilities.animatable.completeTransition(e)),transitionTo:e=>i(G.P.Capabilities.animatable.transitionTo(e)),changeVisualState:e=>i(G.P.Capabilities.animatable.changeVisualState(e))}}function d(){return{select:(e,t)=>i(G.P.Capabilities.select.select(e,t)),selectByAlert:(e,t,a)=>i(G.P.Capabilities.select.selectByAlert(e,t,a)),unselect:(e,t)=>i(G.P.Capabilities.select.unselect((0,g.MZ)(e),t))}}function u(){return{removeAlertFromItem:(e,t)=>i((i=>i.id===k.D1.SuccessReport.ID?i:G.P.Capabilities.removeAlert.removeAlertFromItem(e,t)(i)))}}function p(){return{remove:(e,t)=>i(G.P.Capabilities.remove.remove(e,t))}}function m(){return{updateWithAlerts:e=>i(g.yR)}}function h(){return{nextAlert:i((()=>O.none)),prevAlert:i((()=>O.none))}}function f(){return{updateUserInput:e=>i(g.yR)}}e.equatable={structEq:o(G.P.eq),idEq:o(r),visualStateEq:o(G.P.eq)},e.changePosition=l,e.disposable={isScheduledToDispose:i(G.P.Capabilities.disposable.isScheduledToDispose)},e.hidable={isHidden:i(N.o.isHidden)},e.animatableItem=c,e.hasAlertsQueries={isSelectableByAlert:e=>i(G.P.Capabilities.hasAlerts.isSelectableByAlert(e)),hasAlert:e=>i(G.P.Capabilities.hasAlerts.hasAlert(e)),hasActiveAlert:i(G.P.Capabilities.hasAlerts.hasActiveAlert)},e.changePositionStrategyQueries={useReferenceHeightOnRemove:i(g.jv)},e.select=d,e.removeAlert=u,e.remove=p,e.updateWithAlert=m,e.releaseAlert=()=>V.v.Capabilities.getAlertReleaser({...u(),...e.disposable}),e.unselectable=()=>V.v.Capabilities.getUnselectable(B.In.getActiveItem,{...d(),...e.disposable}),e.selectableByAlert=()=>V.v.Capabilities.getSelectableByAlert(B.In.getActiveItem,{...e.hasAlertsQueries,...d(),...V.v.Capabilities.getHasChecksFeed(),...e.disposable}),e.selectableById=()=>V.v.Capabilities.getSelectableById(B.In.getActiveItem,{...d(),...e.disposable}),e.updateMeta=()=>({updateMeta:V.v.Capabilities.getMetaUpdatable().updateMeta}),e.animatableFeed=e=>V.v.Capabilities.getAnimatable(e,{...u(),...c(),...V.v.Capabilities.getHasChecksFeed()}),e.hasPriorityToggle=()=>V.v.WithPriority.getHasPriorityToggle({...c(),...e.hasAlertsQueries,...e.disposable}),e.alignable={isValidToAlign:i((t=>!e.disposable.isScheduledToDispose(t)))},e.alertIterator=h,e.itemReleaser=()=>V.v.Capabilities.getItemReleaser(),e.hasAlerts=V.v.Capabilities.getHasAlerts,e.hasUserInput=f,e.verifiable=()=>V.v.Capabilities.getVerifiable(e.disposable),e.cloneable=()=>({clone:i(P.s.Capabilities.getPojoCloneable().clone)});const v={getFeatures:i((e=>G.P.Item.isBulkDismissSDUI(e)?[G.P.Features.BulkDismiss]:G.P.Item.isBulkAcceptSDUI(e)?[G.P.Features.BulkAccept]:[]))};e.getCapabilities=function(t,i){return{...s(),...e.disposable,...e.hidable,...e.equatable,...f(),...e.cloneable(),...l(),...c(),...d(),...p(),...u(),...m(),...e.hasAlertsQueries,...e.changePositionStrategyQueries,...e.alignable,...e.releaseAlert(t),...e.unselectable(t),...e.selectableByAlert(t),...e.selectableById(t),...e.updateMeta(t),...e.animatableFeed(t),...e.hasPriorityToggle(t),...e.itemReleaser(),...v,...e.verifiable(),...e.cloneable(),...e.hasAlerts(h(),i,(()=>e.isSelectableItem),{...e.hasAlertsQueries,...e.disposable})}}}(R||(R={}));var K=i(60797),Z=i(41398),Q=i(71249);class Y{constructor(e,t){this._sub=new C.w;const i=(0,n.pipe)(e,A.U((0,g.ls)((e=>e.actions),Q.Ew((e=>"openCreateSnippetModal"===e.type)))),K.oA);this._sub.add((0,n.pipe)(i,Z.M(t.pipe(A.U(O.getOrElseW((()=>null)))))).subscribe((([e,t])=>{t&&t.showSnippetsEditor(e.snippetContent)})))}dispose(){this._sub.unsubscribe()}}var $,X=i(86061);class J{constructor(e,t){this._domain=e,this._gnar=t}getDomain(){return this._domain}submitFeedback(e){this._gnar.assistantFeedbackSubmitButtonClick("single_card_assistant",e.domain,e.text,(0,X.dK)(e)?e.score:void 0)}}!function(e){e.AccountCreation="accountCreation",e.Tour="tour",e.TryWebsite="tryWebsite",e.ViewApps="viewApps"}($||($={}));const ee={completedItems:[]};var te,ie;!function(e){e.installed="installed",e.notInstalled="notInstalled"}(te||(te={})),function(e){e.macExtension="macExtension",e.windowsExtension="windowsExtension",e.mobileIOS="mobile-ios",e.mobileAndroid="mobile-android"}(ie||(ie={}));class ae{constructor(e,t,i,a){this.anonymous=e,this.state=t,this.gnar=i,this._dapiActions=a,this.actions={updateChecklistState:e=>{var t;this._dapiActions.setGetStartedChecklistState((t=e,encodeURI(JSON.stringify({...t,completedItems:t.completedItems.filter((e=>null!=e&&"string"==typeof e))}))))}}}get userClientState(){return e=this.state.user,new Map(Object.values(ie).map((t=>[t,e.groups.includes(t)?te.installed:te.notInstalled])));var e}get isStudent(){var e,t;return"school"===(null===(t=null===(e=this.state.user)||void 0===e?void 0:e.customFields)||void 0===t?void 0:t.frontend_role)}get checklistState(){return this.state.dapi["DN:getStartedChecklistSettings"]?(e=>{try{const t=decodeURI(e),i=JSON.parse(t);if("completedItems"in i&&Array.isArray(i.completedItems)){const e=i.completedItems.filter((e=>null!==e&&"string"==typeof e));return{...i,completedItems:e}}}catch(e){return ee}return ee})(this.state.dapi["DN:getStartedChecklistSettings"]):ee}}var se,re=i(14532);!function(e){e.correct="correct",e.incorrect="incorrect",e.neutral="neutral"}(se||(se={}));class ne{constructor(e,t,i,a,s){this._learnMoreInfo=T.h.create(null),this._sub=new C.w;const r=(0,n.pipe)(a,A.U((0,g.ls)((e=>e.actions),Q.Ew((e=>"openLearnMore"===e.type||"switchView"===e.type&&"learn-more"===e.selected)))),K.oA);this._sub.add((0,n.pipe)(r,Z.M(e),A.U((([e,a])=>{let r=null;if(B.nL.hasItems(a)){const o=(0,n.pipe)(s(a.currentLens),O.getOrElseW((()=>null))),l=o?(0,n.pipe)(t.getById(o.activeAlert.id),O.getOrElseW((()=>null))):null,d=(0,n.pipe)(O.fromNullable(l),O.chain(L.bZ.getRawId),O.getOrElseW((()=>null))),u=d?i.alerts.getAlertById(d):null;u&&c.S.isCapiAlert(u)&&(r={title:u.todo,showTitleOnContent:"switchView"===e.type,details:u.details||u.explanation,examples:(0,n.pipe)(re.J.parse(u.examples,u.point.includes("Italicization")),O.map((e=>e.map((e=>e.map((e=>({type:e.color===re.J.Color.green?se.correct:e.color===re.J.Color.red?se.incorrect:se.neutral,title:(0,n.pipe)(e.title,O.map((e=>`${e}:`)),O.getOrElseW((()=>null))),text:e.text,useItalicText:!e.hasItalic}))))).flat())),O.getOrElseW((()=>[])))})}return r}))).subscribe(x.wW(this._learnMoreInfo)))}get learnMoreInfo(){return this._learnMoreInfo.view()}dispose(){this._sub.unsubscribe()}}var oe=i(32952),le=i(9922),ce=i(2834);class de{get header(){return this._header}constructor(e,t){this.popView=new oe.xQ,this._header=T.h.create(O.none),this._subs=new le.w.Keeper,this._subs.push((0,g.zG)(this.popView,Z.M(I.aj([t.sduiManager.state,t.sduiFeedManager.feed])),A.U((([e,[t,i]])=>k.D1.AssistantFeed.Header.getSelectedViewBackButtonActions(t,i.feedId))),K.oA,ce.b((t=>e.actionEvents.next(k.fr.create(t))))).subscribe()),this._subs.push(t.sduiFeedManager.header.pipe(A.U(O.of)).subscribe(x.wW(this._header)))}dispose(){this._subs.dispose()}}var ue=i(10389),pe=i(9629),me=i(15646);class he{constructor(e,t,i,a,s,r){this._cardEvents=e,this._alertProcessor=t,this._pageState=i,this._actions=a,this._experimentClient=s,this._gnar=r,this._subs=new C.w,this.currentCard=T.h.create(void 0),this._getExtraFooterOutcomeType=e=>{var t,i;if(e){const a=this._alertProcessor.alerts.getAlertById(e.toString());if(a&&c.S.isCapiAlert(a)){const e=a.outcome;if((0,ue.wF)(e)&&!(null===(i=null===(t=this._pageState.get().lifetimeAlertStats)||void 0===t?void 0:t.seen)||void 0===i?void 0:i[e]))return this._actions.setHasSeenSuggestionType(e),e}}},this.onShow=()=>{var e;this._gnar.firstAcceptFooterShow(null!==(e=this.extraFooterOutcomeType.get())&&void 0!==e?e:"other","assistant")},this._pageState.get().showFirstSuggestionFooters&&"test"===this._experimentClient.getTreatment(pe.p.ProgressiveExposure)?(this._subs.add(this._cardEvents.subscribe((e=>{if(e.type===me.eI.Kind.completeTransitionTo){const t=e.id;"number"!=typeof t&&"string"!=typeof t||this.currentCard.set(t)}}))),this.extraFooterOutcomeType=this.currentCard.view((e=>this._getExtraFooterOutcomeType(e)))):this.extraFooterOutcomeType=T.h.create(void 0)}dispose(){this._subs.unsubscribe()}}var ge=i(66310),fe=i(40151),ve=i(95195),be=i(18208),we=i(40330),ye=i(79880),Se=i(26393),ke=i(85985),Ee=i(93508);const Ce=e=>e.pipe(ke.h((e=>"sdui_add"===e.kind||"sdui_update"===e.kind)),A.U((e=>e.sdui)),ke.h((e=>"assistantFeed"===e.type&&"default-feed"===e.id)),A.U((e=>Se.ab.getCardPropsForFeed(e))),Ee.O({}));class Ae{constructor(e,t,i,a,s,r){this._sduiManager=e,this._sduiBufferService=i,this._statisticsService=a,this._upgradeHookCardExists=r,this._subs=new C.w,this.focusSuccessReportStateTransformer=({state:e,metadata:t})=>{if(!B.nL.hasCards(e))return ve.left({state:e,metadata:t});const i=B.nL.Prism.getLens();return ve.left({state:i.modify((e=>O.isSome(e.cardIndex)||e.items.size>1||(0,n.pipe)(e.items.getAt(0),O.map((e=>e.id!==k.D1.SuccessReport.ID)),O.getOrElse(g.jv))?e:{...e,cardIndex:O.some(0)}),e),metadata:t})};const o=this._sduiManager.state.pipe(A.U((e=>k.D1.GButton.getPushAssistantFeedAction(e,k.D1.GButton.DEFAULT_GBUTTON_ID))),K.oA,A.U((e=>e.feedId))),l=s.pipe(A.U((e=>B.nL.hasSuccess(e)&&B.nL.hasItems(e)&&(0===e.currentLens.items.size||(0,n.pipe)(e.currentLens.items.getAt(0),O.map((e=>e.id===k.D1.SuccessReport.ID)),O.getOrElse(g.jv)))))),c=t.feed.pipe(Z.M(o),A.U((([e,t])=>e.feedId===t)));this.isSuccess=I.aj([l,c]).pipe(A.U((([e,t])=>e&&t)))}_getSuccessMessages(e,t){return{title:t<2?"Looking good so far":e>0?`${e} ${be.pluralize(e,"issue addressed","issues addressed")}`:"Nice job!",subTitle:t<2?"Keep writing to see suggestions.":e>0?"All clear!":"You made that look easy!"}}_getSuccessReportSDUI(e,t,i){const{title:a,subTitle:s}=this._getSuccessMessages(e,t);return{type:"assistantCard",id:k.D1.SuccessReport.ID,meta:{},child:{type:"viewStack",id:"card-viewStack",views:{"default-suggestion":{type:"column",id:we.JX.from("column"),children:[{type:"block",id:we.JX.from("block"),parts:[{type:"image",id:we.JX.from("image"),meta:{},name:we.yL.unknown("success_report_image"),url:"https://assets.grammarly.com/icons/v1/notification-ok.svg",width:2,height:2}],name:we.yL.unknown("success_report_image_block"),spacing:{top:ye.T.D1,right:ye.T.D0,bottom:ye.T.D075,left:ye.T.D0},horizontalAlign:ye.Kq.Center},{type:"block",id:we.JX.from("block"),parts:[{type:"text",id:we.JX.from("text"),size:ye.yH.Regular,meta:{label:a},text:a,textColor:ye.Il.CoreNeutral90,format:[ye.SQ.Bold]}],name:we.yL.unknown("success_report_title_block"),horizontalAlign:ye.Kq.Center},{type:"block",id:we.JX.from("block"),parts:[{type:"text",id:we.JX.from("text"),size:ye.yH.Regular,meta:{label:s},text:s,textColor:ye.Il.CoreNeutral50,format:[]}],name:we.yL.unknown("success_report_subtitle_block"),horizontalAlign:ye.Kq.Center},{type:"block",id:we.JX.from("block"),parts:[],name:we.yL.unknown("success_report_subtitle_space_1_block"),spacing:{top:ye.T.D0,right:ye.T.D0,bottom:ye.T.D1,left:ye.T.D0}},{type:"block",id:we.JX.from("block"),parts:[],name:we.yL.unknown("success_report_subtitle_space_2_block"),spacing:{top:ye.T.D0,right:ye.T.D0,bottom:ye.T.D1,left:ye.T.D0}},{type:"block",id:we.JX.from("block"),parts:[],name:we.yL.unknown("success_report_subtitle_space_3_block"),spacing:{top:ye.T.D0,right:ye.T.D0,bottom:ye.T.D1,left:ye.T.D0}},{type:"block",id:we.JX.from("block"),parts:[],name:we.yL.unknown("success_report_subtitle_space_4_block"),spacing:{top:ye.T.D0,right:ye.T.D0,bottom:ye.T.D1,left:ye.T.D0}}],name:we.yL.unknown("success_report_content_column")},"tone-insights":{type:"nativeToneInsightsModal",id:"card-nativeToneInsightsModal"},feedback:{type:"nativeFeedbackModal",id:"card-nativeFeedbackModal"},settings:{type:"nativeSettingsModal",id:"card-nativeSettingsModal"}},selected:"default-suggestion"},onFocus:[{type:"switchView",where:"openToneDetectorButton-viewStack",selected:"show-open-tone-detector-button"},{type:"switchView",where:"card-viewStack",selected:"default-suggestion"},{type:"switchView",where:"header-viewStack",selected:"default-suggestion"},{type:"notify",userAction:ye.nz.Focus}],onBlur:[],properties:i}}initSuccessReportSDUIEmulation(){const e=this._statisticsService.sessionStats.view((e=>e?e.alertsStats.accepted.total:0));this._subs.add(I.aj([this.isSuccess.pipe(_.x()),this._sduiManager.state.pipe(A.U(k.D1.SuccessReport.findSuccessReportSduiItem),A.U(O.isSome),_.x()),this._upgradeHookCardExists]).pipe(Z.M(Ce(this._sduiBufferService.capiEvents)),A.U((([[e,t,i],a])=>{var s,r;if(!e||i||t)return!(e||!t)&&(this._sduiBufferService.pushCapiSduiEvent({kind:"sdui_remove",rev:0,sduiRootId:k.D1.SuccessReport.ID}),!1);{const e=null!==(r=null===(s=this._statisticsService.sessionStats.get())||void 0===s?void 0:s.alertsStats.accepted.total)&&void 0!==r?r:0,t=this._statisticsService.wordsCount.get(),i=this._getSuccessReportSDUI(e,t,a);return this._sduiBufferService.pushCapiSduiEvent({kind:"sdui_add",rev:0,sduiRootId:k.D1.SuccessReport.ID,sdui:i}),!0}})),ge.w((t=>t?I.aj([e,this._statisticsService.wordsCount,Ce(this._sduiBufferService.capiEvents)]).pipe(ce.b((([e,t,i])=>{const a=this._getSuccessReportSDUI(e,t,i);this._sduiBufferService.pushCapiSduiEvent({kind:"sdui_update",rev:0,sduiRootId:k.D1.SuccessReport.ID,sdui:a})}))):fe.E))).subscribe())}dispose(){this._subs.unsubscribe()}}i(92310);const _e=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;var Ie=i(8901),xe=i(20641),Te=i(4390),Me=i(24209),Re=i(83078),Fe=i(44358);const Le={"Style/ToneImprovement/ConfidentRewrite/ToneAI":"1f91d","Style/ToneImprovement/PersonableRewrite/ToneAI":"1f917","Style/ToneImprovement/PositiveFraming/ToneAI":"1f64c"},Pe=["Style/Sensitivity/SupportUkraine/WarLanguage","Style/Sensitivity/ExtremelySensitive/SuicideIdeation"],Ne=e=>e.patternName.startsWith("Style/Sensitivity")&&!Pe.some((t=>e.patternName===t));var Be;!function(e){e.isToneImprovementSuggestionInfo=function(e){return"emojiId"in e},e.isInclusiveLanguageToneSuggestionInfo=function(e){return"iconId"in e&&"inclusive_language"===e.toneCategory},e.createToneImprovementSuggestionUphookInfo=function(e){const t=e._raw.minicardTitle||e._raw.title||"",i=t.replace(_e,"").trim(),a=t.match(_e),s=a&&a.length?a[0]:null,r=Le[e.patternName];return{...s?{emojiLiteral:s}:r?{emojiId:r}:{},title:i,alertId:e.id,toneCategory:i,patternName:e.patternName,isUphook:!0}},e.isToneImprovementSuggestionUphookInfo=function(e){return"isUphook"in e&&e.isUphook}}(Be||(Be={}));class Ve{constructor(e,t,i,a,s,r,n,o,l,c){this._alertsReader=e,this._getSessionUuid=i,this._gnar=a,this.emogenieService=r,this._upgradeViewModel=n,this._cardActions=l,this._sduiItems=c,this._toneSuggestionInfo=T.h.create(void 0),this._sub=new C.w;const d=this._sduiItems.view(k.D1.StrongAlertRef.getStrongAlertRefBulkDismissAlertIds),u=T.h.combine(t,d,((e,t)=>Te.p.reduce([],((e,i)=>(t.has(i.id)||e.push(i.alert),e)))(e))),p=r.viewState.view("isBrandTonesEnabled"),m=o.view("isPremium"),h=T.h.combine(u,p,m,((e,t,i)=>Ve.getToneSuggestionInfoFromAlerts(e,t,i))),g=h.pipe(ke.h((e=>void 0===e||!Be.isToneImprovementSuggestionUphookInfo(e)))),f=h.pipe(ke.h((e=>void 0!==e&&Be.isToneImprovementSuggestionUphookInfo(e)&&"test"===s.getTreatment(pe.p.ToneDetectorUphook))));this._sub.add(Me.T(g,f).subscribe(x.wW(this._toneSuggestionInfo))),this.toneSuggestionInfo=this._toneSuggestionInfo.view()}static getToneSuggestionInfoFromAlerts(e,t,i){let a;if(i){a=e.filter((e=>e.patternName.startsWith("Style/ToneImprovement")||Ne(e))).map((e=>{var t,i,a;return Ne(e)?{iconId:null!==(t=e._raw.extra_properties.icon_id)&&void 0!==t?t:"",title:e.miniCardTitle,alertId:e.id,toneCategory:"inclusive_language",patternName:e.patternName}:{emojiId:null!==(i=e._raw.extra_properties.emoji_id)&&void 0!==i?i:"",title:L.bZ.isToneAI(e)?e.miniCardTitle:e.miniCardTitle.replace(_e,"").trim(),alertId:e.id,toneCategory:null!==(a=e._raw.extra_properties.tone)&&void 0!==a?a:"",patternName:e.patternName}}))}else{a=e.filter((e=>e._raw.hidden&&(e=>e.patternName.startsWith("Style/ToneImprovement"))(e))).map(Be.createToneImprovementSuggestionUphookInfo)}const s=new Set(a.map((e=>e.toneCategory))),r=a[0],n=t?"Want to sound more on-brand?":s.size>1?"Strike the right tone":null==r?void 0:r.title;return r?{...r,title:n}:r}_getCurrentSessionUuid(){return(0,n.pipe)(this._getSessionUuid(),O.getOrElse((()=>"")))}onShowToneSuggestionInfo(e){const t=Be.isToneImprovementSuggestionInfo(e)?e.emojiId:Be.isInclusiveLanguageToneSuggestionInfo(e)?e.iconId:e.emojiId||e.emojiLiteral||"",i=Be.isToneImprovementSuggestionUphookInfo(e);this._gnar.toneDetectorToneSuggestionInfoShow(i,e.patternName,this._getCurrentSessionUuid(),e.title,t),i&&((0,Fe.n)(this._gnar,{placement:"toneDetector",upgradeHookName:"toneDetector",upgradeHookSlot:"emogenieReport"}),(0,xe.Tb)().upgradeHooks.showUpgradeHook("toneDetector","emogenieReport"))}onClickToneSuggestionInfoCta(e){const t=Be.isToneImprovementSuggestionInfo(e)?e.emojiId:Be.isInclusiveLanguageToneSuggestionInfo(e)?e.iconId:e.emojiId||e.emojiLiteral||"",i=Be.isToneImprovementSuggestionUphookInfo(e);if(this._gnar.toneDetectorToneSuggestionInfoCtaClick(i,e.patternName,this._getCurrentSessionUuid(),e.title,t),i)(0,Fe.Q)(this._gnar,{placement:"toneDetector",upgradeHookName:"toneDetector",upgradeHookSlot:"emogenieReport"}),(0,xe.Tb)().upgradeHooks.clickUpgradeHook("toneDetector","emogenieReport"),this._upgradeViewModel.openUpgradeUrl(Ie.L.Place.toneSuggestion);else{const t=this._sduiItems.get(),i=(0,n.pipe)(this._alertsReader.getById(e.alertId),O.chain(L.bZ.getRawId),O.chain((e=>k.D1.getByAlertId(t,e))),Re.unsafeGet);this._cardActions.next(k.fr.create([k.D1.AssistantFeed.createPushAssistantFeedAction(k.D1.AssistantFeed.TONE_INSIGHTS_SUGGESTIONS_FEED_ID,i.id)]))}}dispose(){this._sub.unsubscribe()}}var Oe=i(66896),Ue=i(60682),De=i(50628),He=i(73975),Ge=i(22232),je=i(7992);const We=e=>{switch(e){case Oe.R.Type.Critical:case Oe.R.Type.Correctness:return ye.Il.CoreRed50;case Oe.R.Type.Clarity:return ye.Il.CoreBlue50;case Oe.R.Type.Engagement:return ye.Il.CoreGreen60;case Oe.R.Type.Delivery:return ye.Il.CorePurple40;case Oe.R.Type.Vox:return ye.Il.CoreNeutral50;case Oe.R.Type.Plagiarism:return ye.Il.CoreCyan50;case Oe.R.Type.Advanced:case Oe.R.Type.Other:case Oe.R.Type.KnowledgeHub:return;default:return(0,Ge.vE)(e)}},ze=(e,t)=>{var i;const a=(i=e,Object.values(i.reduce(((e,t)=>{const i=t.lensType;return e[i]?e[i]={...e[i],lensNames:Q.jj(He.w4)([...e[i].lensNames,t.lensName]),alertsCount:e[i].alertsCount+1}:e[i]={lensNames:[t.lensName],lensType:t.lensType,alertsCount:1},e}),{}))).map((e=>{var t;return we.X2.create([{type:"block",fraction:1,horizontalAlign:ye.Kq.Center,id:we.JX.from("block"),name:we.yL.unknown("upgrade_hook_counter"),parts:[we.XF.create(e.alertsCount.toString(),null!==(t=We(e.lensType))&&void 0!==t?t:ye.Il.CoreNeutral50)]},{type:"block",fraction:11,id:we.JX.from("block"),name:we.yL.unknown("upgrade_hook_alert_group"),parts:[we.xv.create(be.capitalize(e.lensType),ye.yH.Regular,[],ye.Il.CoreNeutral90,void 0,void 0),we.xv.create(` · ${e.lensNames.join(", ")}`,ye.yH.Regular,[],ye.Il.CoreNeutral50,void 0,void 0)]}],[],we.Ki.create("0.5","0.25","0.25","0.75"),ye.g$.Middle)})),s=we.sg.create([we.X2.create([we.gO.create("title",void 0,void 0,we.xv.create("Premium suggestions available:",ye.yH.Regular,[ye.SQ.Bold],ye.Il.CoreNeutral90,void 0,void 0))],[],we.Ki.create("0.75","0.25","0.5","0.75"),ye.g$.Middle),we.gO.create("content",void 0,void 0,...a),we.X2.create([{...we.gO.create("actions",void 0,we.n4.create("0.5","0"),{type:"button",meta:{},id:we.JX.from("goPremium"),name:we.yL.unknown("goPremium"),shape:ye.jL.Square,actions:[{type:"upgradeToPremium"},{type:"notify",userAction:ye.nz.Click}],kind:ye.Lv.Primary,state:ye.BN.Enabled,label:{...we.gO.create("",we.Ki.create("0","0.5","0","0.25"),we.n4.create("0.25","0.25"),we.JO.create(we.JO.Source.createKnown(ye.Tb.Diamond),void 0),we.xv.create("Unlock Premium",ye.yH.Regular,[],ye.Il.CoreYellow80,void 0,void 0)),verticalAlign:ye.g$.Middle}},{type:"button",meta:{},id:we.JX.from("button"),name:we.yL.unknown("dismiss"),shape:ye.jL.Square,actions:[{type:"removeRoot"},{type:"notify",userAction:ye.nz.Click}],kind:ye.Lv.Secondary,state:ye.BN.Enabled,label:we.gO.create("",we.Ki.create("0","0.5","0","0.5"),{horizontal:ye.T.D025,vertical:ye.T.D0},we.xv.create("Dismiss",ye.yH.Regular,[],ye.Il.CoreNeutral50,void 0,void 0))}),verticalAlign:ye.g$.Middle}],[we.gO.create("navigation-arrows",void 0,void 0,we.zx.createIcon(ye.MU.ButtonPrev,we.JO.Source.createKnown(ye.Tb.ArrowLeft),[{type:"prevCard"},{type:"transition",fromName:"content",toName:"content",animateFrom:ye.c1.SlideRight,animateTo:ye.c1.SlideRight},{type:"transition",fromName:"title",toName:"title",animateFrom:ye.c1.SlideRight,animateTo:ye.c1.SlideRight},{type:"notify",userAction:ye.nz.Click}],ye.Lv.Secondary,"Previous suggestion"),we.zx.createIcon(ye.MU.ButtonNext,we.JO.Source.createKnown(ye.Tb.ArrowRight),[{type:"nextCard"},{type:"notify",userAction:ye.nz.Click}],ye.Lv.Secondary,"Next suggestion"))],we.Ki.create("0.5","0.25","1","0.75"),ye.g$.Middle)]);return{id:k.D1.NativeUpgradeHook.ID,type:"assistantCard",meta:{label:"Premium suggestions available:"},child:{...we.XJ.create("default-suggestion",{"default-suggestion":s,feedback:{type:"nativeFeedbackModal",id:"card-nativeFeedbackModal"},settings:{type:"nativeSettingsModal",id:"card-nativeSettingsModal"},"tone-insights":{type:"nativeToneInsightsModal",id:"card-nativeToneInsightsModal"}}),id:"card-viewStack"},onFocus:[{type:"switchView",where:"openToneDetectorButton-viewStack",selected:"show-open-tone-detector-button"},{type:"switchView",where:"card-viewStack",selected:"default-suggestion"},{type:"switchView",where:"header-viewStack",selected:"default-suggestion"},{type:"notify",userAction:ye.nz.Focus}],onBlur:[],properties:{...t,"feed-order":1}}};var qe=i(71242);class Ke{constructor(e){this._subs=new C.w,this._upgradeHookCard=T.h.create(O.none),this._upgradeHookCardFocused=T.h.create(!1),this.processUpgradeHookSduiCardActions=(e,t,i,a,s)=>e.pipe(Z.M(this._upgradeHookCard),A.U((([{actions:e,cardId:r},n])=>{e.forEach((e=>{"upgradeToPremium"===e.type?t.openUpgradeUrl(Ie.L.Place.assistantCardList):"notify"===e.type&&e.userAction===ye.nz.Focus&&(0,g.zG)(n,O.fold(g.jv,(e=>e.id.toString()===r)),(e=>{this._upgradeHookCardFocused.set(e),e&&i.upgradeHooksExp.upgradeHookCardShown(a,s,(0,je.ge)())}))}))}))).subscribe(),this._subs.add(e.pipe(A.U(k.D1.StrongAlertRef.findStrongAlertRefUpgradeHookSduiItem)).subscribe(x.wW(this._upgradeHookCard)))}get upgradeHookCard(){return this._upgradeHookCard.view()}get upgradeHookCardExists(){return this._upgradeHookCard.view(O.isSome)}get upgradeHookCardFocused(){return this._upgradeHookCardFocused.view()}dispose(){this._subs.unsubscribe()}}var Ze=i(64757),Qe=i(1509),Ye=i(12187);const $e={caption:"Compose an email",buttons:[{id:"gmail",icon:"gmail",label:"Gmail",href:"https://mail.google.com/#compose"},{id:"outlook",icon:"outlook",label:"Outlook",href:"https://outlook.office.com/mail/"}]},Xe={caption:"Edit a document",buttons:[{id:"gDocs",icon:"gdocs",label:"Google Docs",href:"https://docs.google.com/"},{id:"word",icon:"word",label:"Word",href:"https://www.microsoft365.com/launch/word"}]},Je=[$e,Xe,{caption:"Update your profile",buttons:[{id:"linkedIn",icon:"linkedIn",label:"LinkedIn",href:"https://www.linkedin.com/feed/"}]}],et=[$e,Xe,{caption:"Send a message",buttons:[{id:"slack",icon:"slack",label:"Slack",href:"https://app.slack.com/client/"},{id:"teams",icon:"teams",label:"Teams",href:"https://teams.microsoft.com/"}]}];var tt=i(22484),it=i(31926);const at=({isStudent:e})=>(o.useEffect((()=>{tt.J.getStartedUseCasesShow()}),[]),o.createElement("div",{className:it.getStartedUseCases},o.createElement("section",{className:it.copyContainer},o.createElement("p",{className:it.title},"Now, see Grammarly in action"),o.createElement("p",{className:it.subtitle},"Start writing something new, or proofread a piece of text you already wrote.")),o.createElement("section",{className:it.ctaContainer},(e?Je:et).map((({caption:e,buttons:t})=>o.createElement("div",{key:e},o.createElement("p",{className:it.ctaCaption},e),o.createElement("div",{className:it.ctaButtons},t.map((({id:e,icon:t,label:i,href:a})=>o.createElement(Ze.zx,{key:e,className:it.externalLink,"data-part":`use-case-link-${e}`,"aria-label":e,name:`get-started-use-cases-${e}`,styleType:Qe.Z.Type.Base,href:a,target:"_blank",onClick:()=>{tt.J.getStartedUseCasesLinkClick(e)}},t&&o.createElement("div",{...(0,Ye.Sh)(it.icon,it[t])}),o.createElement("span",null,i)))))))))));var st=i(2639),rt=i(85441),nt=i(12764);const ot=[{id:$.AccountCreation,title:"Create an account",description:"Sign up for free or sign in to an existing account to start receiving writing insights."},{id:$.Tour,title:"Take a quick tour",description:"Want to see how Grammarly works?"},{id:$.TryWebsite,title:"Try writing with Grammarly",description:"Get suggestions wherever you write online with the browser extension."},{id:$.ViewApps,title:"Explore other Grammarly products",description:"Get suggestions from Grammarly when you write on all your favorite platforms and devices."}],lt=[{id:"gmail",text:"Try it in Gmail",icon:"gmail",href:"https://mail.google.com/#compose"},{id:"outlook",text:"Try it in Microsoft Outlook",icon:"outlook",href:"https://outlook.live.com/mail"},{id:"gDocs",text:"Try it in Google Docs",icon:"gdocs",href:"https://docs.google.com"}],ct=[{id:"desktop",text:"Grammarly for Desktop",href:"https://www.grammarly.com/desktop"},{id:"keyboard",text:"The Grammarly Keyboard",href:"https://www.grammarly.com/mobile"}];var dt=i(93405);const ut=({label:e,href:t,onClick:i})=>o.createElement(Ze.zx.Primary,{className:dt.link,"data-part":e.toLowerCase().split(" ").join("-"),onClick:i,target:t?"_blank":"_self",href:t},e),pt=({items:e,onClick:t})=>o.createElement(o.Fragment,null,e.map((({id:e,text:i,icon:a,href:s})=>o.createElement(Ze.zx,{key:e,className:dt.externalLink,"data-part":`try-${e}`,"aria-label":e,name:`get-started-${e}`,styleType:Qe.Z.Type.Base,href:s,target:"_blank",onClick:()=>t(e)},a&&o.createElement("div",{...(0,Ye.Sh)(dt.icon,dt[a])}),o.createElement("span",null,i))))),mt=(e,t)=>{const i=e.find((e=>!t.has(e.id)));return null==i?void 0:i.id};var ht=i(91308);const gt=({completed:e,total:t})=>o.createElement("div",{className:ht.progressBarBg},o.createElement("div",{"data-name":"progress-bar","aria-label":"completionProgress",className:ht.progressBar,role:"progressbar","aria-valuenow":e,style:{width:(e<=t&&e>=0?e/t*100:e<0?0:100)+"%"}}));var ft,vt,bt=i(52426);!function(e){e.Complete="complete",e.Incomplete="incomplete"}(ft||(ft={})),function(e){e.macDesktop="macDesktop",e.winDesktop="winDesktop",e.android="android",e.iOS="iOS"}(vt||(vt={}));const wt=e=>{switch(e){case ie.macExtension:return vt.macDesktop;case ie.windowsExtension:return vt.winDesktop;case ie.mobileAndroid:return vt.android;case ie.mobileIOS:return vt.iOS;default:(0,Ge.vE)(e)}},yt=({getStartedChecklistViewModel:e,notify:t})=>{const{anonymous:i,checklistState:a,gnar:s,actions:r,userClientState:n}=e,[l,c]=o.useState((()=>{const e=new Set([...a.completedItems,...i?[]:[$.AccountCreation]]);return{items:e,count:e.size}})),[d,u]=o.useState(((e,t)=>{const i=mt(e,t);return i?new Set([i]):new Set})(ot,l.items)),p=(e,i)=>{const o=new Set,d=new Set(l.items);if(e!==$.AccountCreation){l.items.has(e)||(d.add(e),c({items:d,count:d.size}),Object.values($).every((e=>d.has(e)))&&t());const p=mt(ot,d);o.delete(e),p&&o.add(p),u(o);const m=Object.values(ie).filter((e=>n.get(e)===te.installed)).map(wt);s.getStartedLinkClick(m,i,e,d.size,ot.length),r.updateChecklistState({...a,completedItems:[...d]})}},m=e=>l.items.has(e)?ft.Complete:ft.Incomplete;return o.useEffect((()=>{s.getStartedChecklistShow(Array.from(l.items),mt(ot,l.items))}),[]),o.createElement("div",{className:bt.getStartedChecklist},o.createElement("div",{className:bt.logo}),o.createElement(Qe.Z.H3,{className:bt.title},"Welcome! Here are a few steps to get you started."),o.createElement(Qe.Z.Base,{className:bt.progressCaption},"You’ve completed ",o.createElement("strong",null,l.count)," out of"," ",o.createElement("strong",null,ot.length)," steps."),o.createElement(gt,{total:ot.length,completed:l.count}),o.createElement(st.W,{allChecklistItems:ot,completedItems:l,expandedItems:d,onExpandItem:e=>{const t=new Set,a=m(e),r=i?$.AccountCreation:e,n=m(r);if(s.getStartedSectionClick(a,e),0===d.size)t.add(r),s.getStartedItemExpand(n,r);else{const[i]=d;i!=e?(t.add(r),s.getStartedItemCollapse(a,i),s.getStartedItemExpand(n,r)):s.getStartedItemCollapse(a,i)}u(t)},getCTA:e=>((e,t)=>{switch(e){case"accountCreation":return o.createElement(ut,{label:"Sign up",href:"https://www.grammarly.com/signup",onClick:()=>t($.AccountCreation,$.AccountCreation)});case"tour":return o.createElement(ut,{label:"Start tour",onClick:()=>{t($.Tour,$.Tour),(0,rt.O)().bgRpc.api.sendToFocusTab({kind:nt.B.Kind.showOnboardingDialog})}});case"tryWebsite":return o.createElement(pt,{items:lt,onClick:e=>t($.TryWebsite,e)});case"viewApps":return o.createElement(pt,{items:ct,onClick:e=>t($.ViewApps,e)});default:return null}})(e,p)}))};var St=i(31699);const kt=({htmlToSanitize:e,...t})=>o.createElement("div",{...t,dangerouslySetInnerHTML:{__html:(0,St.sanitize)(e)}});var Et=i(25079);const Ct=({title:e,details:t,examples:i})=>o.createElement("div",{className:Et.learnMore},void 0!==e?o.createElement("div",{className:Et.learnMoreTitle},be.capitalize(e)):null,o.createElement(kt,{htmlToSanitize:t}),i.map(((e,t)=>{const i=e.type===se.correct,a=e.type===se.incorrect,s=i||a?o.createElement("div",{...(0,Ye.Sh)(Et.learnMoreExampleIcon,i?Et.learnMoreExampleCorrectIcon:null,a?Et.learnMoreExampleIncorrectIcon:null)}):null;return o.createElement("div",{className:Et.learnMoreExample,key:`learn-more-example-${t}`},e.title?o.createElement(o.Fragment,null,o.createElement("div",{className:Et.learnMoreExampleIconAndTitle},s,o.createElement("div",{className:Et.learnMoreExampleTitle},e.title)),o.createElement(kt,{...(0,Ye.Sh)(s?Et.learnMoreExampleTextMarginLeft:null,e.useItalicText?Et.learnMoreExampleTextItalic:null),htmlToSanitize:e.text})):o.createElement(kt,{...(0,Ye.Sh)(e.useItalicText?Et.learnMoreExampleTextItalic:null),htmlToSanitize:e.text}))})));var At=i(5739);const _t=({learnMoreInfo:e})=>o.createElement(At.F.Fragment,null,e.view((e=>e?o.createElement(Ct,{title:e.showTitleOnContent?e.title:void 0,details:e.details,examples:e.examples}):null)));var It=i(31480),xt=i(15346),Tt=i(72154);const Mt=({children:e,popActiveView:t,panelClassName:i,contentClassName:a,footer:s,onClickBack:r,hideBackButton:n=T.h.create(!1),dataPartName:l})=>o.createElement("div",{className:xt.viewOverlay,"data-grammarly-part":"assistant-view-overlay"},o.createElement(At.F.Fragment,null,n.view((e=>!e&&o.createElement(Tt.M,{className:xt.viewOverlayGoBack,clickHandler:()=>r?r():t(),dataGrammarlyPart:"assistant-go-back"},"<- Back")))),o.createElement("div",{className:i||xt.defaultViewOverlayPanel},o.createElement("div",{className:a||xt.content,"data-grammarly-part":l},e),s&&o.createElement("div",{className:xt.footer},s)));var Rt=i(73385);const Ft=({popActiveView:e,browser:t,onClickBack:i,children:a})=>{const[s,r]=o.useState(!1);return o.createElement(Mt,{dataPartName:"proofit-view-overlay",popActiveView:e,panelClassName:It.proofitViewOverlayPanel,onClickBack:i},o.createElement("div",{className:It.proofitViewOverlayContent,tabIndex:-1,ref:e=>{null===e||s||(e.focus(),r(!0))}},o.createElement("div",{className:xt.defaultViewOverlayHeader},o.createElement("div",{className:It.proofitViewOverlayHeader},"Expert Writing Help",o.createElement(Rt.v,{browser:t,className:It.proofitViewOverlayHeaderBetaBadge}))),a))};var Lt=i(78002),Pt=i(62369),Nt=i(68610),Bt=i(80860);var Vt=i(78258),Ot=i(92647),Ut=i(96528);const Dt=({turnaroundTime:e})=>o.createElement("div",{className:Ot.proofitHowItWorksSteps},o.createElement("div",{...(0,Ye.Sh)(Ot.proofitHowItWorksStep,Ot.proofitHowItWorksStepOne)},"Your draft will be minimized and shared with writing experts.",o.createElement("div",{...(0,Ye.Sh)(Ot.proofitHowItWorksStepNumberContainer,Ot.proofitHowItWorksStepOneNumberContainer)},o.createElement("div",{...(0,Ye.Sh)(Ot.proofitHowItWorksStepNumber,Ot.proofitHowItWorksStepOneNumber)},"1"))),o.createElement("div",{...(0,Ye.Sh)(Ot.proofitHowItWorksStep,Ot.proofitHowItWorksStepTwo)},"You will see progress indication. The average turnaround is ",e," seconds.",o.createElement("div",{...(0,Ye.Sh)(Ot.proofitHowItWorksStepNumberContainer,Ot.proofitHowItWorksStepTwoNumberContainer)},o.createElement("div",{...(0,Ye.Sh)(Ot.proofitHowItWorksStepNumber,Ot.proofitHowItWorksStepTwoNumber)},"2"))),o.createElement("div",{...(0,Ye.Sh)(Ot.proofitHowItWorksStep,Ot.proofitHowItWorksStepThree)},"Your draft will re-open with revisions highlighted.",o.createElement("div",{...(0,Ye.Sh)(Ot.proofitHowItWorksStepNumberContainer,Ot.proofitHowItWorksStepThreeNumberContainer)},o.createElement("div",{...(0,Ye.Sh)(Ot.proofitHowItWorksStepNumber,Ot.proofitHowItWorksStepThreeNumber)},"3")))),Ht=({turnaroundTime:e,freeTrialQuota:t,onSubmit:i,disabledInfo:a=null,isLoading:s=!1,style:r,onTogglePrivacyInfo:n,showPrivacyInfo:l,disableHowItWorksInfo:c=!1,onDisableHowItWorksInfo:d,showHowItWorksInfo:u,onShowHowItWorksInfo:p})=>{const[m,h]=o.useState(null!=l&&l),[g,f]=o.useState(null!=u&&u),v=t>0?t:0;var b,w;o.useEffect((()=>{null==n||n(m)}),[m]),o.useEffect((()=>{h(null!=l&&l)}),[l]),o.useEffect((()=>{f(null!=u&&u)}),[u]),b=()=>null==p?void 0:p(),w=g,o.useEffect((()=>{w&&b()}),[w]);const y=o.useCallback((()=>{c||g?i():f(!0)}),[c,g,i]);return o.createElement("div",{"data-grammarly-part":"proofit-request-form",style:{width:"100%",height:"100%",...r}},o.createElement("div",{className:Ut.proofitRequestForm},m?o.createElement(o.Fragment,null,o.createElement("div",{className:Ut.proofitRequestFormPrivacyInfoTitle},"How we protect you"),o.createElement("div",{className:Ut.proofitRequestFormPrivacyInfoDescription},o.createElement("div",{className:Ut.proofitRequestFormPrivacyInfoDescriptionItem},o.createElement("div",{className:Ut.proofitRequestFormPrivacyInfoDescriptionItemBulletPoint}),o.createElement("div",{className:Ut.proofitRequestFormPrivacyInfoDescriptionItemText},"Our writing experts will see only your current email draft—no prior messages or contact details.")),o.createElement("div",{className:Ut.proofitRequestFormPrivacyInfoDescriptionItem},o.createElement("div",{className:Ut.proofitRequestFormPrivacyInfoDescriptionItemBulletPoint}),o.createElement("div",{className:Ut.proofitRequestFormPrivacyInfoDescriptionItemText},"We will not sell, rent, or make public any of your personal data."))),o.createElement(Pt.z,{kind:"outlined",onClick:()=>h(!1)},"Continue")):o.createElement(o.Fragment,null,g?o.createElement(Dt,{turnaroundTime:e}):o.createElement(o.Fragment,null,o.createElement("div",{className:Ut.proofitRequestFormImg}),o.createElement("div",{className:Ut.proofitRequestFormTitle},"Get instant writing help"),o.createElement("div",{className:Ut.proofitRequestFormDescription},"Our writing experts are standing by to review your email."),o.createElement("div",{className:Ut.proofitRequestFormCostAndTime},o.createElement("div",{className:Ut.proofitRequestFormCost},o.createElement("div",{className:Ut.proofitRequestFormCostAndTimeTitle},v," free ",be.pluralize(v,"review","reviews")),o.createElement("div",{className:Ut.proofitRequestFormCostAndTimeSubtitle},"left this month",o.createElement("sup",null,"*"))),o.createElement("div",{className:Ut.proofitRequestFormTime},o.createElement("div",{className:Ut.proofitRequestFormCostAndTimeTitle},e," seconds"),o.createElement("div",{className:Ut.proofitRequestFormCostAndTimeSubtitle},"average turnaround")))),o.createElement(Pt.z,{kind:"primary",className:Ut.proofitRequestFormRequestBtn,disabled:Boolean(a||s),onClick:y},s?o.createElement("div",{className:Vt.proofitRequestFormBtnLoadingSpinner}):c||g?"Start review":"Request now"),a||s?a?o.createElement("div",{className:Ut.proofitRequestFormUnavailableMsg},o.createElement(Bt.Q,{info:a})):null:o.createElement(Pt.z,{kind:"link",onClick:()=>h(!0)},"Learn how we protect your privacy"),o.createElement("div",{...(0,Ye.Sh)(Ut.proofitRequestFormFootnote,g?Ut.proofitRequestFormFootnoteHowItWorksDontShowAgainCheckbox:Ut.proofitRequestFormFootnoteFreeTrial)},g?o.createElement(Nt.J,{labelId:"proofit-request-form-how-it-works-dont-show-again",onChange:d},"Don't show this again"):o.createElement("span",null,o.createElement("sup",null,"*")," included with your Premium subscription")))))};var Gt=i(20067);const jt=({proofitVM:e,...t})=>{const i=(0,Gt.fW)(),[a,s]=o.useState(!1),[r,n]=o.useState(!1),l=o.createElement(At.F.Fragment,null,(0,I.aj)([e.feature.layoutCreated,e.feature.requestInfo,e.feature.turnaroundTime,e.feature.quotaRemaining,e.feature.requestDisabledInfo,e.feature.disableHowItWorksInfo]).pipe((0,A.U)((([t,l,c,d,u,p])=>t&&l.status!==Lt.eE.REVIEWING?o.createElement(Ht,{turnaroundTime:c,freeTrialQuota:d,onSubmit:()=>e.onSubmitRequest(i),style:{height:"calc(100% - 48px)"},disabledInfo:u,isLoading:l.status===Lt.eE.PREPARING||l.status===Lt.eE.PRE_SUBMIT,showPrivacyInfo:a,onTogglePrivacyInfo:s,disableHowItWorksInfo:p,onDisableHowItWorksInfo:t=>e.feature.onDisableHowItWorksInfo(t),showHowItWorksInfo:r,onShowHowItWorksInfo:()=>n(!0)}):null))));return t.insideSingleCardAssistant?l:o.createElement(Ft,{popActiveView:t.popActiveView,browser:t.browser,onClickBack:()=>{a?s(!1):r?n(!1):t.popActiveView()}},l)};var Wt=i(60561),zt=i(21023);const qt=({suggestionsMade:e,onAccept:t,onFeedbackFormSubmitted:i,experimentClient:a})=>o.createElement("div",{className:zt.proofitReviewForm,"data-grammarly-part":"proofit-review-form"},o.createElement("div",{className:zt.proofitReviewFormTitle},"Our experts made ",e," ",be.pluralize(e,"suggestion","suggestions")),o.createElement("div",{className:zt.proofitReviewFormDescription},"Are you satisfied with the suggestions that our experts provided?"),o.createElement("div",{className:zt.proofitFeedbackForm},o.createElement(Wt.q,{hideLogo:!0,hideTitle:!0,hideTextBoxTitle:!0,withScore:!0,placeholderText:"How can we improve?",onSubmit:i,showPostSubmitScreen:!1,experimentClient:a})),o.createElement("div",{className:zt.proofitDoneButton},o.createElement(Pt.z,{kind:"link",onClick:t},"Done"))),Kt=({proofitVM:e,experimentClient:t,...i})=>{const a=(0,Gt.fW)(),s=o.createElement(At.F.Fragment,null,(0,I.aj)([e.feature.layoutCreated,e.feature.requestInfo]).pipe((0,A.U)((([i,s])=>i&&s.status===Lt.eE.REVIEWING?o.createElement(qt,{suggestionsMade:s.suggestionsMade,onAccept:()=>e.onCompleteRequest(a),onFeedbackFormSubmitted:t=>{e.onSubmitFeedback(t),e.onCompleteRequest(a)},experimentClient:t}):null))));return i.insideSingleCardAssistant?s:o.createElement(Ft,{popActiveView:i.popActiveView,browser:i.browser},s)};var Zt=i(31470),Qt=i(5397),Yt=i(6726),$t=i(69324),Xt=i(70836),Jt=i(6943);const ei=({feedbackVM:e,entryPoint:t})=>o.createElement(Yt.u,{showDelay:Qt.gk,message:"Leave feedback"},o.createElement("div",{className:Jt.feedbackButton,onClick:()=>e.openFeedback(t),"data-grammarly-part":"assistant-feedback-btn"},o.createElement($t.A,{color:Xt.Z.blue50}),"Anything we can improve?"));var ti=i(42356),ii=i(49405),ai=i(9264),si=i(9172),ri=i(82828);const ni=()=>o.createElement("svg",{width:"11",height:"12",viewBox:"0 0 11 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M4 1H2.5C1.39543 1 0.5 1.89543 0.5 3V9C0.5 10.1046 1.39543 11 2.5 11H8.5C9.60457 11 10.5 10.1046 10.5 9V7.5M5.5 6L10.5 1M10.5 1H6.5M10.5 1V5",stroke:"#4A6EE0",strokeLinecap:"round"}));var oi=i(19374),li=i(48015),ci=i(98716),di=i(50945);const ui=({children:e,blocked:t,wrapperClassName:i,disabledText:a="Sign in to use this feature"})=>t?o.createElement(Yt.u,{message:a,position:"top"},o.createElement("div",{className:i},o.createElement("div",{className:di.hover_blocker,onClick:li.EI,onDoubleClick:li.EI},e))):o.createElement(o.Fragment,null,e);var pi=i(56913);class mi extends o.Component{constructor(){super(...arguments),this.handleChange=e=>{(this.props.skipTrustedCheck||e.isTrusted)&&this.props.onChange(e)}}render(){return o.createElement("div",{...(0,Ye.Sh)(this.props.extraClassName,ci.setting_item,this.props.disabled&&ci.disabled)},o.createElement("label",{...(0,Ye.Sh)(ci.select_checkbox,this.props.centered&&ci.centered,this.props.isKeyboardAccessible&&ci.keyboard_accessible),"data-grammarly-part":this.props.dataGrammarlyPart},o.createElement("div",{className:ci.select_children},this.props.children,this.props.beta&&o.createElement("span",{className:(0,pi.G6)()?ci.new:ci.beta}),this.props.alpha&&o.createElement("span",{className:(0,pi.G6)()?ci.new:ci.alpha}),this.props.new&&o.createElement("span",{className:ci.new})),o.createElement(ui,{wrapperClassName:ci.checkbox_control_wrapper,blocked:this.props.disabled,disabledText:this.props.disabledText}),o.createElement("input",{className:ci.checkbox,onChange:this.props.disabled?li.EI:this.handleChange,checked:this.props.checked,type:"checkbox"}),o.createElement("div",{...(0,Ye.Sh)(ci.checkbox_check,this.props.grayOut&&ci.grayOut,this.props.checked?ci.on:ci.off)},o.createElement("div",{...(0,Ye.Sh)(ci.on_off)},this.props.checked?"ON":"OFF"),o.createElement("div",{className:ci.checkbox_check_round}))))}}var hi=i(65287);const gi=({showTitle:e,showBackground:t,openGBLanding:i})=>o.createElement("div",{...(0,Ye.Sh)(hi.container,t?hi.containerWithBackground:null)},o.createElement("div",{className:hi.content},e&&o.createElement("div",{className:hi.title},"Grammarly for your team"),o.createElement("div",null,"Help your team make your business look great with top-notch writing."),o.createElement(Pt.z,{size:"medium",onClick:()=>{i((0,pi.Um)().businessHomepage),(0,xe.Tb)().gGbUpHookClick()},className:hi.button},"Explore Grammarly Business")));var fi=i(51129);const vi=e=>{const t=fi.n5.getType(e);return"registered"===t?"free":t};var bi=i(6294),wi=i(75463),yi=i(11250);class Si extends o.Component{constructor(){super(...arguments),this.onEnableDefsClick=e=>{const{toggleDefs:t}=this.props,i=e.target.checked;t(i),yi.J.definitionToggleClick(i?"on":"off"),(0,xe.Tb)().toggleExtensionDefs(i)}}render(){const{enabledDefs:e,disabled:t}=this.props;return o.createElement(mi,{onChange:this.onEnableDefsClick,checked:e,extraClassName:ii.def_switcher,dataGrammarlyPart:"definitionAndSynonymsSwitcher",disabled:t,skipTrustedCheck:this.props.skipTrustedCheck},"Show definitions and synonyms ",o.createElement("br",null),"via double clicks (all sites)")}}var ki=i(17347),Ei=i(18813),Ci=i(17579),Ai=i(34917);const _i=()=>o.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M13.9207 15L15.5 17.2562L17.0793 15H13.9207Z",stroke:"#6D758D",strokeWidth:"2"}));var Ii=i(65479);const xi={american:o.createElement((()=>o.createElement("div",{className:Ai.american,role:"presentation"})),null),australian:o.createElement((()=>o.createElement("div",{className:Ai.australian,role:"presentation"})),null),british:o.createElement((()=>o.createElement("div",{className:Ai.british,role:"presentation"})),null),canadian:o.createElement((()=>o.createElement("div",{className:Ai.canadian,role:"presentation"})),null),indian:o.createElement((()=>o.createElement("div",{className:Ai.indian,role:"presentation"})),null)},Ti=({dialect:e,className:t})=>o.createElement(o.Fragment,null,xi[e],o.createElement("span",{"data-test-attr":`dialect_${e}`,className:`${Ii.option} ${null!=t?t:""}`},be.capitalize(e)+" English"));var Mi=i(80394);const Ri=({lock:e={message:"",isLocked:!1},dialect:t})=>o.createElement("div",{className:Mi.label},e.isLocked&&o.createElement(Yt.u,{message:e.message},o.createElement("div",{className:Mi.lockIconWrapper},o.createElement(Ci.N,null))),o.createElement(Ze.zx.White,{name:"dialect.box",style:{padding:"0"},disabled:e.isLocked},o.createElement("div",{className:`${Mi.selected} ${e.isLocked?Mi.disabled:""}`},o.createElement(Ti,{dialect:t,className:Mi.option}),o.createElement(_i,null))));var Fi=i(44103);class Li extends o.Component{render(){var e;const t=this.props.dropdownOnTop?{customPosition:{top:`-${32*(this.props.dialects.length-1)+4}px`,left:"0"},vAlign:"top"}:{customPosition:{top:"36px",left:"0"}};return(null===(e=this.props.lock)||void 0===e?void 0:e.isLocked)?o.createElement(Ri,{lock:this.props.lock,dialect:this.props.dialect}):o.createElement(Ei.L,{...t,showDelay:0,closeDelay:150,appearanceBehavior:"mouseClick",name:"dialect",label:o.createElement(Ri,{dialect:this.props.dialect})},this.props.dialects.filter((e=>e!==this.props.dialect)).map((e=>o.createElement(Ze.zx.Flat,{name:e,key:e,onClick:t=>(null==t?void 0:t.isTrusted)&&this.props.onSetDialect(e)},o.createElement("div",{className:Fi.option},o.createElement(Ti,{className:Fi.label,dialect:e}))))))}}class Pi extends o.Component{constructor(){super(...arguments),this.setDialect=e=>{const{changeStrongDialect:t,dialectWeak:i}=this.props;t(e);const a=e+"English";yi.J.languageSettingUpdate(a,"user",i&&e===i)}}render(){const e=this.props.dialectStrong||this.props.dialectWeak||"american";return o.createElement("div",{...(0,Ye.Sh)(ki.line,this.props.disabled&&ki.disabled)},o.createElement("div",null,"I write in"),o.createElement(ui,{blocked:this.props.disabled},o.createElement("div",{className:ki.dialectPicker},o.createElement(Li,{dialect:e,dialects:this.props.dialects,onSetDialect:this.setDialect,dropdownOnTop:!!this.props.dropdownOnTop,lock:this.props.lock}))))}}const Ni=e=>{const t="docs.google.com"===e.domain?"Google Docs":e.domain,{enabledInConfig:i,siteSwitcherChecked:a,favicon:s}=e,r=a.checked&&i,n=i?"Check for writing suggestions":"Checking is not supported";return o.createElement(mi,{grayOut:!i,onChange:e=>a.update(e.target.checked),checked:r,extraClassName:ii.site_switcher,dataGrammarlyPart:"siteSwitcher",skipTrustedCheck:e.skipTrustedCheck,centered:!!e.centeredToggle},o.createElement("div",{"data-test-attr":"siteControlsLabelText"},n,o.createElement("br",null)," ",o.createElement("span",{...(0,Ye.Sh)(ii.domain,e.centeredToggle&&ii.centered)},o.createElement("span",{className:ii.thin_text},"on")," ",s&&o.createElement("span",{className:ii.favicon},o.createElement("img",{width:"16px",height:"16px",src:s})),t)))};var Bi=i(34455);const Vi=e=>o.createElement(mi,{onChange:t=>{e.toggle(t.target.checked)},checked:e.enabled,extraClassName:ii.def_switcher,isKeyboardAccessible:e.isKeyboardAccessible},"Correct spelling automatically"),Oi=e=>o.createElement(mi,{checked:!e.enabled,extraClassName:ii.def_switcher,isKeyboardAccessible:e.isKeyboardAccessible,onChange:t=>{e.toggle(!t.target.checked)},dataGrammarlyPart:"disableDesktopIntegrationToggle"},o.createElement("div",{className:ii.llamaTitle},"Check text with browser extension"),e.enabled&&o.createElement("div",{className:ii.llamaDescription},"Grammarly's browser extension was deactivated since you're using Grammarly's desktop application.")),Ui=e=>o.createElement(mi,{onChange:t=>{e.toggle(t.target.checked)},beta:!0,checked:e.enabled,extraClassName:ii.def_switcher,isKeyboardAccessible:e.isKeyboardAccessible},"Show phrasal predictions"),Di=e=>o.createElement(mi,{onChange:t=>{e.toggle(t.target.checked)},checked:e.enabled,extraClassName:ii.def_switcher,dataGrammarlyPart:"settings-toggle-show-emoji-for-detected-tones",isKeyboardAccessible:e.isKeyboardAccessible},"Show emoji for detected tones"),Hi=e=>o.createElement("div",{className:ii.cheetahLabelAndButton},o.createElement("div",{className:ii.cheetahLabel},o.createElement("b",null,"GrammarlyGO"),o.createElement(Rt.v,{browser:(0,pi.qs)(),color:"green"})),o.createElement(Pt.z,{className:ii.cheetahManageButton,kind:"transparent",dataGrammarlyPart:"cheetahManageBtn",onClick:()=>{e.manageButtonClick()}},o.createElement("span",null,"Manage"))),Gi=e=>o.createElement(mi,{disabled:e.disabled,grayOut:e.disabled,disabledText:"",onChange:t=>{e.toggle(t.target.checked)},checked:e.enabled,extraClassName:ii.def_switcher,isKeyboardAccessible:e.isKeyboardAccessible},e.label),ji=e=>o.createElement(mi,{onChange:t=>{e.toggle(t.target.checked)},checked:e.enabled,extraClassName:ii.def_switcher,dataGrammarlyPart:"settings-toggle-include-serengeti-context",isKeyboardAccessible:e.isKeyboardAccessible},"Use organizational context in GrammarlyGO"," ",o.createElement(Rt.v,{browser:(0,pi.qs)(),color:"green",title:"internal"})),Wi=e=>o.createElement(mi,{onChange:t=>{e.toggle(t.target.checked)},beta:!0,checked:e.enabled,extraClassName:ii.def_switcher,isKeyboardAccessible:e.isKeyboardAccessible},"Show email recaps"),zi=e=>o.createElement(mi,{onChange:t=>{e.toggle(t.target.checked)},beta:!0,checked:e.enabled,extraClassName:ii.def_switcher,isKeyboardAccessible:e.isKeyboardAccessible},"Show Knowledge Share"),qi=e=>o.createElement(mi,{onChange:t=>{e.toggle(t.target.checked)},beta:!0,checked:e.enabled,extraClassName:ii.def_switcher,isKeyboardAccessible:e.isKeyboardAccessible},"Show Grammarly Guard"),Ki=e=>o.createElement(mi,{onChange:t=>{e.toggle(t.target.checked)},new:!0,checked:e.enabled,extraClassName:ii.def_switcher,isKeyboardAccessible:e.isKeyboardAccessible},"Show “Get citation” button on ",o.createElement("br",null),e.domain),Zi=({showReportBugButton:e,...t})=>o.createElement("div",{"data-grammarly-part":"debugMenu"},o.createElement("div",{className:Bi.separator}),o.createElement("div",{className:Bi.debugMenu},o.createElement("div",{className:Bi.heading},o.createElement("div",null,"Debug Menu"),t.showHideButton&&o.createElement(Pt.z,{dataGrammarlyPart:"debugMenuHideBtn",kind:"transparent",onClick:()=>{(0,oi.E)().bgRpc.api.toggleDebugMenu(!1)}},o.createElement("span",null,"Hide"))),o.createElement(mi,{onChange:e=>{e.target.checked?(0,oi.E)().bgRpc.api.enableHistoryLoggerUntil(-1):(0,oi.E)().bgRpc.api.disableHistoryLogger()},dataGrammarlyPart:"debugMenuLoggingToggle",checked:t.isEnabled,extraClassName:ii.def_switcher,isKeyboardAccessible:t.isKeyboardAccessible},"Logging"),o.createElement("div",{className:Bi.separator}),o.createElement(mi,{onChange:e=>{e.target.checked?(0,oi.E)().bgRpc.api.enableAdvancedHistoryLoggerUntil(Date.now()+36e5):(0,oi.E)().bgRpc.api.disableAdvancedHistoryLogger()},dataGrammarlyPart:"debugMenuAdvanceLoggingToggle",checked:t.isAdvancedEnabled,extraClassName:ii.def_switcher,disabled:!t.isEnabled,disabledText:"Enable logging first",isKeyboardAccessible:t.isKeyboardAccessible},"Advanced Logging"," ",t.isAdvancedEnabled&&t.advancedHistoryLoggerEnabledUntil&&o.createElement("span",{className:Bi.timer},Math.ceil((t.advancedHistoryLoggerEnabledUntil-Date.now())/6e4)," mins left")),o.createElement("div",{className:Bi.separator}),o.createElement("div",{className:Bi.heading},o.createElement(Pt.z,{className:Bi.downloadBtn,kind:"transparent",disabled:!t.isEnabled,onClick:t.downloadDebugReports,dataGrammarlyPart:"debugMenuDownloadLogBtn"},o.createElement("span",null,"Download Logs")),!0===e.enabled?o.createElement(Pt.z,{className:Bi.downloadBtn,kind:"transparent",dataGrammarlyPart:"debugMenuReportBugBtn",onClick:()=>{e.onClick()}},o.createElement("span",null,"Report a bug")):null))),Qi=e=>{var t,i,a,s,r,n,l,c,d,u,p,m,h,g,f,v,b,w,y,S,k,E;const{actions:C,activeTab:A,config:_,settings:I,dapi:x,user:T,siteCategory:M,openGBLanding:R,showGBUpHook:F,placement:L,dynamicConfig:P,enableRenderingHack:N=!1,isReaderSupported:B=!1,showCitationBuilderToggle:V=!0,citationBuilderSessionId:O,isCitationBuilderManualInvocationEnabled:U=!1,isKnowledgeHubSupported:D=!1,isPiiDetectionSupported:H=!1,isIndianEnglishDialectSupported:G=!1,isCheetahSupported:j=!1,showSerengetiFeatureToggle:W=!1,isReportBugFeatureAllowed:z,className:q,downloadDebugReports:K}=e;N&&o.useEffect((()=>{(0,pi.CB)()&&(self.screenLeft<0||self.screenTop<0||self.screenLeft>self.screen.width||self.screenTop>self.screen.height)&&chrome.runtime.getPlatformInfo((e=>{if("mac"===e.os){const e=new CSSStyleSheet;e.insertRule("\n            @keyframes redraw {\n              0% {\n                opacity: 1;\n              }\n              100% {\n                opacity: .99;\n              }\n            }\n          "),e.insertRule("\n            html {\n              animation: redraw 1s linear infinite;\n            }\n          "),document.adoptedStyleSheets=[...document.adoptedStyleSheets,e]}}))}),[]);const{premium:Z,experiments:Q,anonymous:Y}=T,$=fi.n5.isGrammarlyEmployee(T)&&z,X=F&&Z&&!fi.n5.doesUserBelongToInstitution(T),{dialectSettings:J}=I,ee=(null==J?void 0:J.dialect)||x.dialectStrong,te=["british","american","australian","canadian",...G?["indian"]:[]],ie=e.siteSwitcherChecked||{checked:!!I.enabled,update:t=>{const{siteCategory:i}=e;C.toggleSite(t,_.domain),yi.J.checkingToggleClick("toolbar",i,t?"on":"off"),(0,xe.Tb)().toggleExtension(t,"toolbar",(0,wi.FN)(_.domain))}},ae=o.useCallback((e=>{const t=A&&new URL(A.url).pathname;C.toggleCitationBuilderForDomain({domain:_.domain,enabled:e,pathName:t,inAllowList:A&&(0,si.eC)(new URL(A.url),P)}),e||yi.J.citePopupButtonDisable(_.domain,"permanent",O||"","toolbar",U&&!0===(0,si.gO)(_.domain,I))}),[null==A?void 0:A.url,_.domain,O]);return o.createElement("div",{className:(0,ti.cs)(Bi.settingsContent,q),"data-grammarly-part":"settings"},o.createElement("div",{className:Bi.heading},o.createElement("div",null,"Quick Settings"),o.createElement(Pt.z,{kind:"link",onClick:()=>{e.openUrl((0,pi.Um)().allSettings),yi.J.allSettingsButtonClick(L)}},o.createElement("div",{className:Bi.allSettings},o.createElement("span",null,"All Settings"),o.createElement(ni,null)))),ri.q.showSettingPopupToggle(x,I,P,null==A?void 0:A.url)&&o.createElement(o.Fragment,null,o.createElement(Oi,{toggle:e=>{C.setDesktopIntegration(e),yi.J.desktopIntegrationToggleClick(e?"on":"off")},enabled:I.isDesktopIntegrationEnabled,isKeyboardAccessible:e.isKeyboardAccessible}),o.createElement("div",{className:Bi.separator})),o.createElement(Ni,{domain:_.domain,enabledInConfig:null!==(t=_.enabled)&&void 0!==t&&t,siteSwitcherChecked:ie,favicon:null==A?void 0:A.favIconUrl,siteCategory:M,experiments:Q}),o.createElement("div",{className:Bi.separator}),j&&o.createElement(o.Fragment,null,o.createElement(Hi,{manageButtonClick:()=>e.openUrl((0,pi.Um)().featuresSettings)}),o.createElement(Gi,{label:o.createElement(o.Fragment,null,"Show GrammarlyGO on text ",o.createElement("br",null)," selection"),enabled:!1!==(null===(a=null===(i=I.cheetah)||void 0===i?void 0:i.status)||void 0===a?void 0:a.cheetahEnabled)&&!1!==(null===(n=null===(r=null===(s=I.cheetah)||void 0===s?void 0:s.status)||void 0===r?void 0:r.entryPointsConfig)||void 0===n?void 0:n.inlineRewriteEnabled),disabled:!1===(null===(c=null===(l=I.cheetah)||void 0===l?void 0:l.status)||void 0===c?void 0:c.cheetahEnabled),toggle:e=>C.cheetahToggleInlineRewrite(e),isKeyboardAccessible:e.isKeyboardAccessible}),o.createElement(Gi,{label:o.createElement(o.Fragment,null,"Show GrammarlyGO for quick ",o.createElement("br",null)," replies"),enabled:!1!==(null===(u=null===(d=I.cheetah)||void 0===d?void 0:d.status)||void 0===u?void 0:u.cheetahEnabled)&&!1!==(null===(h=null===(m=null===(p=I.cheetah)||void 0===p?void 0:p.status)||void 0===m?void 0:m.entryPointsConfig)||void 0===h?void 0:h.inlineQuickReplyEnabled),disabled:!1===(null===(f=null===(g=I.cheetah)||void 0===g?void 0:g.status)||void 0===f?void 0:f.cheetahEnabled),toggle:e=>C.cheetahToggleInlineQuickReply(e),isKeyboardAccessible:e.isKeyboardAccessible}),o.createElement("div",{className:Bi.separator})),W&&o.createElement(o.Fragment,null,o.createElement(ji,{enabled:"disabled"!==x.serengetiState,isKeyboardAccessible:e.isKeyboardAccessible,toggle:e=>{C.setSerengetiState(!0===e?"enabled":"disabled")}}),o.createElement("div",{className:Bi.separator})),V&&(0,si.r4)(_.domain,P,U)&&o.createElement(o.Fragment,null,o.createElement(Ki,{enabled:(0,si.Td)(_.domain,P,U,I),domain:_.domain,isKeyboardAccessible:e.isKeyboardAccessible,toggle:ae}),o.createElement("div",{className:Bi.separator})),D&&o.createElement(o.Fragment,null,o.createElement(zi,{enabled:null===(b=null===(v=I.knowledgeHubSettings)||void 0===v?void 0:v.enabled)||void 0===b||b,isKeyboardAccessible:e.isKeyboardAccessible,toggle:e=>{C.toggleKnowledgeHub(e),yi.J.knowledgeHubFeatureToggleClick("popup",ai.JJ.fromDomain(_.domain),e?ai.L5.on:ai.L5.off),(0,xe.Tb)().knowledgeHub.featureToggleClick(ai.JJ.fromDomain(_.domain),e?ai.L5.on:ai.L5.off)}}),o.createElement("div",{className:Bi.separator})),H&&o.createElement(o.Fragment,null,o.createElement(qi,{enabled:null===(y=null===(w=I.piiDetectionSettings)||void 0===w?void 0:w.enabled)||void 0===y||y,isKeyboardAccessible:e.isKeyboardAccessible,toggle:e=>{yi.J.grammarlyGuardFeatureToggleClick(e?"on":"off",_.domain),C.togglePiiDetection(e)}}),o.createElement("div",{className:Bi.separator})),o.createElement(Si,{disabled:Y,enabledDefs:I.enabledDefs,toggleDefs:C.toggleDefs}),o.createElement("div",{className:Bi.separator}),o.createElement(Vi,{enabled:I.autocorrectEnabled||!1,isKeyboardAccessible:e.isKeyboardAccessible,toggle:e=>{C.toggleAutocorrect(e),yi.J.autocorrectToggleClick(e?"on":"off")}}),o.createElement("div",{className:Bi.separator}),o.createElement(Ui,{enabled:I.autocompleteEnabled||!1,isKeyboardAccessible:e.isKeyboardAccessible,toggle:e=>{C.toggleAutocomplete(e),yi.J.autocompleteFeatureToggleClick("popup",e?"on":"off")}}),(!j||!1===(null===(k=null===(S=I.cheetah)||void 0===S?void 0:S.status)||void 0===k?void 0:k.cheetahEnabled))&&o.createElement(o.Fragment,null,o.createElement("div",{className:Bi.separator}),o.createElement(Di,{enabled:"hide"!==x.emogenieEmojiState,isKeyboardAccessible:e.isKeyboardAccessible,toggle:e=>{C.setEmogenieEmojiState(!0===e?"show":"hide"),yi.J.settingsShowEmojiForDetectedTonesToggleClick(_.domain,!0===e?"on":"off")}})),B&&o.createElement(o.Fragment,null,o.createElement("div",{className:Bi.separator}),o.createElement(Wi,{enabled:!1!==(null===(E=I.readerV1)||void 0===E?void 0:E.enabled),isKeyboardAccessible:e.isKeyboardAccessible,toggle:e=>{C.readerToggleFeature({enabled:e}),yi.J.readerV1FeatureToggleClick(e?"on":"off")}})),o.createElement("div",{className:Bi.separator}),o.createElement(Pi,{dialects:te,changeStrongDialect:C.changeStrongDialect,dialectStrong:ee,dialectWeak:x.dialectWeak,dropdownOnTop:!0,disabled:Y,lock:{isLocked:Boolean(null==J?void 0:J.dialectLockedByInstitution),message:"Locked by your organization"}}),X&&o.createElement(gi,{openGBLanding:R,showTitle:"popup"===L,showBackground:"popup"===L}),(I.isDebugMenuVisible||$)&&o.createElement(Zi,{isAdvancedEnabled:I.advancedHistoryLoggerEnabled,isEnabled:I.historyLoggerEnabled,advancedHistoryLoggerEnabledUntil:I.advancedHistoryLoggerEnabledUntil,isKeyboardAccessible:e.isKeyboardAccessible,showReportBugButton:$?{enabled:!0,onClick:()=>{var t,i;e.openReportBugForm({clientVersion:(t={domain:_.domain,userType:vi(T),version:(0,pi.bo)(),systemInfo:bi.Rd().systemInfo}).version,platformVersion:"",application:t.domain,browser:t.systemInfo.browser.type,os:(i=t.systemInfo.os,i.isWindows?"windows":i.isMac?"mac":i.isChromeOS?"chromeos":"other"),userType:t.userType,team:"browserextensions"})}}:{enabled:!1},showHideButton:!$,downloadDebugReports:K}))};var Yi=i(33394),$i=i(40303),Xi=i(2005),Ji=i(43124),ea=i(30955),ta=i(72889),ia=i(32502),aa=i.n(ia);const sa=({onClick:e,dataGrammarlyPart:t="unlock-premium-button",className:i})=>o.createElement(Pt.z,{kind:"premium",onClick:e,dataGrammarlyPart:t,...(0,Ye.Sh)(aa().premiumButton,i)},o.createElement(ta.O,{className:aa().diamondIcon}),o.createElement("span",null,"Unlock Premium")),ra=({user:e,isAssistant:t,openSubscriptionDialog:i})=>{const{registrationDate:a,anonymous:s,premium:r}=e,n=(0,Ji.p6)(a);o.useEffect((()=>{(0,Fe.n)(yi.J,{placement:t?"assistantSettings":"settingsToolbar",bannerType:"GoPremiumToEnableAdvancedFixes",upgradeHookName:"extensionSettings",upgradeHookSlot:t?"assistantSettingsPopup":"browserToolbar"}),(0,xe.Tb)().upgradeHooks.showUpgradeHook("extensionSettings",t?"assistantSettingsPopup":"browserToolbar")}),[]);const l=o.useCallback((()=>{i({utmSource:"upHook",utmCampaign:"extensionSettingsToolbar"}),(0,Fe.Q)(yi.J,{placement:t?"assistantSettings":"settingsToolbar",bannerType:"GoPremiumToEnableAdvancedFixes",upgradeHookName:"extensionSettings",upgradeHookSlot:t?"assistantSettingsPopup":"browserToolbar"}),(0,xe.Tb)().upgradeHooks.clickUpgradeHook("extensionSettings",t?"assistantSettingsPopup":"browserToolbar"),(0,xe.Tb)().userUpgradeClick("settingsToolbar")}),[]);if(s||r)return null;const c=n?o.createElement("div",{"data-test-attr":"checked_since"},"Grammarly has been correcting your text since ",n,"."):null;return o.createElement("div",{className:t?ea.borderTop:void 0},o.createElement("div",{...(0,Ye.Sh)(ea.content,t?void 0:ea.borderBottom)},c,o.createElement(sa,{onClick:l,className:ea.premiumButton,dataGrammarlyPart:"settings-upgrade-button"})))};var na=i(50445);const oa=({assistantSettingsViewModel:e,upgradeViewModel:t,experimentClient:i,assistantFeedbackViewModel:a,onClose:s,children:r})=>{const{domain:n,actions:l,state:c}=e,d=o.useCallback((()=>t.openUpgradeUrl(Ie.L.Place.extensionSettingsAssistant)),[t]),[u,p]=o.useState(!!c.view("page","enabled").get()),m={checked:u,update:p},h=o.createElement(At.F.div,{role:"region","aria-label":"Grammarly settings"},c.view((({user:e,page:t,dynamicConfig:a,dapi:s})=>o.createElement(Qi,{actions:l,config:{enabled:!0,domain:n},settings:t,user:e,dapi:s,dynamicConfig:a,siteCategory:$i.y.other,openGBLanding:e=>{const t=(0,Yi.Z4)(e,"gbExtensionSettingsAssistant");self.open(t),tt.J.getGBButtonClick("gbExtAssistantSettings","ExploreGrammarlyBusiness")},isReportBugFeatureAllowed:!i.isGateEnabled(E.K.HideReportBugByGrammarlyEmployeeFeature),openReportBugForm:e=>{self.open((e=>{const t=new URL((0,pi.Um)().grammarlyEmployeesBugReportsUrl);return Object.entries(e).forEach((([e,i])=>{i&&t.searchParams.set(e,i)})),t.toString()})(e))},openUrl:e=>self.open(e),showGBUpHook:(0,pi.i7)(),placement:"assistant",showCitationBuilderToggle:!1,siteSwitcherChecked:m,isIndianEnglishDialectSupported:i.isGateEnabled(E.K.IndianEnglishDialect)||i.isGateEnabled(E.K.IndianEnglishDialectInternal),downloadDebugReports:()=>na.B.download(),isKeyboardAccessible:i.isGateEnabled(E.K.ExtensionA11yKeyboardNavigation)}))),a?o.createElement(ei,{feedbackVM:a,entryPoint:Zt.Q.settings}):null),g=o.createElement(Pt.z,{kind:"primary",type:"submit",onClick:()=>{l.toggleSite(u,n),tt.J.checkingToggleClick("assistant",$i.y.other,u?"on":"off"),(0,xe.Tb)().toggleExtension(u,"assistant",(0,wi.FN)(n)),null==s||s()},className:Xi.settingsViewDoneButton,dataGrammarlyPart:"single-card-assistant-settings-done-button"},"Done");return r({content:h,footer:o.createElement(At.F.Fragment,null,c.view((({user:e})=>o.createElement(ra,{user:e,openSubscriptionDialog:d,isAssistant:!0}))),g)})},la=({viewModels:e,experimentClient:t})=>o.createElement(oa,{onClose:()=>e.assistantLayoutViewModel.popActiveView(),assistantSettingsViewModel:e.assistantSettingsViewModel,upgradeViewModel:e.upgradeViewModel,assistantFeedbackViewModel:e.assistantFeedbackViewModel,experimentClient:t},(({content:t,footer:i})=>o.createElement(Mt,{dataPartName:"settings-view-overlay",popActiveView:()=>e.assistantLayoutViewModel.popActiveView(),panelClassName:Xi.settingsViewOverlayPanel,contentClassName:Xi.settingsViewOverlayContent,footer:i},t)));var ca=i(89872),da=i(67506),ua=i(40578);const pa=({message:e,children:t,placement:i,size:a,hideAfter:s,onClose:r,dataGrammarlyPart:n="ui-kit-popover-notification"})=>{const[l,c]=o.useState(!1);return o.useEffect((()=>{let e;return s>0&&(c(!0),e=self.setTimeout((()=>{c(!1),null==r||r()}),s)),()=>{e&&self.clearTimeout(e)}}),[s]),o.createElement(da.J,{dataGrammarlyPart:n,isOutsideReferenceElement:!1,headerContent:o.createElement("div",{className:ua.popoverNotificationMessage},e),mainContent:null,show:l,placement:i,size:a,onClose:()=>{c(!1),null==r||r()},showArrow:!1,includeMainContentPadding:!1},t)};var ma=i(37902),ha=i(31742),ga=i(37522),fa=i(84966),va=i(31278),ba=i(3618);const wa=({emotion:e,isBrandTonesEnabled:t,index:i,onFeedback:a})=>{const[s,r]=o.useState(0),n=o.createElement(Yt.u,{message:`${e.prevalence} intensity`,showDelay:300},o.createElement("div",{className:ba.emogenieReportItemEmotionIntensity},[0,1,2,3,4].map((t=>{const i=t/5<=e.confidence;return o.createElement("div",{key:`${e.name}-intensity-${t}`,...(0,Ye.Sh)(ba.emogenieReportItemEmotionIntensityDot,i&&ba.emogenieReportItemEmotionIntensityDotActive)})})))),l=o.createElement(Yt.u,{message:e.brandToneDescription,showDelay:300},o.createElement("div",null,o.createElement(va.JO.Info,{width:10,className:"off"===e.brandToneLabel?ba.emogenieBrandToneInfoIconOff:ba.emogenieBrandToneInfoIconOn}))),c=o.createElement(ca.C,{title:o.createElement(o.Fragment,null,e.brandToneLabel,"-BRAND ",l),kind:"off"===e.brandToneLabel?"error":"primary"}),d=e.brandToneLabel?c:n;return o.createElement(At.F.div,{...(0,Ye.Sh)(ba.emogenieReportItem,t?ba.emogenieReportItemBrandTone:null),"data-grammarly-part":"tone-detector-emotion","data-tone-detector-emotion-name":e.name},o.createElement("div",{role:`emotion-${i}-${e.name}`},o.createElement("div",{className:ba.emogenieReportItemEmotion},o.createElement("div",{className:ba.emogenieReportItemEmotionEmojiAndNameContainer},o.createElement(pa,{dataGrammarlyPart:"tone-detector-emotion-feedback-notification",message:"Thank you for the feedback!",hideAfter:s,placement:"right",onClose:()=>r(0),size:"medium"},o.createElement("div",{className:ba.emogenieReportItemEmotionEmojiAndName},o.createElement(ma.dy,{size:"small-medium",unicodeHexArray:[e.emojiId],unicodeLiteral:e.emoji,className:ba.emogenieReportItemEmotionEmoji}),o.createElement("span",{className:ba.emogenieReportItemEmotionName},e.name)))),o.createElement("div",{className:ba.emogenieReportItemEmotionBadgeOrIntensity},d),o.createElement(ha.m,{dataGrammarlyPart:"tone-detector-emotion-actions-menu",ariaMenuId:`${e.name}-emotion-actions-menu`,ariaMenuLabel:`${e.name} Emotion Actions Menu`,sections:[{title:"Help us improve",items:[{id:"tone-detector-emotion-actions-menu-item-like",icon:o.createElement("div",{className:ba.emogenieReportItemEmootionActionsMenuThumsUpIcon}),label:"Tone seems correct",onClick:()=>{a({emotionName:e.name,feedbackType:fa.y_.EMOTION_LIKE}),r(1200)}},{id:"tone-detector-emotion-actions-menu-item-dislike",icon:o.createElement("div",{className:ba.emogenieReportItemEmootionActionsMenuThumsDownIcon}),label:"Tone seems incorrect",onClick:()=>{a({emotionName:e.name,feedbackType:fa.y_.EMOTION_DISLIKE}),r(1200)}}]}],size:"medium",placement:"left"},o.createElement(ga.h,{dataGrammarlyPart:"tone-detector-emotion-actions-menu-button",className:ba.emogenieReportItemEmotionActionsMenuButton},o.createElement("div",{className:ba.emogenieReportItemEmotionActionsMenuIcon}))))))};var ya=i(24812);const Sa=({emotions:e,isBrandTonesEnabled:t,toneSuggestionInfo:i,onMount:a,onReportEmotionFeedback:s,...r})=>{let n;switch(o.useEffect(a,[]),!0){case e.some((e=>e.brandToneLabel&&"off"===e.brandToneLabel&&e.confidence>.75)):n="Your tone may sound off to readers";break;case e.some((e=>e.brandToneLabel&&"off"===e.brandToneLabel)):n="Something sounds slightly off...";break;case e.some((e=>e.brandToneLabel&&"on"===e.brandToneLabel)):n=t?"You're on-brand! Great job!":"Your writing sounds clear and aligned. Great job!";break;default:n="How this may sound to readers:"}return o.createElement("div",{className:ya.emogenieReport,"data-grammarly-part":"tone-detector"},o.createElement("div",{className:ya.emogenieReportHeader},o.createElement("div",{className:ya.emogenieReportHeaderTitle},n),r.showBetaLabel?o.createElement(Rt.v,{browser:r.browser}):null),o.createElement("div",{className:ya.emogenieReportItems,"data-grammarly-part":"tone-detector-emotions"},e.map(((e,i)=>o.createElement(wa,{key:e.name,index:i,emotion:e,isBrandTonesEnabled:t,onFeedback:s})))),i?o.createElement(ka,{...i}):null)},ka=({onMount:e,emojiId:t,emojiLiteral:i,iconId:a,title:s,onClickCta:r,ctaText:n,isUphook:l})=>(o.useEffect(e,[]),o.createElement("div",{className:ya.emogenieReportToneSuggestionInfo},o.createElement("div",{className:ya.emogenieReportToneSuggestionInfoEmojiAndTitle},t?o.createElement(ma.dy,{size:"small-medium",unicodeHexArray:[t],unicodeLiteral:null,className:ya.emogenieReportToneSuggestionInfoEmoji}):i?o.createElement(ma.dy,{size:"small-medium",unicodeHexArray:null,unicodeLiteral:i,className:ya.emogenieReportToneSuggestionInfoEmoji}):a?o.createElement("img",{alt:a,src:`https://assets.grammarly.com/icons/v1/${a}.svg`,style:{width:20,height:20},className:ya.emogenieReportToneSuggestionInfoEmoji}):null,o.createElement("div",null,s)),l?o.createElement(sa,{onClick:r,dataGrammarlyPart:"tone-detector-tone-suggestion-info-cta"}):o.createElement(Pt.z,{kind:"primary",onClick:r,dataGrammarlyPart:"tone-detector-tone-suggestion-info-cta"},n))),Ea=({emogenieService:e,toneSuggestionInfo:t,onShowToneSuggestionInfo:i,onClickToneSuggestionInfoCta:a,showBetaLabel:s,browser:r})=>o.createElement(At.F.Fragment,null,T.h.combine(e.viewState,null!=t?t:T.h.create(void 0),(({report:t,isBrandTonesEnabled:n},l)=>{let c;if(l&&(c={title:l.title,onMount(){null==i||i(l)},onClickCta(){null==a||a(l)},ctaText:"See suggestions",isUphook:!1},Be.isToneImprovementSuggestionUphookInfo(l)&&(c={...c,isUphook:!0,emojiId:l.emojiId,emojiLiteral:l.emojiLiteral}),c=Be.isInclusiveLanguageToneSuggestionInfo(l)?{...c,iconId:l.iconId}:{...c,emojiId:l.emojiId}),t&&Array.isArray(t.emotions)){const i={emotions:t.emotions,isBrandTonesEnabled:n,onMount:()=>e.actions.trackReportShow(n),onReportEmotionFeedback:t=>e.actions.reportEmotionFeedback(t),toneSuggestionInfo:c};return s?o.createElement(Sa,{...i,showBetaLabel:!0,browser:r}):o.createElement(Sa,{...i,showBetaLabel:!1})}return null})));var Ca=i(77678),Aa=i(94632),_a=i(89894),Ia=i(46324),xa=i(66349),Ta=i(38575);const Ma=({children:e})=>o.createElement("div",{className:Ta.gbUpsellFooter},e),Ra=()=>o.createElement("svg",{width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.271 3.5c-1.254 0-2.287 1.04-2.287 2.342v1.421c0 1.303 1.033 2.342 2.287 2.342s2.287-1.04 2.287-2.342v-1.42c0-1.304-1.033-2.343-2.287-2.343zM4.984 5.842C4.984 4.006 6.446 2.5 8.27 2.5s3.287 1.506 3.287 3.342v1.421a3.358 3.358 0 01-1.393 2.732c.001.217.005.328.018.428a2.2 2.2 0 001.024 1.589c.114.07.25.133.605.294l1.194.541a.5.5 0 01-.412.911l-1.228-.556c-.31-.141-.51-.231-.685-.34a3.2 3.2 0 01-1.499-2.387 3.243 3.243 0 01-1.817.002 3.2 3.2 0 01-1.302 2.336c-.206.15-.445.272-.818.462l-1.119.57c-.426.218-.589.303-.722.4a2.2 2.2 0 00-.876 1.43 2.362 2.362 0 00-.025.325h3.33a.5.5 0 010 1H2a.5.5 0 01-.5-.5v-.045c0-.418 0-.686.04-.938a3.2 3.2 0 011.274-2.08c.206-.15.445-.272.818-.462l1.12-.57c.425-.218.588-.303.722-.4a2.2 2.2 0 00.876-1.43c.02-.132.026-.277.027-.58a3.358 3.358 0 01-1.393-2.732v-1.42z",fill:"#05735A"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.529 8c1.254 0 2.287 1.04 2.287 2.342v1.421c0 1.303-1.033 2.342-2.287 2.342s-2.287-1.04-2.287-2.342v-1.42C13.242 9.038 14.275 8 15.529 8zm3.287 2.342C18.816 8.506 17.354 7 15.53 7s-3.287 1.506-3.287 3.342v1.421c0 1.837 1.462 3.342 3.287 3.342.315 0 .618-.045.906-.128a3.2 3.2 0 001.302 2.336c.206.15.445.272.818.462l1.119.57c.426.218.589.303.723.4a2.2 2.2 0 01.875 1.43 2.3 2.3 0 01.025.325h-3.33a.5.5 0 100 1H21.8a.5.5 0 00.5-.5v-.045c0-.418 0-.686-.04-.938a3.2 3.2 0 00-1.274-2.08c-.206-.15-.445-.272-.818-.462l-.04-.02-1.08-.55c-.425-.218-.588-.303-.722-.4a2.2 2.2 0 01-.876-1.43 3.835 3.835 0 01-.027-.58 3.358 3.358 0 001.393-2.732v-1.42z",fill:"#05735A"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.471 8c-1.254 0-2.287 1.04-2.287 2.342v1.421c0 1.303 1.033 2.342 2.287 2.342s2.287-1.04 2.287-2.342v-1.42C17.758 9.038 16.725 8 15.471 8zm-3.287 2.342C12.184 8.506 13.646 7 15.47 7s3.287 1.506 3.287 3.342v1.421c0 1.837-1.462 3.342-3.287 3.342-.315 0-.618-.045-.906-.128a3.2 3.2 0 01-1.302 2.336c-.206.15-.445.272-.818.462l-1.119.57c-.426.218-.589.303-.722.4a2.2 2.2 0 00-.876 1.43 2.365 2.365 0 00-.025.325h8.73a.5.5 0 010 1H9.2a.5.5 0 01-.5-.5v-.045c0-.418 0-.686.04-.938a3.2 3.2 0 011.274-2.08c.206-.15.445-.272.818-.462l.04-.02 1.08-.55c.425-.218.588-.303.722-.4a2.2 2.2 0 00.876-1.43c.02-.132.026-.277.027-.58a3.358 3.358 0 01-1.393-2.732v-1.42z",fill:"#05735A"})),Fa=e=>(o.useEffect((()=>{e.trackShow()}),[]),o.createElement(Ma,null,o.createElement("div",{className:Ta.icon},o.createElement(Ra,null)),o.createElement("div",null,"Want your team to save time and write more consistently? Explore style guides in"," ",o.createElement("span",{className:Ta.clickableLink,onClick:e.onClick},"Grammarly Business.")))),La=e=>(o.useEffect((()=>{e.trackShow()}),[]),o.createElement(Ma,null,o.createElement("div",null,"Want your team to use a consistent brand voice wherever they write? Explore brand tones in"," ",o.createElement("span",{className:Ta.clickableLink,onClick:e.onClick},"Grammarly Business."))));var Pa;!function(e){e.Feedback="feedback",e.Settings="settings",e.ToneInsight="toneInsight",e.LearnMore="learnMore"}(Pa||(Pa={}));const Na=o.createContext({isEnabled:!1,currentView:null,setCurrentView:()=>{}}),Ba=({children:e,view:t})=>{const{setCurrentView:i,isEnabled:a}=o.useContext(Na);return o.useEffect((()=>{if(a)return i(t),()=>i(null)}),[a,t]),o.createElement(o.Fragment,null,e)};var Va=i(10450),Oa=i(37735),Ua=i(64015);const Da=e=>{const t=t=>"known"===t.source.kind?o.createElement(e.designSystem.icon[t.source.name],{key:t.source.name,backgroundColor:t.backgroundColor}):o.createElement(e.designSystem.image,{key:t.source.name,backgroundColor:t.backgroundColor,...t.source});return o.createElement(Oa.v.Dropdown,{label:t(e.icon),placement:"top right",theme:{button:ja.button,item:ja.item},"aria-label":e.menu.meta.label,onAction:t=>(0,g.zG)(e.menu.sections,Ua.tS((e=>e.items)),Ua.Ew((e=>e.id===String(t))),Re.tap((t=>e.onClick(t.onClickActions,t.id)())))},e.menu.sections.map(((e,i)=>o.createElement(Oa.v.Section,{key:i,title:e.title},e.items.map((e=>o.createElement(Oa.v.Item,{key:e.id,textValue:e.id},e.icon&&t(e.icon),e.text)))))))},Ha={flexShrink:0,alignItems:"center",justifyContent:"center",height:_a.ux.rem(2),width:_a.ux.rem(2)},Ga={$nest:{"& i":{height:_a.ux.rem(2),width:_a.ux.rem(2)}}},ja=_a.ux.stylesheet({button:[Ha],item:[Ga]}),Wa={...(0,Aa.T)({default:{},hovered:{backgroundColor:Ca.CoreNeutral10},clicked:{},disabled:{},toggled:{},hidden:{}})},za=_a.ux.stylesheet({main:[Ia.o_],primary:[Ia.U8],secondary:[Wa,Ia.P5],toggle:Ia.hc,round:[Ia.$O],yellow:Ia.g2,outlined:[Wa,Ia.Yf],link:[Ia.wy],darkPrimary:[Ia.hx],darkSecondary:[Ia.kG],ggoPrimary:[Ia.KF]});const qa=({children:e})=>o.createElement("div",{className:Va.singleCardAssistantNativeContentWithPadding},e),Ka=({children:e,maxHeight:t})=>o.createElement("div",{style:{maxHeight:t,overflowY:"auto"}},e),Za=_a.ux.style(Ia.o_,(0,Aa.T)({default:{backgroundColor:Ca.CoreYellow20,color:Ca.CoreYellow80,lineHeight:_a.ux.rem(2),transitionDuration:".2s",$nest:{"& span":{color:Ca.CoreYellow80}}},hovered:{backgroundColor:Ca.CoreYellow30,$nest:{"& i":{fill:Ca.CoreYellow80,stroke:Ca.CoreYellow80},"& span":{color:Ca.CoreYellow80}}},disabled:{},clicked:{},toggled:{},hidden:{}}),{$nest:{"& i":{fill:Ca.CoreYellow80,stroke:Ca.CoreYellow80},"& span":{color:Ca.CoreYellow80}}}),Qa=()=>{const e=(0,Ia.ND)(),t=e.primary;return{...e,primary:e=>"goPremium"===e.name?o.createElement(Ze.zx.Primary,{name:e.name,onClick:e.onClick,className:Za},e.text):o.createElement(t,{...e})}};var Ya=i(55563),$a=i(864),Xa=i(13299),Ja=i(52098),es=i(14592),ts=i(52622),is=i(13313),as=i(21619),ss=i(54216),rs=i(54466),ns=i(92485),os=i(20594),ls=i(35607),cs=i(4890),ds=i(73841),us=i(89770),ps=i(39920),ms=i(93265),hs=i(66866),gs=i(55935),fs=i(76974),vs=i(95574),bs=i(81531),ws=i(84174),ys=i(8821),Ss=i(64998);class ks{constructor(e,t,i,a){this._gnar=e,this.experimentClient=t,this.user=i,this.toneDetectorViewModel=a,this.shouldShowGBUpgradeFooter=e=>this.user.isPremium&&!this.user.institutionInfo&&"test"===this.experimentClient.getTreatment(e),this.onClick=(e,t)=>{this._gnar.getGBButtonClick(e,void 0,this.hasToneSuggestions(e)),self.open((0,Yi.Z4)(t,e))},this.trackShow=e=>{this._gnar.getGBButtonShow(e,this.hasToneSuggestions(e))}}hasToneSuggestions(e){return"gbToneDetector"===e?void 0!==this.toneDetectorViewModel.toneSuggestionInfo.get():void 0}}var Es=i(99040),Cs=i(26804);const As=(e,t,i,a,s,r,l,u,p,F,P,N,U,D,H,j,W,z,q,K,Q,$,X,ee,te,ie,se,re)=>{const le=bs.C8.Logging.getLogger("SingleCardAssistant.ViewModels"),ue=T.h.create(is.A.defaultState),me=ss.t.create(ss.t.defaultLensFilters,{...ss.t.defaultTextFilters,[Oe.R.SpecialId.Closed]:g.jv,[Oe.R.SpecialId.AllAlerts]:L.bZ.belongsToAllAlerts}),be=is.A.get(e.alertsList.state,e.alertsList.lensesScores,me).subscribe(x.wW(ue)),we=new Ja.t(ue.view("lenses"),me,e.sessionModel.scoreStatus),Se=(0,ns.$y)((0,ts.a)(t).getContents),Ee={features:new Set([os.IG.Features.showCardLabelInOutcomes]),cardLayoutDensityMode:cs.j.Density.minimal,shouldAnimateAlertApply:os.IG.Default.shouldAnimateAlertApply,cardVisualMode:T.h.create(cs.j.CardVisualMode.RegularLightMode)},_e=(0,os.Ls)(Se,e.alertsReader,Ee,(()=>fs.of(O.none)),e.mutingAlertsReader),Te=T.h.create(16),Me=R.getCapabilities(_e,e.alertsReader),Fe=new ps.gi(R.equatable.structEq,R.defaultOrd(Me)),Le=()=>()=>g.yR,Pe=ms.v.createWithInitialAlerts(Fe,Le,me,(0,g.ff)(L.bZ.isMuted),Me),Ne=new us.oq(e.alertsList.state,e.alertsReader,ue.view("lenses"),e.positionManager,we,Pe,Le,Me,me),Be=T.h.create(Ne.emptyState(Oe.R.SpecialId.AllAlerts).patch({alertSource:L.l$.sidebar}));i.next({kind:Ya.R.ChangeLens,selectedLens:"all"});const He=new $a.C(W()),Ge=new rs.Xx({flush:()=>t.flushChanges()},new oe.xQ,_e,e.alertsService,e.alertsReader,(()=>Promise.resolve()),(()=>Promise.resolve()),(0,g.zG)(e.mutedAlertsCategoriesModel,O.map((e=>({model:e,openSuggestionsManagement:()=>self.open((0,pi.Um)().suggestionsSettings)})))),O.some(b.B.getCardsViewModelSendToURLExperiment(He,l)),g.jv,R.getActiveItemWithAlert,Me,Be,He,{bufferTransitions:!0,showGbPrompt:b.B.shouldShow(p.get())}),We=new ws.q(Q.sduiFeedbackService,Me,Be,Q.sduiManager,Q.sduiFeedManager,e.alertsReader,Es.f,Ge,He),Ze=We.sduiActionEvents.subscribe((({actions:e})=>e.forEach((e=>{"closeCard"===e.type&&F()})))),Qe=new J(u,l),Ye=new v.y(Ge.actionEvents,l,e.alertsReader),$e=new ls.o((()=>ve.right(void 0))),Xe=T.h.create(!1),Je=new Ie.x(e.alertsList,Be,3,l),et=T.h.create(!1),{nativeUpgradeHook:tt,upgradeHookExperiment:it,experimentGroup:st}=(0,qe.o)(z),rt=it.name;re.upgradeHooksExp.upgradeHookExperimentPeek(rt,st,u);const nt=new Ke(Q.sduiManager.state),ot=((e,t,i,a,s,r)=>{const n=t.pipe(A.U(k.D1.NativeUpgradeHook.findUpgradeHookSduiItem),A.U(O.isSome));return e.pipe(Z.M(n,i),A.U((([{actions:e},t,i])=>{e.forEach((e=>{"pushAssistantFeed"===e.type&&"default-feed"===e.feedId&&(t||i)&&a.upgradeHooksExp.upgradeHookFeedRendered(s,r,(0,je.ge)())}))})))})(We.sduiActionEvents,Q.sduiManager.state,nt.upgradeHookCardExists,re,rt,st).subscribe(),lt=tt?((e,t,i,a,s)=>Ue.B.getPremiumAlerts(e,t).pipe(_.x(((e,t)=>{const i=new Set(e.map((e=>e.id)));return e.length===t.length&&t.every((e=>i.has(e.id)))})),Z.M(a.pipe(A.U(k.D1.NativeUpgradeHook.findUpgradeHookSduiItem),A.U(O.isSome)),s,Ce(i.capiEvents)),ce.b((([e,t,a,s])=>{if(0===e.length&&t)i.pushCapiSduiEvent({kind:"sdui_remove",rev:0,sduiRootId:k.D1.NativeUpgradeHook.ID});else if(e.length>0&&!a){let a;a=t?"sdui_update":"sdui_add",i.pushCapiSduiEvent({kind:a,rev:0,sduiRootId:k.D1.NativeUpgradeHook.ID,sdui:ze(e,s)})}}))).subscribe())(e.alertsList.state,Be,Q.sduiBufferService,Q.sduiManager.state,et):C.w.EMPTY,ct=tt?((e,t,i,a,s,r,n)=>e.pipe(A.U((({actions:e,cardId:o})=>e.forEach((e=>{"upgradeToPremium"===e.type?(i.trackUpgradeButtonClick({placement:"advancedIssues",bannerType:"SeeWhatsInPremium",upgradeHookName:"advancedIssues",upgradeHookSlot:"singleCardAssistant"}),i.openUpgradeUrl(Ie.L.Place.assistantCardList)):"notify"===e.type&&e.userAction===ye.nz.Focus?o===k.D1.NativeUpgradeHook.ID?(t.set(!0),i.trackUpgradeButtonShow({placement:"advancedIssues",bannerType:"SeeWhatsInPremium",upgradeHookName:"advancedIssues",upgradeHookSlot:"singleCardAssistant"}),(0,xe.Tb)().upgradeHooksExp.upgradeHookCardShown(r,n,(0,je.ge)())):t.set(!1):"removeRoot"===e.type&&o===k.D1.NativeUpgradeHook.ID&&(t.set(!1),s.set(!0),a.pushCapiSduiEvent({kind:"sdui_remove",rev:0,sduiRootId:k.D1.NativeUpgradeHook.ID}))}))))).subscribe())(We.sduiActionEvents,Xe,Je,Q.sduiBufferService,et,rt,st):nt.processUpgradeHookSduiCardActions(We.sduiActionEvents,Je,re,rt,st),dt=tt?Xe:nt.upgradeHookCardFocused,ut=dt.subscribe((e=>{e&&Cs.p.dismissInlineYellowUnderlines.set(!0)})),pt=Q.sduiFeedManager.feed.pipe(A.U((e=>e.feedId===k.D1.AssistantFeed.PERFORMANCE_SCORE_FEED))),mt=T.h.create(!1),ht=I.aj([dt,pt]).pipe(A.U((([e,t])=>e||t))).subscribe(x.wW(mt)),gt=((e,t,i)=>i.pipe(ke.h(Boolean),De.P()).subscribe((()=>{t!==pe.p.UpgradeCardGBRebrand&&e.getTreatment(t)})))(z,it,mt),ft=I.aj([(0,es.gM)(Q.sduiManager.state,Q.sduiFeedManager.feed),mt]).pipe(A.U((([e,t])=>i=>e(i)&&!L.bZ.isHidden(i)||t&&L.bZ.isPremium(i)&&L.bZ.isHidden(i)))),vt=new es.o$(e.alertsList,e.alertsReader,e.positionManager,e.alertsService,t,Be,ft,R.getActiveItemWithAlert,a,!0,mt),bt=(0,Xa.hp)(Be,vt,Te,$e,t,le),wt=new as.mN(t,Be,vt,e.alertsReader,R.getActiveItemWithAlert,(t=>{const i=t.reduce(((t,i)=>(0,g.zG)(e.alertsReader.getById(i.alert.id),O.chain(L.bZ.getRawId),Re.tap((e=>t.set(e,i))),O.fold((()=>t),(()=>t)))),new Map),a=Array.from(i.keys()).map((e=>N.alerts.getAlertById(e))).filter(li.fQ);if(a.length){const e=a.reduce(((e,t)=>c.S.ordering.greaterThanOrEqual(t,e)?t:e));return O.fromNullable(i.get(fa.wQ.Id.create(e.id)))}return O.none})),St=new Ve(e.alertsReader,e.alertsList.state,(()=>O.fromNullable(null==U?void 0:U.sessionUuid)),l,z,K,Je,p,Ge.actionEvents,Q.sduiManager.state),kt=new ne(Be,e.alertsReader,N,We.sduiActionEvents,R.getActiveItemWithAlert),Et=new Y(We.sduiActionEvents,se),Ct=new Ae(Q.sduiManager,Q.sduiFeedManager,Q.sduiBufferService,H,Be,nt.upgradeHookCardExists);Ct.initSuccessReportSDUIEmulation();const At=new M(Q.sduiManager.state,Ge,Ct.isSuccess,z),It=wt.alertClicked.pipe(gs.T(1),ge.w(O.fold((()=>fe.E),fs.of)),ke.h((e=>e.alert.lensId!==Oe.R.SpecialId.Premium)),Z.M(Q.sduiManager.state),A.U((([t,i])=>(0,g.zG)(e.alertsReader.getById(t.alert.id),O.chain(L.bZ.getRawId),O.chain((e=>k.D1.getByAlertId(i,e))),Re.unsafeGet))),Z.M(Q.sduiFeedManager.feed)).subscribe((([e,t])=>{let i;i=t.feedId===k.D1.AssistantFeed.TONE_INSIGHTS_CARD_FEED_ID||t.feedId===k.D1.AssistantFeed.PERFORMANCE_SCORE_FEED?[k.D1.AssistantFeed.createPopAssistantFeedAction(),k.D1.AssistantFeed.createFocusAssistantCardAction(e.id)]:[k.D1.AssistantFeed.createFocusAssistantCardAction(e.id)],Ge.actionEvents.next(k.fr.create(i))})),xt=((e,t,i,a)=>e.pipe(gs.T(1),ge.w(O.fold((()=>fe.E),fs.of)),ke.h((e=>e.alert.lensId===Oe.R.SpecialId.Premium)),Z.M(t,i)).subscribe((([e,t,i])=>{if(i.feedId===k.D1.AssistantFeed.PERFORMANCE_SCORE_FEED){const e=(0,g.zG)(t,O.fold((()=>k.D1.NativeUpgradeHook.ID),(e=>e.id))),i=[k.D1.AssistantFeed.createPopAssistantFeedAction(),k.D1.AssistantFeed.createFocusAssistantCardAction(e)];a.next(k.fr.create(i))}})))(wt.alertClicked,nt.upgradeHookCard,Q.sduiFeedManager.feed,Ge.actionEvents),Tt=[(0,g.zG)(hs.EQ.focusMarkByActiveAlert(Be,vt,e.alertsReader,R.getActiveFocusableItem,le.getLogger("MarksEffects.focusMarkByActiveAlert")),B.nL.Effect.Producer.delayed(a)),...Ge.getApplicatorEffects(),...We.getApplicatorEffects(),(0,g.zG)((0,Xa.k9)(Be,bt,T.h.create(O.none),R.getActiveAlignableItem,Me),B.nL.Effect.Producer.delayed(a)),ys.N.PrevNextNavigation.sideEffect(ys.N.PrevNextNavigation.Events.fromSduiCardActions(We.sduiActionEvents),Be,Me),G.P.SideEffects.createSDUIFeedSideEffect(Me,Q.sduiFeedManager.feed,R.sduiToChecksFeedOrd(Me),e.alertsReader)],Mt=tt?({state:e,metadata:t})=>{if(!B.nL.hasCards(e))return ve.left({state:e,metadata:t});const i=B.nL.Prism.getLens();return ve.left({state:i.modify((e=>O.isSome(e.cardIndex)||e.items.size>1||(0,n.pipe)(e.items.getAt(0),O.map((e=>e.id!==k.D1.NativeUpgradeHook.ID)),O.getOrElse(g.jv))?e:{...e,cardIndex:O.some(0)}),e),metadata:t})}:ve.left,Rt=V.v.Items.getRemoveDisposedItemsTransformer(Me),Ft=Ss.i.DisablePrevNextButtons.create(Me),Lt=V.v.Items.getSingleItemFeedPositionsUpdateTransformer(Me),Pt=(0,g.ls)(Mt,vs.chainLeft(Ct.focusSuccessReportStateTransformer),vs.chainLeft(Rt),vs.chainLeft(Ft),vs.chainLeft(Lt)),Nt=new ds.l(Be,Ne,e.alertsReader,e.alertsService,Tt,R.getActiveItemWithAlert,Pt),Bt=new S.X(s,r,ie,u),Vt=Ge.actionEvents.subscribe((0,g.ls)((0,f.JH)(e.alertsReader,f.SV.Source.assistant),Re.tap((e=>(e.kind===f.SV.Kind.alertApply&&e.source===f.SV.Source.assistant&&q.incrementCounter(),D.next(e)))))),Ot=(0,w.W)(P),Ut=j.pipe(ge.w(O.fold((()=>fe.E),(t=>t.initSingleCardAssistantActionsProcessing(e.alertsReader,(0,m.X5)(wt,Be)))))).subscribe(),Dt=new de(Ge,Q),Ht=new h.D(l,ee,te,$),Gt=(0,g.zG)(X,O.map((e=>new y.S(Ht,e,F,l)))),zt=new he(Ge.actionEvents,N,s.view("page"),r,z,l),qt=new ks(l,z,p.get(),St),Zt=new ae(p.get().isAnonymous,s.get(),l,ie),Qt=function(e,t,i,a,s,r,n,l,c,u,p){const m=()=>n.next();return{...xa.k,button:Qa(),dropDownMenuButton:r.isGateEnabled(E.K.ExtensionA11ySingleCardAssistantDragging)?Da:xa.k.dropDownMenuButton,nativeToneInsightsModal:()=>o.createElement(Ba,{view:Pa.ToneInsight},o.createElement(qa,null,o.createElement(Ea,{emogenieService:e.emogenieService,toneSuggestionInfo:e.toneSuggestionInfo,onShowToneSuggestionInfo:t=>e.onShowToneSuggestionInfo(t),onClickToneSuggestionInfoCta:t=>e.onClickToneSuggestionInfoCta(t),showBetaLabel:!0,browser:l}))),nativeLearnMoreModal:()=>o.createElement(Ba,{view:Pa.LearnMore},o.createElement(Ka,{maxHeight:216},o.createElement(qa,null,o.createElement(_t,{learnMoreInfo:t.learnMoreInfo})))),nativeFeedbackModal:()=>o.createElement(Ba,{view:Pa.Feedback},o.createElement(qa,null,o.createElement(Wt.q,{domain:i.getDomain(),hideDomainHelpText:!0,onClose:m,align:"left",title:o.createElement("span",null,"How do you like Grammarly?"),onSubmit:e=>{i.submitFeedback(e)},withScore:!0,hideLogo:!0,hideTextBoxTitle:!0,placeholderText:"How can we improve?",compactDisplay:!0,submitButtonKind:"primary",experimentClient:r}))),nativeSettingsModal:()=>o.createElement(Ba,{view:Pa.Settings},o.createElement(qa,null,o.createElement(oa,{onClose:m,assistantSettingsViewModel:a,upgradeViewModel:s,experimentClient:r},(({content:e,footer:t})=>o.createElement(o.Fragment,null,e,t))))),nativeProofitModal:()=>(0,g.zG)(c,O.fold((()=>null),(e=>{const t=e.feature.dialogCaller().type;return t===d.WT.proofitReview?o.createElement(qa,null,o.createElement(Kt,{proofitVM:e,experimentClient:r,insideSingleCardAssistant:!0})):t===d.WT.proofitRequest?o.createElement(qa,null,o.createElement(jt,{proofitVM:e,insideSingleCardAssistant:!0})):null}))),nativeExperimentalGBConsistencyUpsellFooter:()=>{const{onClick:e,trackShow:t,shouldShowGBUpgradeFooter:i}=u;return i(pe.p.GBUphookStyleGuideFooterV1)?o.createElement(Fa,{onClick:()=>e("gbInconsistencyCard",(0,pi.Um)().businessStyleGuide),trackShow:()=>t("gbInconsistencyCard")}):null},nativeExperimentalGBToneInsightsUpsellFooter:()=>{const{onClick:e,trackShow:t,shouldShowGBUpgradeFooter:i}=u;return i(pe.p.GBUphookBrandTonesFooterV1)?o.createElement(La,{onClick:()=>e("gbToneDetector",(0,pi.Um)().businessBrandTones),trackShow:()=>t("gbToneDetector")}):null},nativeGetStartedChecklistModal:({notify:e})=>{const t="test"===r.getTreatment(pe.p.ChecklistUX);return o.createElement(qa,null,t?o.createElement(at,{isStudent:p.isStudent}):o.createElement(yt,{getStartedChecklistViewModel:p,notify:e}))}}}(St,kt,Qe,Bt,Je,z,Dt.popView,$,Gt,qt,Zt),Yt={...xa.k,button:(0,Ia.ND)(za)},$t=Be.lens(B.nL.Prism.getLens());return{checksFeedItem:()=>R.item(Qt),checksFeedFlow:()=>R.createCardListFlow($t,Me),lensState:Be,cardsViewModel:Ge,lensPreviewViewModel:we,cardsListScrollManager:$e,alertProcessor:N,checkingService:U,assistantFeedbackViewModel:Qe,assistantSettingsViewModel:Bt,getStartedChecklistViewModel:Zt,marksViewModel:vt,upgradeViewModel:Je,gnar:l,user:p,positionViewModel:Ot,remSize:Te,isSingleCardAssistant:!0,statisticsService:H,toneDetectorViewModel:St,learnMoreViewModel:kt,createSnippetModalViewModel:Et,closeAssistant:F,bulkDismissViewModel:At,nativeViewsViewModel:Dt,successReportViewModel:Ct,outcomeExtraFooterViewModel:zt,designSystem:Qt,headerDesignSystem:Yt,sduiEngine:Q,sduiCardsViewModel:We,dispose:()=>{Vt.unsubscribe(),Ge.dispose(),Nt.dispose(),vt.dispose(),be.unsubscribe(),Ye.dispose(),Ut.unsubscribe(),Et.dispose(),kt.dispose(),St.dispose(),null==At||At.dispose(),null==Dt||Dt.dispose(),Ct.dispose(),It.unsubscribe(),xt.unsubscribe(),lt.unsubscribe(),ct.unsubscribe(),Ze.unsubscribe(),We.dispose(),zt.dispose(),nt.dispose(),gt.unsubscribe(),ot.unsubscribe(),ht.unsubscribe(),ut.unsubscribe()}}};var _s=i(45854),Is=i(46149),xs=i(98325),Ts=i(4903),Ms=i(42466),Rs=i(95305),Fs=i(73607),Ls=i(94785),Ps=i(19962),Ns=i(94895),Bs=i(83598),Vs=i(50474),Os=i(89379),Us=i(43805),Ds=i(30280);const Hs=o.forwardRef((({successView:e},t)=>{const i=o.useContext(Vs.m.Context),a=(0,Os.hM)((0,Os.JT)((0,n.pipe)(e,K.oA),i));return o.createElement("div",{className:Ds.compactSuccessLens,ref:t},o.createElement("div",{className:Ds.compactSuccessLensContainer},Ns.UI.mount(Us.q,a)))})),Gs=o.forwardRef((function({viewModels:e},t){return o.createElement("div",{className:Bs.mainView},o.createElement(Ws,{ref:t,state:e.lensState,cardsViewModel:e.cardsViewModel,cardsListScrollManager:e.cardsListScrollManager,assistantCardListViewModel:e.assistantCardListViewModel,predictionsPreviewViewModel:e.predictionsPreviewViewModel,assistantFeedbackViewModel:e.assistantFeedbackViewModel,headerViewModel:e.assistantHeaderViewModel,layoutViewModel:e.assistantLayoutViewModel,capabilities:e.capabilities,readersAttentionItemViewModel:e.readersAttentionItemViewModel}))})),js=({position:e,isSuccess:t,children:i})=>o.createElement(At.F.Fragment,null,e.pipe(_.x(((e,t)=>e.offset===t.offset&&e.visible===t.visible)),A.U((e=>e.visible?o.createElement(At.F.div,{...(0,Ye.Sh)(Bs.cardListFooterStatic,e.animationInProgress?Bs.cardListFooterAnimate:void 0,t?void 0:Bs.cardListFooterDynamic),style:t?{}:{transform:Ps.CSS.translateY(e.offset)}},i):null)))),Ws=o.forwardRef((function({state:e,assistantCardListViewModel:t,cardsViewModel:i,cardsListScrollManager:a,capabilities:s,readersAttentionItemViewModel:r,...l},c){const d=x.jw((e=>{let t=7;return t=31*t+(0,Is.AC)(e.currentLens.id),t=31*t+(V.v.WithSuccess.State.isInSuccess(s)(e)?1231:1237),t}),e),u=(0,n.pipe)(d,A.U((e=>{const t=e.get();return V.v.WithSuccess.State.isInSuccess(s)(t)}))),p=(0,n.pipe)((0,Fs.ux)(e,a,s),Z.M(e),A.U((([e,t])=>({visible:!B.nL.hasCards(t)||O.isNone(t.currentLens.items.find((e=>!e.positionState.isHeightValid))),offset:e+6,animationInProgress:!0}))),Ee.O({visible:!1,offset:0,animationInProgress:!0}));return o.createElement(Rs.C,{className:Bs.cardList,onClick:e=>{e.target.getAttribute("class")===Bs.cardList&&t.assistantActions.next({type:xs.lo.Type.clickOnEmpty})},footer:o.createElement(At.F.Fragment,null,(0,n.pipe)(u,A.U((e=>o.createElement(js,{key:"assistant-footer",position:p,isSuccess:e},o.createElement(Ms.pL,{predictionsVM:l.predictionsPreviewViewModel})))))),ref:e=>{t.cardListViewportHeight.set(O.fromNullable(null==e?void 0:e.offsetHeight))}},(l=>o.createElement(At.F.Fragment,null,(0,n.pipe)(I.aj([u,t.havePremiumAlerts]),A.U((([n,d])=>n&&!d?o.createElement(o.Fragment,null,o.createElement(Hs,{successView:t.successView,ref:c})):o.createElement(Fs.hz,{state:e,cardsViewModel:i,cardsListScrollManager:a,connectorElements:l,ref:c,header:o.createElement(o.Fragment,null,d?o.createElement("div",{className:Bs.upgradeHookWrapper,role:"uphook-wrapper"},Ns.UI.mount(Ls.n.TogglablePanel,t.upgradeHookFlow)):null),comparator:Ts.O.listItemOrd,capabilities:s,readersAttentionItemViewModel:r})))))))})),zs=o.forwardRef((function({viewModels:e,header:t,footer:i,className:a},s){return o.createElement(Rs.C,{ref:t=>{"function"==typeof s?s(t):s&&(s.current=t),e.assistantCardListViewModel.cardListViewportHeight.set(O.fromNullable(null==t?void 0:t.offsetHeight))},className:a},(a=>o.createElement(Fs.hz,{state:e.lensState,cardsViewModel:e.cardsViewModel,cardsListScrollManager:e.cardsListScrollManager,connectorElements:a,header:t,footer:i,comparator:Ts.O.listItemOrd,capabilities:e.capabilities,readersAttentionItemViewModel:O.none})))}));var qs=i(41572),Ks=i(64012),Zs=i(40643);const Qs=o.lazy((()=>i.e(2826).then(i.bind(i,53262)).then((({BrandTonesActivationUphookView:e})=>({default:e}))))),Ys=o.forwardRef((function({emogenieService:e,viewModels:t},i){const a=o.createElement(o.Fragment,null,o.createElement($s,{isBrandTonesEnabled:e.viewState.view("isBrandTonesEnabled"),institutionLogo:e.viewState.view("report").view((e=>null==e?void 0:e.institutionLogo)),institutionName:e.viewState.view("institutionName"),browser:t.assistantLayoutViewModel.browser}),o.createElement(Ea,{emogenieService:e,showBetaLabel:!1,browser:t.assistantLayoutViewModel.browser}),o.createElement(At.F.Fragment,null,e.viewState.view((t=>!t.isBrandTonesEnabled&&!t.isBrandTonesConfigured&&!t.settings.hideBrandTonesActivationUphook&&t.settings.shouldShowBrandTonesActivationUphook&&o.createElement(o.Suspense,{fallback:o.createElement(o.Fragment,null)},o.createElement(qs.L,{chunkName:"brandTonesActivationUphook"},o.createElement(Qs,{trackShow:e.actions.trackBrandToneActivationUphookShow,onActivateClick:e.actions.brandToneActivationUphookCTAClick,onDismissClick:e.actions.brandToneActivationUphookDismissClick})))))));return o.createElement(Mt,{dataPartName:"emogenie-view-overlay",popActiveView:()=>t.assistantLayoutViewModel.popActiveView(),panelClassName:xt.gradientViewOverlayPanel,hideBackButton:t.user.view((e=>e.isAnonymous))},o.createElement(At.F.Fragment,null,t.lensPreviewViewModel.getLens(Oe.R.SpecialId.PredictionEmogenie).pipe(A.U((e=>e.count>0)),_.x(),A.U((e=>e?o.createElement(zs,{key:"emogeniePredictionCardList",viewModels:t,ref:i,header:o.createElement(o.Fragment,null,a,o.createElement("div",{className:Zs.relatedSuggestionsTitle},"RELATED SUGGESTIONS"))}):o.createElement("div",{className:xt.gradientViewOverlayContent},a))))))}));Ys.displayName="EmogenieView";const $s=({isBrandTonesEnabled:e,institutionLogo:t,institutionName:i,browser:a})=>o.createElement(At.F.Fragment,null,T.h.combine(e,t,i,((e,t,i)=>o.createElement("div",{className:xt.defaultViewOverlayHeader},o.createElement("div",{className:Ks.emogenieViewOverlayHeader},e?o.createElement("div",null,t?o.createElement("img",{className:xt.logo,src:t}):null,i," Tone detector"):"Tone detector",o.createElement(Rt.v,{browser:a,className:Ks.emogenieViewOverlayHeaderBetaBadge})))))),Xs=({feedbackVM:e,layoutVM:t,experimentClient:i})=>o.createElement(Mt,{dataPartName:"feedback-view-overlay",popActiveView:()=>t.popActiveView(),panelClassName:xt.gradientViewOverlayPanel},o.createElement("div",{className:xt.gradientViewOverlayContent},o.createElement("div",{className:xt.defaultViewOverlayHeader},"Product Feedback"),o.createElement(Wt.q,{domain:e.getDomain(),onClose:()=>t.popActiveView(),align:"left",style:{height:"calc(100% - 48px)"},onSubmit:t=>e.submitFeedback(t),withScore:!0,fixSubmitButtonOverflowBottomPadding:!0,hideLogo:!0,experimentClient:i})));var Js=i(57796),er=i(76875);const tr=o.memo((({width:e,strokeWidth:t,generalScore:i,componentStyle:a,fontSize:s=9,isLoading:r})=>{const n=e/2,l=n-t/2,c=2*l*Math.PI,d=(r?75:i)/100*c,u=c-d,p=(e=>{const{red40:t,yellow50:i,green50:a}=Xt.Z;return e<65?t:e<95?i:a})(i);return o.createElement("div",{...(0,Ye.Sh)(er.scoreRing,r&&er.loading),style:a},o.createElement("svg",{width:e,height:e,viewBox:`0 0 ${e} ${e}`},o.createElement("circle",{fill:"white",r:l,cx:n,cy:n}),o.createElement("circle",{stroke:Xt.Z.neutral20,fill:"transparent",strokeWidth:t,style:{strokeDashoffset:d},r:l,cx:n,cy:n}),o.createElement("circle",{stroke:p,fill:"transparent",strokeWidth:t,strokeDasharray:`${c} ${c}`,style:{strokeDashoffset:u},r:l,cx:n,cy:n}),o.createElement("text",{className:er.scoreText,x:"50%",y:"-35%",fontSize:s,fill:"black",textAnchor:"middle",transform:"rotate(90)"},i>0&&!r?i:"")))}));var ir=i(93756),ar=i(83178);const sr=e=>{const t=Ns.Z.animatingFlow((()=>e.headerVM.logoScore),rr);return o.createElement("div",{className:ar.logo_score},Ns.UI.mount(dr,t))},rr=(e,t)=>(0,n.pipe)(e,O.filter((e=>e.type!==t.type)),O.map((()=>ir.Hk("fadeout","fadein")))),nr=Ns.UI.Node.make((()=>o.createElement(Js.K,{className:ar.grammarly_logo,size:22}))),or=Ns.UI.Node.make((({view:e})=>o.createElement(At.F.div,{className:ar.score_container,"data-grammarly-part":"assistant-score"},(0,n.pipe)(e("score"),(0,A.U)((({capiScore:e,isLoading:t})=>o.createElement(o.Fragment,null,o.createElement(tr,{generalScore:e,strokeWidth:2,width:22,fontSize:e<100?11:9,isLoading:t,componentStyle:{transform:"translate(2px, -2px) rotate(-90deg)",cursor:"default"}})))))))),lr=Ns.UI.Union.make("type",{logo:nr,score:or}),cr=Ns.UI.Transition.make({fadein:ar.logoscore_fadein},{fadeout:ar.logoscore_fadeout}),dr=Ns.UI.Animated.make(cr,lr);var ur=i(96309),pr=i(20330);const mr=e=>{const[t,i]=o.useState(!1),[a,s]=o.useState(!1),r=e.viewModels.assistantLayoutViewModel,l=e.viewModels.assistantHeaderViewModel,c=o.useContext(_s.O.Context),d=(0,n.pipe)(e.viewModels.assistantProofitViewModel,O.map((e=>e.feature)),O.map((t=>o.createElement(At.F.Fragment,null,I.aj([t.layoutCreated,r.activeView.view((e=>e.type===t.assistantViewType()))]).pipe(A.U((([i,a])=>i?o.createElement(Yt.u,{message:c.proofitTooltip,showDelay:Qt.gk,disabled:a},o.createElement(ga.h,{onClick:()=>{a?r.popActiveView():(e.viewModels.gnar.proofitButtonClick("assistant_header"),r.pushActiveView({type:t.assistantViewType()}))},dataGrammarlyPart:"assistant-header-action-btn-proofit"},o.createElement("div",{className:ar.headerActionBtnProofitIcon}))):null)))))),O.toNullable),u=o.createElement(ur.P,{onClick:l.close,tooltipMessage:"Close panel",dataGrammarlyPart:"assistant-header-action-btn-close"});return o.createElement(Yt.u,{message:"Grab and drag to move panel",showDelay:Qt.gk,disabled:t},o.createElement("div",{...(0,Ye.Sh)(ar.header,a&&ar.actions_hovered),ref:e.draggableRef,onMouseDown:()=>i(!0),onMouseOut:()=>i(!1)},o.createElement(sr,{headerVM:l}),o.createElement(hr,null),o.createElement(At.F.div,{className:ar.headerActions,onMouseOver:()=>s(!0),onMouseOut:()=>s(!1)},r.isHeaderNavigationEnabled.view((e=>e?o.createElement(o.Fragment,null,d,o.createElement(At.F.Fragment,null,l.showSetGoalsActionButton.view((e=>e&&o.createElement(Yt.u,{message:c.setGoalsTooltip,showDelay:Qt.gk},o.createElement(ga.h,{onClick:()=>l.open("setGoals"),dataGrammarlyPart:"assistant-header-action-btn-set-goals"},o.createElement("div",{className:ar.headerActionBtnGoalsIcon})))))),o.createElement(At.F.Fragment,null,T.h.combine(l.showSettingsActionButton,r.activeView,((e,t)=>{const i=t.type===h.a.Type.settings;return e&&o.createElement(pr.l,{onClick:()=>i?r.popActiveView():r.pushActiveView({type:h.a.Type.settings}),enableTooltip:!i,dataGrammarlyPart:"assistant-header-action-btn-settings"})}))),u):u)))))},hr=()=>o.createElement("div",{className:ar.draggableWrapper,"data-grammarly-part":"assistant-draggable-handler"},o.createElement("div",{className:ar.draggable}));class gr extends o.Component{render(){return this._idSuffix=this._idSuffix||"readersAttentionOnboardingBanner_"+gr._nextIdSuffix++,o.createElement("svg",{className:this.props.className,viewBox:"0 2 296 144",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("g",{clipPath:`url(#clip0_${this._idSuffix})`},o.createElement("rect",{width:"296",height:"144",fill:"#4A6EE0"}),o.createElement("path",{d:"M-5.5 -3.5H261.5V47.5H-5.5V-3.5Z",fill:"#6E66DE",stroke:"#1F243C"}),o.createElement("path",{d:"M-2.79293 -197.5L429.5 234.793V-197.5H-2.79293Z",fill:"#15C39A",stroke:"#1F243C"}),o.createElement("path",{d:"M219.057 33C222.992 33 226.182 29.8101 226.182 25.875C226.182 21.94 222.992 18.7501 219.057 18.7501C215.122 18.7501 211.932 21.94 211.932 25.875C211.932 29.8101 215.122 33 219.057 33Z",fill:"#1F243C",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("path",{d:"M221.477 31.0899C225.92 31.0899 229.522 27.4881 229.522 23.045C229.522 18.6018 225.92 15 221.477 15C217.033 15 213.432 18.6018 213.432 23.045C213.432 27.4881 217.033 31.0899 221.477 31.0899Z",fill:"#41D9B5",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("path",{d:"M220.188 27.045C220.009 27.045 219.841 26.9778 219.717 26.8434L216.927 24.0646C216.67 23.8069 216.67 23.3811 216.927 23.1122C217.185 22.8545 217.611 22.8545 217.88 23.1122L220.188 25.4204L225.353 20.2662C225.611 20.0085 226.037 20.0085 226.306 20.2662C226.563 20.5239 226.563 20.9497 226.306 21.2186L220.67 26.8546C220.535 26.9778 220.367 27.045 220.188 27.045Z",fill:"white"}),o.createElement("path",{d:"M68.125 57C72.06 57 75.25 53.8101 75.25 49.875C75.25 45.94 72.06 42.7501 68.125 42.7501C64.19 42.7501 61 45.94 61 49.875C61 53.8101 64.19 57 68.125 57Z",fill:"#1F243C",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("path",{d:"M70.545 55.0899C74.9881 55.0899 78.5899 51.4881 78.5899 47.045C78.5899 42.6018 74.9881 39 70.545 39C66.1018 39 62.5 42.6018 62.5 47.045C62.5 51.4881 66.1018 55.0899 70.545 55.0899Z",fill:"#41D9B5",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("path",{d:"M69.2564 51.045C69.0771 51.045 68.909 50.9778 68.7858 50.8434L65.9958 48.0646C65.7381 47.8069 65.7381 47.3811 65.9958 47.1122C66.2535 46.8545 66.6793 46.8545 66.9482 47.1122L69.2564 49.4204L74.4217 44.2662C74.6794 44.0085 75.1052 44.0085 75.3741 44.2662C75.6318 44.5239 75.6318 44.9497 75.3741 45.2186L69.7382 50.8546C69.6037 50.9778 69.4357 51.045 69.2564 51.045Z",fill:"white"}),o.createElement("rect",{x:"132",y:"38",width:"39",height:"24",rx:"2",fill:"#1F243C",stroke:"#1F243C"}),o.createElement("rect",{x:"135",y:"35",width:"39",height:"24",rx:"2",fill:"#F8C6DA",stroke:"#1F243C"}),o.createElement("path",{d:"M135 58.3296L149.303 47.4857L153.298 44.4591C154.007 43.923 154.993 43.923 155.702 44.4591L159.697 47.4857L174 58.3296",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("path",{d:"M173.914 35.5L159.698 47.6583L155.806 50.9962C155.063 51.6361 153.956 51.6361 153.212 50.9962L149.303 47.6583L135.087 35.5",fill:"#F8C6DA"}),o.createElement("path",{d:"M173.914 35.5L159.698 47.6583L155.806 50.9962C155.063 51.6361 153.956 51.6361 153.212 50.9962L149.303 47.6583L135.087 35.5",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("rect",{x:"135",y:"35",width:"39",height:"24",rx:"2",stroke:"#1F243C"}),o.createElement("rect",{y:"32",width:"296",height:"112",fill:`url(#paint0_linear_${this._idSuffix})`}),o.createElement("path",{d:"M185.5 22C185.5 18.961 183.039 16.5 180 16.5C183.039 16.5 185.5 14.039 185.5 11C185.5 14.039 187.961 16.5 191 16.5C187.965 16.5 185.5 18.9651 185.5 22Z",fill:"#F9EA9E",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round"}),o.createElement("path",{d:"M239.5 128C239.5 124.961 237.039 122.5 234 122.5C237.039 122.5 239.5 120.039 239.5 117C239.5 120.039 241.961 122.5 245 122.5C241.965 122.5 239.5 124.965 239.5 128Z",fill:"#F9EA9E",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round"}),o.createElement("path",{d:"M24.5 63C24.5 59.961 22.039 57.5 19 57.5C22.039 57.5 24.5 55.039 24.5 52C24.5 55.039 26.961 57.5 30 57.5C26.9651 57.5 24.5 59.9651 24.5 63Z",fill:"#F9EA9E",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round"}),o.createElement("rect",{x:"263",y:"76",width:"63",height:"77",rx:"2",fill:"#1F243C",stroke:"#1F243C"}),o.createElement("rect",{x:"267",y:"72",width:"63",height:"77",rx:"2",fill:"#F9FAFF",stroke:"#1F243C"}),o.createElement("path",{d:"M318.759 89.7112H278",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("path",{d:"M318.759 101.227H278",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("path",{d:"M318.759 112.743H278.095",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("path",{d:"M318.759 124.259H278",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("g",{style:{mixBlendMode:"multiply"},opacity:"0.4"},o.createElement("path",{d:"M318.759 101.227H278",stroke:"#41D9B5",strokeWidth:"10",strokeMiterlimit:"10"})),o.createElement("g",{style:{mixBlendMode:"multiply"},opacity:"0.4"},o.createElement("path",{d:"M305.43 112.743H278.095",stroke:"#41D9B5",strokeWidth:"10",strokeMiterlimit:"10"}))),o.createElement("defs",null,o.createElement("linearGradient",{id:`paint0_linear_${this._idSuffix}`,x1:"148",y1:"32",x2:"148",y2:"144",gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"#26307D",stopOpacity:"0"}),o.createElement("stop",{offset:"1",stopColor:"#26307D",stopOpacity:"0.5"})),o.createElement("clipPath",{id:`clip0_${this._idSuffix}`},o.createElement("rect",{width:"296",height:"144",fill:"white"}))))}}gr._nextIdSuffix=0;var fr=i(35414);const vr=({layoutVM:e})=>o.createElement(Mt,{dataPartName:"readers-attention-help-overlay",popActiveView:()=>e.popActiveView(),panelClassName:fr.helpPanel,contentClassName:fr.helpPanelContent},o.createElement("div",{className:fr.helpBanner},o.createElement(gr,{className:fr.helpBannerImage}),o.createElement("div",{className:fr.helpHeader},"Reader′s attention",o.createElement(ca.C,{title:"NEW",kind:"gold"})),o.createElement("div",{className:fr.helpBannerMessage},"Get your important information across")),o.createElement("div",{className:fr.helpContent},o.createElement("div",null,"Grammarly predicts which parts of your email will be read.",o.createElement("ul",null,o.createElement("li",null,o.createElement("span",{className:fr.heatmap},o.createElement("b",null,"Highlighted text is most likely to be read."))),o.createElement("li",null,"The rest of the text may be skimmed or skipped.")),"Follow Grammarly’s suggestions to keep your reader’s attention.")));var br=i(99603);const wr=e=>{const t=Ns.Z.animatingFlow((()=>e.summaryVM.summary),yr);return o.createElement("div",{...(0,Ye.Sh)(br.summary_wrapper,e.className)},Ns.UI.mount(Er,t))},yr=(e,t)=>(0,n.pipe)(e,O.filter((e=>e.content!==t.content)),O.map((()=>ir.Hk("fadeout","fadein")))),Sr=Ns.UI.Node.make((({view:e})=>o.createElement(At.F.div,{className:br.summary_heading,"data-grammarly-part":"assistant-summary-header"},e("content")))),kr=Ns.UI.Transition.make({fadein:br.summary_fadein},{fadeout:br.summary_fadeout}),Er=Ns.UI.Animated.make(kr,Sr);var Cr=i(37095),Ar=i(84333);const _r=o.forwardRef((function({viewModels:e,readersAttentionVM:t},i){return o.createElement(Mt,{dataPartName:"readers-attention-view-overlay",popActiveView:()=>e.assistantLayoutViewModel.popActiveView(),panelClassName:xt.gradientViewOverlayPanel},o.createElement(zs,{key:"takeawaysPredictionCardList",ref:i,viewModels:e,className:Ar.cardList,header:o.createElement(Ir,{readersAttentionVM:t,layoutVM:e.assistantLayoutViewModel}),footer:o.createElement(ei,{feedbackVM:e.assistantFeedbackViewModel,entryPoint:Zt.Q.readersAttention})}))})),Ir=({readersAttentionVM:e,layoutVM:t})=>{const i=e.panelState.pipe(A.U(O.fold((()=>({content:""})),(e=>({content:e.headerMessage})))));return o.createElement(o.Fragment,null,o.createElement("div",{className:xt.defaultViewOverlayHeader},o.createElement("div",{className:Ar.headerGroup},"Reader′s attention",o.createElement("div",{onClick:()=>e.showHelp(),className:Ar.questionMarkButton,"data-grammarly-part":"readers-attention-question-mark-button"},o.createElement(va.JO.QuestionMark,{width:12,className:Ar.questionMarkIcon}))),o.createElement(Rt.v,{browser:t.browser})),o.createElement(wr,{summaryVM:{summary:i},className:Ar.summaryWrapper}),o.createElement("div",{className:Ar.message},H.UI.mount(H.UI.Union.asOption(Cr.r),(()=>e.panelState))),o.createElement(At.F.div,{...(0,Ye.Sh)(Zs.relatedSuggestionsTitle,Ar.relatedSuggestionsTitle)},e.panelState.pipe(A.U(O.fold(g.gn,(e=>`${e.numChecklistItemsChecked} OF ${e.numChecklistItems} COMPLETED`))))))};var xr=i(85665),Tr=i(78249),Mr=i(88571),Rr=i(25814),Fr=i(84021),Lr=i(33895),Pr=i(53211),Nr=i(42455),Br=i(98805),Vr=i(51369),Or=i(42103),Ur=i(33678),Dr=i(15073),Hr=i(101),Gr=i(16118),jr=i(85089),Wr=i(83401),zr=i(89068),qr=i(78674),Kr=i(72481),Zr=i(91463);const Qr=({children:e,experimentClient:t})=>{const i=t.isGateEnabled(E.K.ExtensionA11yUIFixes),[a,s]=o.useState(null),r=o.useMemo((()=>({currentView:a,setCurrentView:s,isEnabled:i})),[a,i]);return o.createElement(Na.Provider,{value:r},e)},Yr=o.memo((function({viewModels:e,experimentClient:t,emogenieService:i,height:a,ready:s,OuterElementsPortalSource:r}){const l=new $a.C;(0,D.iR)("viewModels",e);const c=(0,Gt.IQ)(),d=(0,Gt.e8)(),u=o.useContext(Gt.Dg).state.pipe(ke.h((e=>!e.dragging)),Ee.O(Fr.h.create())),p=o.useContext(Lr.Y4),m=(0,Pr.C7)(),g=T.h.create(Ps.Rect.empty);(0,Nr.A)(I.aj([u,p]).pipe(A.U((([e,t])=>{const i=t.top+e.translate.y,a=t.left+e.translate.x,s=m.height-i-t.height,r=m.width-a-t.width;return{height:t.height,width:t.width,top:i,left:a,bottom:s,right:r}})),ce.b(x.wW(g)))),(0,Nr.A)(u.pipe(ce.b((t=>e.positionViewModel.onDrag(t))))),(0,Nr.A)(e.assistantLayoutViewModel.activeView.pipe(Gr.G(),ce.b((([t,i])=>{t.type!==i.type&&h.a.isDefault(i)&&e.cardsListScrollManager.paddingTop.set(0)}))));const f=o.useRef(null);return o.useEffect((()=>{e.assistantCardListViewModel.cardListContext.next(O.fromNullable(f.current));const t=f.current?jr.rl(f.current,{subtree:!0,childList:!0}):Wr.C,i=g.view((e=>({top:e.top,left:e.left}))),a=(0,n.pipe)(t,zr.V((0,Br.m9)(1)),qr.b(10),De.P()).subscribe((()=>s(i,c)),(()=>{s(i,c,!0)}));return()=>{a.unsubscribe()}}),[]),o.createElement($r,{remSize:e.remSize,environment:l,viewport:g,experimentClient:t},o.createElement(At.F.div,{"data-grammarly-part":"assistant-popup-content",...(0,Ye.Sh)(Bs.assistant,c.pipe(Ee.O(!1),A.U((e=>e?Bs.dragging:null)))),style:{height:a,maxHeight:"90vh"}},o.createElement(mr,{viewModels:e,draggableRef:d}),e.assistantLayoutViewModel.activeView.view((a=>h.a.isDefault(a)?o.createElement(Gs,{viewModels:e,ref:f,key:"default-view"}):h.a.isEmogenie(a)?o.createElement(Ys,{emogenieService:i,viewModels:e,key:"emogenie-view",ref:f}):h.a.isReadersAttention(a)?o.createElement(_r,{viewModels:e,readersAttentionVM:e.readersAttentionViewModel,key:"readers-attention-view",ref:f}):h.a.isReadersAttentionHelp(a)?o.createElement(vr,{layoutVM:e.assistantLayoutViewModel,key:"readers-attention-help"}):h.a.isFeedback(a)?o.createElement(Xs,{feedbackVM:e.assistantFeedbackViewModel,layoutVM:e.assistantLayoutViewModel,experimentClient:t,key:"feedback-view"}):h.a.isSettings(a)?o.createElement(la,{viewModels:e,experimentClient:t,key:"settings-view"}):h.a.isProofitRequest(a)&&O.isSome(e.assistantProofitViewModel)?o.createElement(jt,{browser:e.assistantLayoutViewModel.browser,popActiveView:()=>e.assistantLayoutViewModel.popActiveView(),proofitVM:e.assistantProofitViewModel.value,key:"proofit-request-view"}):h.a.isProofitReview(a)&&O.isSome(e.assistantProofitViewModel)?o.createElement(Kt,{browser:e.assistantLayoutViewModel.browser,popActiveView:()=>e.assistantLayoutViewModel.popActiveView(),proofitVM:e.assistantProofitViewModel.value,experimentClient:t,key:"proofit-review-view"}):null))),o.createElement(r,null,o.createElement(Rr.jv,null,o.createElement(Tr.L,{modalManager:e.assistantModalManager}))),o.createElement(Vr.X,null))})),$r=({environment:e,viewport:t,children:i,remSize:a,experimentClient:s})=>{var r;const n=o.useRef((0,_s.I)(Vs.m.getConfig(e.has($a.U.Flag.isAppleSystem)?"mac":"windows"))),l=null===(r=o.useContext(xr.nS.Context))||void 0===r?void 0:r.host;return o.createElement(Mr.Q,{remSize:a,setter:e=>Dr.u.setRootCssVar(l||document.documentElement,e)},o.createElement(Kr.p.Manager,{cardWidth:Kr.p.withCardWidthEffect(Kr.p.defaultSizeObserver,(e=>{Kr.p.setRootCssVar(l||document.documentElement,e)}))},o.createElement($a.U.Context.Provider,{value:e},o.createElement(Ur.a.Context.Provider,{value:e},o.createElement(_s.O.Context.Provider,{value:n.current.assistant},o.createElement(Vs.m.Context.Provider,{value:n.current.denali},o.createElement(Zr.TG.ContextMock,null,o.createElement(Hr.l.RootVirtualContainer,{viewport:t,name:"draggable"},o.createElement(Or.G.DefaultProvider,null,o.createElement(Rr.jv,null,o.createElement(Qr,{experimentClient:s},i)))))))))))};var Xr=i(59358),Jr=i(70063),en=i(89456),tn=i(59421);const an=({textFieldRect:e,viewModels:t,gButtonRect:i,draggableGButtonType:a,children:s})=>{const{initialPositionOffset:r}=t.positionViewModel,n=en.UL.shift(i,Jr.E9.minus(e.client,e.page)),l=null===a?{...e.client,...e.size}:n,c=(0,Pr.C7)(),d=null===a?t.assistantLayoutViewModel.layout:Xr.V.draggableGButtonAssistantLayout(n,e);return o.createElement(tn._,{bounds:c,hasDragHandle:!0},(({translate:e})=>o.createElement(Lr.sX,{anchorRect:l,viewportRect:c,anchorOrigin:d.anchorOrigin,elementOrigin:d.assistantOrigin,anchorMargin:d.anchorMargin,repositioning:d.repositioningStrategy,stickToTarget:!1,viewportMargin:0,postRepositioningOffset:{horizontal:r.left,vertical:r.top}},(({top:t,left:i})=>o.createElement("div",{"data-grammarly-part":"assistant-popup",style:{position:"fixed",transform:`translate(${e.x}px, ${e.y}px)`,zIndex:Qt.Eq,top:t,left:i}},s)))))};var sn=i(95300);const rn=(e,t,i,a)=>a?((e,t,i)=>e===Lr.KC.top?i.top:t.height!==i.height?e:void 0)(e,t,i):e===Lr.KC.top?i.top:t.height!==i.height?Math.max(e-(i.height-t.height),0):void 0,nn=e=>{const[t,i]=(0,o.useState)(Lr.KC.top),[a,s]=(0,o.useState)(Lr.KC.left),[r,n]=(0,o.useState)(Lr.KC.height),[l,c]=(0,o.useState)(Lr.KC.width),d=o.useRef(new sn.X(Lr.KC));return(0,o.useEffect)((()=>{const r=d.current.pipe(Gr.G()).subscribe((([r,o])=>{const l=((e,t,i)=>{if(e===Lr.KC.left||t.left!==i.left)return i.left})(a,r,o),d=rn(t,r,o,e);void 0!==d&&i(d),void 0!==l&&s(l),c(o.width),n(o.height)}));return()=>r.unsubscribe()}),[t,a]),{top:t,setTop:i,left:a,setLeft:s,height:r,width:l,positionerRef:d}},on=({alignmentRect:e,viewModels:t,onDomRectChange:i,anchor:a,experimentClient:s,isAccessible:r,onMaxHeightChange:n,children:l})=>{const c=(0,Pr.C7)(),{top:d,setTop:u,left:p,setLeft:m,width:h,height:g,positionerRef:f}=nn(r),{x:v,y:b,setDragState:w}=((e,t,i,a)=>{const[s,r]=o.useState(Fr.h.create()),[n,l]=o.useState(null),[c,d]=o.useState(null),u=null!=c?c:s.translate;return o.useEffect((()=>{!s.dragging&&s.dragEnd&&(t(e+u.y),a(i+u.x),l(s.translate),d({x:0,y:0}))}),[s]),o.useEffect((()=>{s.dragging&&c&&n&&d({x:s.translate.x-n.x,y:s.translate.y-n.y})}),[s]),{dragState:s,setDragState:r,x:u.x,y:u.y}})(d,u,p,m),y=r?c.height:0;o.useEffect((()=>{const e=c.height-d-g,t=c.width-p-h;if(i({top:d,left:p,bottom:e,right:t,height:g,width:h}),n){n(y)}}),[d,p,h,g,y]);const S="textField"===a?{anchorOrigin:{horizontal:"right",vertical:"bottom"},elementOrigin:{horizontal:"left",vertical:"bottom"},anchorMargin:{top:0,bottom:0,left:16,right:16},repositioning:[{horizontal:"flip",vertical:"translate"}]}:"GButton"===a?{anchorOrigin:{horizontal:"right",vertical:"top"},elementOrigin:{horizontal:"right",vertical:"bottom"},anchorMargin:{top:4,bottom:4,left:0,right:0},repositioning:[{horizontal:"translate",vertical:"flip"}]}:(0,Ge.vE)(a);let k;return s.isGateEnabled(E.K.ExtensionA11yUIFixes)&&(k=e=>!e.target.closest("button")),o.createElement(tn._,{hasDragHandle:!0,bounds:c,onChangeDragState:w,dragEventFilter:k},o.createElement(Lr.sX,{...S,anchorRect:e,viewportRect:c,stickToTarget:!1,viewportMargin:0,postRepositioningOffset:r?void 0:{horizontal:t.positionViewModel.initialPositionOffset.left,vertical:t.positionViewModel.initialPositionOffset.top},onChangePosition:e=>f.current.next(e)},o.createElement("div",{style:{position:"fixed",transform:`translate(${v}px, ${b}px)`,zIndex:Qt.Eq,top:r?Math.min(c.height-g,d):void 0,left:r?Math.min(c.width-h,p):void 0,bottom:r?void 0:c.height-d-g,right:r?void 0:c.width-p-h}},l)))};var ln=i(78594),cn=i(75397),dn=i.n(cn);const un={[Pa.Settings]:"Grammarly settings are active",[Pa.Feedback]:"Grammarly feedback form is active",[Pa.ToneInsight]:"Grammarly tone settings are active",[Pa.LearnMore]:"Additional information about Grammarly suggestion is active"},pn=()=>{const{currentView:e,isEnabled:t}=o.useContext(Na);if(!t)return null;const i=null===e?"Grammarly assistant is active":un[e];return o.createElement("div",{"aria-live":"assertive","aria-atomic":!0,className:dn().viewAnnouncer,"data-grammarly-part":"assistant-view-announcer"},o.createElement("p",null,i))};var mn=i(81237);const hn=({dragHandle:e,headerContent:t,className:i,children:a,includeContentPadding:s,footer:r,dataGrammarlyPart:n="single-card-assistant",maxHeight:l,onHeightChange:c})=>{const[d,u]=o.useState(0),[p,m]=o.useState(0),[h,g]=o.useState(0),f=o.useRef(null),v=o.useRef(null),b=o.useRef(null);o.useEffect((()=>{null==c||c(d+p+h)}),[d,p,h]);const w=o.useRef(null);o.useEffect((()=>{var e;return f.current?(null===(e=w.current)||void 0===e||e.disconnect(),w.current=ln.N.getResizeObserver((()=>{f.current&&u(f.current.getBoundingClientRect().height)})),w.current.observe(f.current)):u(0),()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.disconnect()}}),[f.current]);const y=o.useRef(null);o.useEffect((()=>{var e;return v.current?(null===(e=y.current)||void 0===e||e.disconnect(),y.current=ln.N.getResizeObserver((()=>{v.current&&m(v.current.getBoundingClientRect().height)})),y.current.observe(v.current)):m(0),()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.disconnect()}}),[v.current]);const S=o.useRef(null);return o.useEffect((()=>{var e;return b.current?(null===(e=S.current)||void 0===e||e.disconnect(),S.current=ln.N.getResizeObserver((()=>{b.current&&g(b.current.getBoundingClientRect().height)})),S.current.observe(b.current)):g(0),()=>{var e;return null===(e=S.current)||void 0===e?void 0:e.disconnect()}}),[r,b.current]),o.useEffect((()=>{v.current&&(v.current.scrollTop=0)}),[v.current,p]),o.createElement(o.Fragment,null,o.createElement("div",{...(0,Ye.Sh)(mn.singleCardAssistant,i),style:l?{maxHeight:l,overflowY:"auto"}:void 0,"data-grammarly-part":n,role:"region","aria-label":"Grammarly assistant"},o.createElement("header",{"data-grammarly-part":n+"-header","aria-label":"Grammarly assistant toolbar",...(0,Ye.Sh)(mn.singleCardAssistantHeader,e?mn.singleCardAssistantHeaderDraggable:null),ref:t=>{f.current=t,null==e||e(t)}},o.createElement(At.F.Fragment,null,t)),o.createElement("div",{"data-grammarly-part":n+"-content",...(0,Ye.Sh)(mn.singleCardAssistantContent,s?mn.singleCardAssistantContentWithPadding:null),ref:v},a),r?o.createElement("footer",{"data-grammarly-part":n+"-footer",className:mn.singleCardAssistantFooter,ref:b,onClick:()=>r.onClick()},o.createElement("div",{className:mn.singleCardAssistantFooterText},r.content),r.tooltip&&o.createElement(Yt.u,{message:r.tooltip,showDelay:Qt.gk},o.createElement(ga.h,{onClick:()=>r.onClick()},o.createElement("div",{className:mn.singleCardAssistantFooterButtonIcon})))):null),o.createElement(pn,null))};var gn=i(17766),fn=i(45711),vn=i(23447),bn=i(74453),wn=i(35583),yn=i.n(wn);const Sn={clarity:gn.G,correctness:fn.a,tone:vn.D,engagement:bn.L},kn=({suggestionType:e})=>{const t=Sn[e];return o.createElement("div",{className:yn().container},o.createElement(t,null),"Your first ",e," suggestion!")};var En=i(18702),Cn=i(94810);const An=o.memo((function({viewModels:e,height:t,domRect:i,ready:a,maxHeight:s,experimentClient:r}){const l=new $a.C;(0,D.iR)("viewModels",e);const c=(0,Gt.IQ)(),d=(0,Gt.e8)(),u=o.useContext(Gt.Dg).state.pipe(ke.h((e=>!e.dragging)),Ee.O(Fr.h.create()));(0,Nr.A)(u.pipe(ce.b((t=>{e.positionViewModel.onDrag(t)})))),o.useEffect((()=>{const e=i.view((e=>({top:e.top,left:e.left})));a(e,c)}),[]);const p=e.nativeViewsViewModel.header.view(O.fold((()=>o.createElement(o.Fragment,null)),(t=>o.createElement(En.P,{key:"header",sduiRootId:t.id,content:t,designSystem:e.headerDesignSystem,notify:(i,a,s)=>e.cardsViewModel.actionEvents.next({type:me.lY.Type.sduiCardAction,sourceId:i,cardId:t.id,actions:a,scope:s}),transitions:[],prevContent:O.none,onAnimationEnd:D.Q1,onMount:D.Q1})))),m=e.checksFeedFlow(),h=(0,n.pipe)(m,H.Z.extendActions(ce.b((t=>{"content"===t.key&&"card"===t.action.key&&"alertRefSDUI"===t.action.action.key&&e.cardsViewModel.actionEvents.next(t.action.action.action)}))));return o.createElement($r,{remSize:e.remSize,environment:l,viewport:i,experimentClient:r},o.createElement(At.F.Fragment,null,I.aj([e.bulkDismissViewModel.successReportFooterBulkDismissAlertsCount,e.outcomeExtraFooterViewModel.extraFooterOutcomeType]).pipe(A.U((([i,a])=>o.createElement(hn,{key:"single-card-assistant",className:Va.singleCardAssistant,dragHandle:d,headerContent:p,maxHeight:s,footer:_n(e,i,a),onHeightChange:e=>t.set(e)},H.UI.mount(Cn.c.assistant(e.checksFeedItem(e.cardsViewModel.actionEvents)),h)))))),o.createElement(Vr.X,null))}));function _n(e,t,i){return t>0?function(e,t){return{content:o.createElement(o.Fragment,null,"We hid ",t," ",be.pluralize(t,"suggestion","suggestions")," ","that didn’t seem relevant to your text. Want to review"," ",be.pluralize(t,"it","them"),"?"),tooltip:"Review suggestions",onClick:()=>{e.bulkDismissViewModel.showBulkDismissFeed()}}}(e,t):void 0!==i?function(e){return{content:o.createElement(kn,{suggestionType:e}),onClick:()=>null}}(i):void 0}var In=i(79692),xn=i(49708),Tn=i(2768),Mn=i(14454),Rn=i(55826),Fn=i(31442),Ln=i(80358);var Pn=i(28811),Nn=i(21038);function Bn(e,t){return(0,g.zG)(t,O.fold((()=>e),(({feedId:t})=>e.filter((e=>"pushAssistantFeed"===e.type&&e.feedId!==t)))))}function Vn(e,t){if(e.isSingleCardAssistant){if(t.type===d.WT.sdui){const i=function(e){const t=(0,g.zG)(e.find((e=>"pushAssistantFeed"===e.type)),O.fromNullable,O.fold((()=>[]),(e=>null!=e.cardId?[e.cardId,e.feedId]:[e.feedId])),Q.UI((e=>(0,g.ls)(Pn.a.get(Nn.j.Item.Id.from(e)),O.isSome))));return e=>t.every((t=>t(e)))}(t.action.actions);return e.sduiEngine.sduiManager.state.pipe(ke.h(i),De.P()).subscribe((i=>e.cardsViewModel.actionEvents.next(t.action)))}const i=(0,g.zG)(function(e){const t=e.type;switch(t){case d.WT.gButton:case d.WT.card:return O.some({id:k.D1.GButton.DEFAULT_GBUTTON_ID,getContent:k.D1.GButton.getContent});case d.WT.emogenie:return O.some({id:k.D1.GButton.TONE_GBUTTON_ID,getContent:k.D1.GButton.getContent});case d.WT.getStartedChecklist:return O.some({id:k.D1.GButton.GET_STARTED_GBUTTON_ID,getContent:k.D1.GButton.getContent});case d.WT.proofitRequest:case d.WT.proofitReview:return O.some({id:k.D1.Proofit.ID,getContent:k.D1.Proofit.getContent});default:(0,Ge.L0)(t)}}(t),O.getOrElse((()=>({id:k.D1.GButton.DEFAULT_GBUTTON_ID,getContent:k.D1.GButton.getContent}))));return e.sduiEngine.sduiManager.state.pipe(A.U((e=>i.getContent(e,i.id))),K.oA,De.P(),Z.M(e.sduiEngine.sduiManager.state),A.U((([e,i])=>{const a=t.type===d.WT.card?t.alertId:null;return(0,g.zG)(O.fromNullable(a),O.chain((e=>k.D1.getByAlertId(i,e))),O.map((e=>e.id)),O.fold((()=>({initialSduiItemId:O.none,openingButtonActions:e.actions})),(t=>({initialSduiItemId:O.some(t),openingButtonActions:e.actions}))))})),A.U((({initialSduiItemId:i,openingButtonActions:a})=>{const s=Bn(a,e.sduiEngine.sduiFeedManager.currentFeed),r=k.fr.create(s);return(0,g.zG)(i,O.fold((()=>((t.type===d.WT.proofitRequest||t.type===d.WT.proofitReview)&&s.some((e=>"pushAssistantFeed"===e.type))&&e.gnar.proofitButtonClick("gmail_toolbar"),r)),(e=>({...r,actions:r.actions.map((t=>"pushAssistantFeed"===t.type?{...t,cardId:e}:t))}))))}))).subscribe((t=>e.cardsViewModel.actionEvents.next(t)))}return t.type===d.WT.emogenie?e.assistantLayoutViewModel.pushActiveView({type:h.a.Type.emogenie}):t.type===d.WT.proofitRequest?e.assistantLayoutViewModel.pushActiveView({type:h.a.Type.proofitRequest}):t.type===d.WT.proofitReview?e.assistantLayoutViewModel.pushActiveView({type:h.a.Type.proofitReview}):e.assistantLayoutViewModel.pushActiveView({type:h.a.Type.default}),C.w.EMPTY}(0,p.C)();class On{constructor(e,t){this._params=e,this._felog=t,this._log=l.Y.create("AssistantControllerImpl"),this._integration=null,this._viewModels=T.h.create(null),this._assistantPopupIsReady=new oe.xQ,this._initPerformance=void 0,this._openMeasure=void 0,this._height=T.h.create(0),this._domRect=T.h.create(Ps.Rect.empty),this._maxHeight=T.h.create((0,Pr.C7)().height),this._openState=T.h.create("closed"),this._subs=new le.w.Keeper,this.openState=this._openState.view(),this.open=e=>{var t,i;const a=this._params.contentScriptState.view("user").view((e=>({isPremium:e.premium,isAnonymous:e.anonymous,experiments:e.experiments,customFields:e.customFields,institutionInfo:e.institutionInfo,isGrammarlyEmployee:fi.n5.isGrammarlyEmployee(e),isTestUser:fi.n5.isTestUser(e),isFreeTrial:fi.n5.isFreeTrial(e)}))),s=this._viewModels.get();if(null!==s)this._subs.push(Vn(s,e));else{this._openMeasure=this._felog.assistant.openTime.startMeasure();const s=this._felog.assistant.initTime.startMeasure();this._openState.set("opening");const r=this._params.assistantService,o=r.createIntegration({gnar:this._params.gnar,felog:this._felog,readersAttentionFeature:this._params.readersAttentionFeature,snippetsFeature:this._params.snippetsFeature,shortenItFeature:this._params.shortenItFeature,experimentClient:this._params.experimentClient});if(!o)return this._log.warn("tried to open assistant with checking service not initialized"),s.cancelMeasure(),void this._openMeasure.cancelMeasure();null===(i=(t=this._params).onOpen)||void 0===i||i.call(t,o),this._integration=o;const l=(0,n.pipe)(O.fromNullable(e.type===d.WT.card?e.alertId:null),O.map(fa.wQ.Id.create)),c=O.isSome(o.engine.sduiEngine)?(0,n.pipe)(Re.unsafeGet(o.engine.sduiEngine),(({sduiBufferService:e,sduiFeedbackService:t,sduiPopoverManager:i})=>((e,t,i,a,s)=>{const r=(0,n.pipe)(e.capiEvents,ke.h(Ln.h.is("sdui_add","sdui_remove","sdui_update")),ke.h((e=>"sdui_remove"===e.kind||!k.D1.InlineCard.isInlineCard(e.sdui)))),o=new Rn.A(t,r,i,s),l=new Fn._(o.state);return{sduiBufferService:e,sduiFeedbackService:a,sduiManager:o,sduiFeedManager:l,dispose:()=>{o.dispose(),l.dispose()}}})(e,o.engine.alertsList.state,o.engine.getByRawAlertId,t,i)),(e=>{const t=As(o.engine,o.denaliViewAdapter,r.sidebarEvents,this._assistantPopupIsReady,this._params.contentScriptState,this._params.contentScriptActions,this._params.gnar,this._params.domain,a,this.close,this._params.assistantService.positionModel,this._params.alertProcessor,this._params.checkingService,this._params.cardEvents,this._params.statisticsService,this._params.toneAIFeature,(()=>this._params.envFactory()),this._params.experimentClient,this._params.userEngagedByAlertsAcceptedService,this._params.emogenieService,e,this._params.browser,O.fromNullable(this._params.proofitFeature),this._params.assistantService.selectedHighlightsTracker,this._params.assistantService.isTextFieldEmpty,this._params.dapiActions,this._params.snippetsFeature,this._felog);return{...t,dispose:()=>{t.dispose(),e.dispose()}}})):(0,m.n)(o.engine,o.denaliViewAdapter,o.document.settings.lens("selectedLens"),this._params.emogenieService,O.fromNullable(this._params.readersAttentionFeature),this._params.shortenItFeature,this._params.toneAIFeature,this._params.ethicalAIFeature,this._params.snippetsFeature,O.fromNullable(this._params.proofitFeature),r.sidebarEvents,this._assistantPopupIsReady,l,this._params.contentScriptState,this._params.contentScriptActions,this._params.gnar,this._params.statisticsService,this._params.domain,a,this.close,this._params.assistantService.selectedHighlightsTracker,this._params.assistantService.isTextFieldEmpty,this._params.assistantService.positionModel,this._params.alertProcessor,this._params.cardEvents,this._params.browser,this._params.layout.assistant,(()=>this._params.envFactory()),this._params.userEngagedByAlertsAcceptedService,this._params.dapiActions);this._subs.push(Vn(c,e)),c.isSingleCardAssistant&&this._subs.push(c.cardsViewModel.actionEvents.pipe(ke.h(Mn.t.isSduiCardAction),ke.h((e=>e.sourceId===k.D1.Proofit.ID)),A.U((e=>Bn(e.actions,c.sduiEngine.sduiFeedManager.currentFeed))),ke.h((e=>e.length>0))).subscribe((()=>{c.gnar.proofitButtonClick("assistant_header")}))),this._initPerformance=s.endMeasure(),this._viewModels.set(c)}},this.close=()=>{var e,t,i,a;null!==this._viewModels.get()&&(this._trackAssistantClose(),(0,n.pipe)(O.fromNullable(this._integration),O.chain((e=>e.engine.sduiEngine)),O.map((()=>this._viewModels.get())),O.map((e=>e.sduiCardsViewModel.onAssistantClose()))),null===(t=(e=this._params).onClose)||void 0===t||t.call(e),this._openState.set("closed"),null===(i=this._integration)||void 0===i||i.dispose(),this._integration=null,null===(a=this._viewModels.get())||void 0===a||a.dispose(),this._viewModels.set(null))},this._asyncReadyCbSub=null,this._getReadyFn=()=>{const e=this._felog.assistant.renderTime.startMeasure();return(t,i,a)=>{const s=e.endMeasure();let r;if((0,Ge.kG)(!!this._openMeasure,"Expected Assistant to be open"),a)this._openMeasure.cancelMeasure();else{const e=this._openMeasure.endMeasure();r=null==e?void 0:e.duration,this._initPerformance&&s&&e&&e.duration>500&&this._log.warn("assistant popup took too long to open:",{init:this._initPerformance.duration,render:s.duration,total:e.duration})}this._asyncReadyCbSub=In.E.schedule((()=>{this._openState.set("open"),this._assistantPopupIsReady.next(),this._trackAssistantOpen(t,r),this._trackAssistantDrag(t,i)}))}},this._applyIframeOffset=e=>{var t,i;const a=null===(i=(t=this._params).getCustomOffset)||void 0===i?void 0:i.call(t);return a?{...e,size:{width:a.width,height:a.height},client:{...e.client,left:a.left+e.client.left,top:a.top+e.client.top},offset:{...e.offset,left:a.left+e.offset.left,top:a.top+e.offset.top},page:{...e.page,left:a.left+e.page.left,top:a.top+e.page.top}}:e}}get view(){const e=this._params.experimentClient.isGateEnabled(E.K.ExtensionA11ySingleCardAssistantDragging);return this._viewModels.pipe(ge.w((t=>null===t?fs.of(null):I.aj([xn.R(self,"resize").pipe(Ee.O(null)),this._maxHeight]).pipe(Z.M(this._params.layout.textField.rect.behavior),Z.M(I.aj([this._params.layout.gbutton.positionBehavior,this._params.layout.gbutton.sizeBehavior]).pipe(A.U((([e,t])=>{const i=t.draggable?t.width:t.heightAndWidth,a=t.draggable?t.height:t.heightAndWidth;return{top:e.draggable?e.client.top:e.client.top-a,left:e.draggable?e.client.left:e.client.left-i,width:i,height:a}})))),A.U((([[[i,a],s],r])=>{const n=this._applyIframeOffset(s),l=this._getReadyFn();let c;const d="test"===this._params.experimentClient.getTreatment(pe.p.SingleCardAssistantNextToTextField);let p;return c=d?{...n.client,...n.size}:r,e&&(p=e=>{this._maxHeight.set(e)}),t.isSingleCardAssistant?o.createElement(on,{isAccessible:e,anchor:d?"textField":"GButton",alignmentRect:c,viewModels:t,onDomRectChange:e=>{this._domRect.set(e)},onMaxHeightChange:p,experimentClient:this._params.experimentClient},o.createElement(An,{viewModels:t,height:this._height,ready:l,maxHeight:e?a:void 0,domRect:this._domRect.view(),experimentClient:this._params.experimentClient})):o.createElement(an,{textFieldRect:n,gButtonRect:r,viewModels:t,draggableGButtonType:this._params.draggableGButtonType},o.createElement(Yr,{viewModels:t,experimentClient:this._params.experimentClient,emogenieService:this._params.emogenieService,height:(0,u.Y)(t,n).pipe(Tn.R(this._assistantPopupIsReady.asObservable()),ce.b(x.wW(this._height))),ready:l,OuterElementsPortalSource:this._params.OuterElementsPortalSource}))}))))))}get activeView(){return this._viewModels.pipe(ge.w((e=>{var t;return(null==e?void 0:e.isSingleCardAssistant)?fs.of(null):null!==(t=null==e?void 0:e.assistantLayoutViewModel.activeView)&&void 0!==t?t:fs.of(null)})))}dispose(){var e;this.close(),this._subs.dispose(),null===(e=this._asyncReadyCbSub)||void 0===e||e.unsubscribe()}_trackAssistantOpen(e,t){var i,a;const s=this._viewModels.get();if(null!==s){const r=s.isSingleCardAssistant?{top:0,left:0}:s.positionViewModel.initialPositionOffset,{statisticsService:n}=this._params,o=n.alertCounts.get(),l=0===r.top&&0===r.left?s.isSingleCardAssistant||"default"===s.assistantLayoutViewModel.layout.name?"smart":"hardcoded":"sticky",d=s.isSingleCardAssistant?"default":s.assistantLayoutViewModel.activeView.get().type;this._params.gnar.assistantPopupShow(d,this._height.get(),e.get().left,e.get().top,o.unmutedCapiAlerts,o.filter((e=>c.S.isCapiAlert(e)&&e.outcome===ue.TC.clarity)).visibleNotInlineCapiAlerts,o.visibleInlineCapiAlerts,o.filter((e=>c.S.isCapiAlert(e)&&"priority"===e.assistantView)).unmutedCapiAlerts,n.wordsCount.get(),l,null!==(a=null===(i=this._params.checkingService)||void 0===i?void 0:i.sessionUuid)&&void 0!==a?a:"",void 0,t,n.generalScore.get())}}_trackAssistantClose(){var e;const{statisticsService:t}=this._params,i=t.alertCounts.get(),a=this._viewModels.get(),s=(null==a?void 0:a.isSingleCardAssistant)?"default":null!==(e=null==a?void 0:a.assistantLayoutViewModel.activeView.get().type)&&void 0!==e?e:h.a.Type.default;this._params.gnar.assistantPopupCloseButtonClick(s,i.unmutedCapiAlerts,i.filter((e=>c.S.isCapiAlert(e)&&e.outcome===ue.TC.clarity)).visibleNotInlineCapiAlerts,i.visibleInlineCapiAlerts,i.filter((e=>c.S.isCapiAlert(e)&&"priority"===e.assistantView)).unmutedCapiAlerts,void 0)}_trackAssistantDrag(e,t){const i=e.get();let a=i;this._subs.push(t.pipe(Gr.G(),ke.h((([e,t])=>e&&!t))).subscribe((()=>{const t=e.get();Jr.E9.l1Distance(t,a)<10||(this._params.gnar.assistantPopupDrag(t.left,t.top,this._height.get(),i.left,i.top),a=t)})))}}var Un=i(23167),Dn=i(30675),Hn=i(7177),Gn=i(30627),jn=i(99111),Wn=i(41127);class zn{constructor(e,t,i,a,s,r,n,o,l,c){this.connectionState=e,this.gnar=t,this.user=i,this._hoverProvider=a,this.document=s,this.formattingService=r,this.denaliViewAdapter=n,this.capiProxy=o,this.engine=l,this.experimentClient=c,a.setAssistantHover(n.highlightHoverProvider)}static create(e){var t;const i=new Dn.t(e.highlights,e.textObserver,e.replacementService,e.layout,e.scroller,e.selectedHighlightsTracker,void 0,e.requestAwaitService,null===(t=e.formattingService)||void 0===t?void 0:t.get()),a=Gn.p.create(e.checkingService.get(),e.checkingServiceInitialState,e.alertsTransformer,e.alertProcessor,e.sidebarEvents,e.customEventsFilter),s=(0,jn.r)(a,i,e.document.settings.lens("context"),(()=>{var t,i;return null!==(i=null===(t=e.getExistingAlerts)||void 0===t?void 0:t.call(e))&&void 0!==i?i:(0,Hn.q)(e.alertProcessor)}),e.textObserver,(()=>e.checkingServiceInitialState.value.lastStart),e.readersAttentionFeature,e.shortenItFeature,e.snippetsFeature,e.sduiBufferService,e.sduiPopoverManager,e.felog,e.experimentClient,(t=>t.forEach((t=>e.alertProcessor.removeAlert(t,{_tag:Wn.i.alertAccepted})))));return new zn(e.connectionState,e.gnar,e.user,e.hoverProvider,e.document,e.formattingService,i,a,s,e.experimentClient)}dispose(){this.capiProxy.dispose(),this.denaliViewAdapter.dispose(),this.engine.shutdown(),this._hoverProvider.removeAssistantHover()}}var qn=i(26035),Kn=i(74789);class Zn{constructor({layout:e}){this._scroller=(0,qn.t)({scrollToMarkRect(t,i){(0,Kn.W)(e,t,null==i?void 0:i.paddingTop)},scrollToRange(){}})}scrollToMark(e,t){return this._scroller.scrollToMark(e,t)}}var Qn=i(77281);class Yn{constructor(e){this._params=e,this.sidebarEvents=new oe.xQ,this.hoverProvider=new Un.f(this._params.hoverProvider),this.selectedHighlightsTracker=this._params.highlights.getSelectedHighlightsTracker({textField:this._params.originalTextField,selectionService:this._params.selectionService}),this.positionModel=((e,t,i,a)=>{const s=t.view("page","domain").get(),r=(0,Qn.U)(e,s),n=i.view((({widgetOffset:e})=>null!=e?e:Jr.E9.zero));return{initialPositionOffset:n,updateInitialPositionOffset:e=>{Jr.E9.equals(e,n.get())||a.field.patchFieldSettings({fieldId:r,fieldSettings:{widgetOffset:e}})}}})(this._params.originalTextField,this._params.state,this._params.fieldSettings,this._params.actions),this.isTextFieldEmpty=this._params.textObserver.contentChanges.async.pipe(A.U((e=>""===e.newText.trim())),_.x()),this._checkingService=null}setCheckingService(e){this._checkingService=e}getCheckingServiceState(){var e;return null===(e=this._checkingService)||void 0===e?void 0:e.state.value}createIntegration(e){var t,i;const{layout:a,highlights:s,textObserver:r,replacementService:n,alertProcessor:o,state:l,document:c,requestAwaitService:d,formattingService:u,sduiBufferService:p,sduiPopoverManager:m}=this._params;if(null==this._checkingService)return null;const h=null===(i=(t=this._params).getCheckingServicePreviousState)||void 0===i?void 0:i.call(t);h&&(this._checkingService.state.value=h);const g=this._params.createAssistantScroller?this._params.createAssistantScroller():new Zn({layout:a}),{user:f}=l.get();return zn.create({layout:a,alertProcessor:o,connectionState:l.view((e=>e.connection)),highlights:s,textObserver:r,replacementService:n,checkingService:this._checkingService.lazyCheckingService,checkingServiceInitialState:this._checkingService.state,gnar:e.gnar,felog:e.felog,user:{isPremium:f.premium,isAnonymous:f.anonymous,experiments:f.experiments,customFields:f.customFields,isGrammarlyEmployee:fi.n5.isGrammarlyEmployee(f),isTestUser:fi.n5.isTestUser(f),isFreeTrial:fi.n5.isFreeTrial(f)},hoverProvider:this.hoverProvider,selectedHighlightsTracker:this.selectedHighlightsTracker,scroller:g,sidebarEvents:this.sidebarEvents,document:c,alertsTransformer:this._params.alertsTransformer,requestAwaitService:d,formattingService:u,getExistingAlerts:this._params.getExistingAlerts?()=>this._params.getExistingAlerts?this._params.getExistingAlerts():null:void 0,readersAttentionFeature:e.readersAttentionFeature,shortenItFeature:e.shortenItFeature,snippetsFeature:e.snippetsFeature,experimentClient:e.experimentClient,sduiBufferService:p,sduiPopoverManager:m,customEventsFilter:this._params.customEventsFilter})}dispose(){var e;null===(e=this._checkingService)||void 0===e||e.state.dispose()}}},99111:(e,t,i)=>{i.d(t,{r:()=>Z});var a=i(57050),s=i(35214),r=i(40327),n=i(2050),o=i(73353),l=i(21729),c=i(5114),d=i(83078),u=i(51072),p=i(38983);var m=i(54696),h=i(75099),g=i(75982),f=i(55649),v=i(25938),b=i(80358),w=i(84966),y=i(34101),S=i(6488),k=i(79227),E=i(74660),C=i(68169),A=i(95362),_=i(5008),I=i(43320),x=i(35301),T=i(85654),M=i(4390),R=i(55360),F=i(9922),L=i(67434),P=i(41398),N=i(2834),B=i(78674),V=i(77176),O=i(98403),U=i(93508),D=i(16118),H=i(95195),G=i(95574),j=i(71249),W=i(92843),z=i(31903),q=i(17771),K=i(9205);const Z=(e,t,i,E,M,U,D,W,Z,Y,$,X,J,ee)=>{const te=f.Y.create("createEngine"),ie=new F.w.Keeper,ae=function(e,t,i){const s=p.h.create(c.none),n=p.h.create(c.none);return{score:p.h.create(c.none),scoreStatus:p.h.create(c.none),title:p.h.create(void 0),textInfo:p.h.create(c.none),checkingState:p.h.create(e.checkingState),asyncChecksState:p.h.create(e.asyncChecksState),context:i,contextCompleteness:i.view(l.j.calculateCompleteness),updateContext:e=>{const t=!o.R$.eq.equals(i.get(),e);return i.set(e),t},defaultContext:s,updateDefaultContext:e=>{const t=!(0,r.pipe)((0,a.bc)([s.get(),e],d.map2(o.R$.eq.equals)));return s.set(e),t},documentText:t.getText(),documentLength:p.h.create({full:t.getTextLength(),trimmed:t.getTextLength()}),counters:p.h.create(l.dM.group.empty),calculateStats:()=>u.toPromise(e.requestDocStats).then((e=>(n.set(c.some(e)),e))),recentDocumentStats:n}}(e,t,i),se=t.changes.pipe(L.R(((e,i)=>v.RI.isReset(i)?(0,r.pipe)(i.text,H.fold((()=>t.getText()),a.yR)):v.RI.isDelta(i)?(0,r.pipe)(v.RI.resFromText(e).compose(i),G.flatMap((e=>e.text)),H.fold((()=>t.getText()),a.yR)):e),""));ie.push(e.events.pipe(P.M(se),N.b((([e,t])=>{if("alert_received"===e.kind){const i=(0,h.IM)(e.alert,g.Q.fromString("fake"));m.$.isConsistentWithText(i,t)||(X.alerts.inconsistentAlertWithText("assistant"),(0,n.i)(te,i,t,"logging"))}}))).subscribe(),e.events.pipe(N.b((t=>{ae.checkingState.set(e.checkingState),b.h.is("text_info")(t)?ae.textInfo.set(c.some(t.data)):b.h.is("finish")(t)?(ae.score.set(t.score),ae.scoreStatus.set(t.scoreStatus)):b.h.is("feedback_ack")(t)?((0,r.pipe)(t,c.fromPredicate(b.h.isUserFeedbackWithGeneralScore),c.map((e=>e.outcomeScores.GeneralScore)),c.map((e=>Math.trunc(100*e))),d.tap((e=>ae.score.modify((0,a.ls)(c.map((t=>({...t,rank:e}))),d.orElse(c.some({errorRateScore:0,rank:e}))))))),(0,r.pipe)(t,c.fromPredicate(b.h.isUserFeedbackWithScoreStatus),c.map((e=>e.scoreStatus)),d.tap((e=>ae.scoreStatus.set(c.some(e)))))):b.h.is("session_started")(t)&&ae.updateDefaultContext(t.defaultDocumentContext)}))).subscribe(),e.events.pipe(N.b((e=>{(b.h.is("session_started")(e)||b.h.is("finish")(e))&&(0,r.pipe)(Y,c.map((t=>t.pushStartFinishEvent(e))))}))).subscribe(),M.contentChanges.async.pipe(B.b(300),V.U((e=>e.newText)),V.U((e=>({full:e.length-1,trimmed:e.trim().length}))),N.b(O.wW(ae.documentLength))).subscribe()),(0,r.pipe)(U(),c.map((e=>{ae.updateDefaultContext(o.R$.parseDefault(e.defaultDocumentContext))})));const re=new R.Xr,ne=new A.Ek,oe=(0,s.fold)((0,s.getEndomorphismMonoid)())(j.oA([c.fromNullable(null==D?void 0:D.takeawaysFeedbackStore.addFeedbackToRawAlertTransformer),c.some((e=>(0,r.pipe)(W.get(),c.fold((()=>e),(t=>t.addStateToRawAlertTransformer(e)))))),c.some((e=>(0,r.pipe)(Z.get(),c.fold((()=>e),(t=>t.addSnippetsTriggerToAlert(e))))))])),le=new y.a,ce=new C.SC(re,ne,(()=>t.getContents().delta),e.events,e,ae.counters,oe,void 0,le),de=S.e.create(ce.state),ue=new k.k(de,ce._ops);ie.push(I.R.init(I.R.UserTextChangesSync.create(t),e.events,_.n.ignoreTEResult(e),_.n.ignoreResult(re),ne,_.A.merge([ce])).subscribe()),e.loadAlerts(E()),ce.flushAlerts(),J.isGateEnabled(K.K.DontSyncAlertApplicationsWithInlineMode)||ie.push(Q(ce.state,ee));const pe=c.some(x.J.CategoriesModel.create(e.events,e,ce.state,ue,w.JW.ScopeType.GLOBAL)),me=c.some(T.k.create(de)),he=(0,r.pipe)((0,q.g)(c.option)(Y,$),c.map((([t,i])=>({sduiBufferService:t,sduiFeedbackService:new z.Q(e),sduiPopoverManager:i}))));return{alertsList:ce,alertsReader:de,alertsService:ue,positionManager:re,getByRawAlertId:le.getByRawAlertId.bind(le),sessionModel:ae,mutedAlertsCategoriesModel:pe,mutingAlertsReader:me,shutdown:()=>{ce.dispose(),ie.dispose()},sduiEngine:he}},Q=(e,t)=>e.pipe(U.O(M.p.empty),D.G(),V.U((([e,t])=>M.p.diff(e,t))),V.U((e=>(0,r.pipe)(e,W.v.reduce([],((e,t)=>(0,r.pipe)(t.alert,c.fromPredicate((e=>E.bZ.isApplied(e))),c.map((e=>e.rawId)),c.getOrElse((()=>c.none)),c.fold((()=>e),(t=>[...e,t])))),a.yR,a.yR))))).subscribe((e=>{e.length&&t(e)}))},28682:(e,t,i)=>{i.d(t,{aU:()=>ot,X5:()=>lt,n:()=>ct});var a,s=i(57050),r=i(35214),n=i(5114),o=i(40327),l=i(44730),c=i(95294),d=i(25952),u=i(7737),p=i(98325),m=i(4903),h=i(31470),g=i(26109),f=i(2844),v=i(92693),b=i(81301),w=i(77176),y=i(28043),S=i(9922),k=i(16118),E=i(22232),C=i(83078),A=i(38983);!function(e){e.equals=(e,t)=>"score"in e&&"score"in t?e.score===t.score:e.type===t.type}(a||(a={}));class _{constructor(e,t,i,r,l,c){this._sessionModel=e,this._layoutVM=t,this._modalManager=i,this._user=r,this._gnar=l,this._closeAssistant=c,this.showSetGoalsActionButton=A.h.create(!0),this.showSettingsActionButton=A.h.create(!0),this.close=()=>{this._closeAssistant()},this.score=f.aj([this._sessionModel.score.view(n.map((e=>({capiScore:e.rank})))),this._sessionModel.checkingState]).pipe(w.U((([e,t])=>(0,o.pipe)(e,n.map((e=>({...e,isLoading:"idle"!==t}))))))),this.summary=this._sessionModel.textInfo.view((0,s.ls)(n.chain((e=>e.messages)),n.map((e=>e.assistantHeader)),n.getOrElse((()=>"Looking good so far")),(e=>({content:e})))),this.logoScore=(0,f.aj)([this._layoutVM.activeView,this.score]).pipe(w.U((([e,t])=>(0,o.pipe)(t,n.fold((()=>({type:"logo"})),(t=>e.type!==v.a.Type.default?{type:"logo"}:{type:"score",score:t}))))),y.x(a.equals)),this.visibility=this._layoutVM.activeView.view((e=>e.type===v.a.Type.default?"visible":"hidden")),this._subs=new S.w.Keeper,this._trackHeaderMessageChanges(),this._trackToShowActionButtons()}open(e){if("setGoals"===e)this._subs.push(this._modalManager.show(b.Iy.setGoals("user")).subscribe());else(0,E.vE)(e)}_trackHeaderMessageChanges(){const e=this.summary.pipe(k.G()).subscribe((([e,t])=>{var i,a;this._gnar.assistantHeaderMessageUpdate(e.content,t.content,null===(i=(0,o.pipe)(this._sessionModel.textInfo.get(),n.toUndefined))||void 0===i?void 0:i.wordsCount,null===(a=(0,o.pipe)(this._sessionModel.score.get(),C.orUndefined))||void 0===a?void 0:a.rank)}));this._subs.push(e)}_trackToShowActionButtons(){const e=this._user.subscribe((e=>{e.isAnonymous?(this.showSetGoalsActionButton.set(!1),this.showSettingsActionButton.set(!1)):(this.showSetGoalsActionButton.set(!0),this.showSettingsActionButton.set(!0))}));this._subs.push(e)}dispose(){this._subs.dispose()}}var I=i(59881),x=i(42466),T=i(66896),M=i(98403),R=i(94895);class F{constructor(e,t,i,a,s,r,l){this._lensPreviewVM=e,this._layoutVM=t,this._readersAttentionVM=i,this._emogenieService=a,this._session=s,this._readersAttentionPredictionCardState=r,this._gnar=l,this._subs=new S.w.Keeper,this.previewState=A.h.create({kind:x.fA.hidden}),this.previewFlow=R.Z.fromSideEffect((e=>{switch(e.action.key){case"tone":{const e=this._emogenieService.viewState.view("prevalentEmotion").get();return e&&this._gnar.emogeniePredictionButtonClick(e.name),this._layoutVM.pushActiveView({type:v.a.Type.emogenie})}case"readersAttention":return this._readersAttentionVM.openPanel({type:v.a.ReadersAttention.Caller.Type.predictionWidget});default:(0,E.vE)(e.action)}}),this.previewState),this._previewState=(0,o.pipe)(f.aj([this._emogenieService.viewState.view((e=>n.fromNullable(e.settings.hiddenReport?void 0:e.prevalentEmotion))),this._emogenieService.viewState.view("brandToneOffImageUrl"),this._readersAttentionPredictionCardState,this._session.documentLength,this._lensPreviewVM.getLens(T.R.SpecialId.PredictionEmogenie),this._lensPreviewVM.getLens(T.R.SpecialId.PredictionTakeaways)]),w.U((([e,t,i,a,s,r])=>(n.isSome(e)||n.isSome(i))&&a.trimmed>0?{kind:x.fA.visible,tone:(0,o.pipe)(e,n.map((e=>({emotion:e,alertsCount:s.count,brandToneOffImageUrl:t})))),readersAttention:(0,o.pipe)(i,n.map((e=>({...e,alertsCount:(0,o.pipe)(i,n.map((e=>e.alertsCount)),n.getOrElse((()=>r.count)))}))))}:a.trimmed>0?{kind:x.fA.zero}:{kind:x.fA.hidden}))),this._subs.push(this._previewState.subscribe(M.wW(this.previewState)))}dispose(){this._subs.dispose()}}var L=i(89131),P=i(95747),N=i(17771),B=i(48015),V=i(74660),O=i(85985),U=i(14601),D=i(15646),H=i(35416);class G{constructor(e,t,i,a,r){this._feature=e,this._assistantLensState=t,this._assistantCardActions=i,this._getAlertById=a,this._getActiveAlert=r,this._subs=new U.w,(0,o.pipe)(this._feature,C.tap((e=>{var t,i;this._subs.add((t=this._assistantCardActions,i=e=>this._getAlertById(e),t.pipe(O.h(D.lY.isTakeawayAction)).pipe(w.U((e=>(0,o.pipe)(i(e.alertId),n.chain((t=>N.Y(n.option)({id:n.some(t.id),rawId:V.bZ.getRawId(t),isLikelyToRead:(0,o.pipe)(t.extraProperties.takeaway,n.map((e=>e.isLikelyToBeRead))),score:(0,o.pipe)(t.extraProperties.takeaway,n.map((e=>e.score))),textRange:n.fromNullable(t.getHighlightRanges()[0]),action:n.some(e)}))),C.orUndefined))),O.h(B.fQ))).subscribe((t=>{e.tracking.onTakeawayUserAction(t.isLikelyToRead,t.score,t.action,t.textRange)}))),this._subs.add(function(e,t,i){return e.pipe(w.U(H.nL.getActiveAlert(i)),w.U(n.map((e=>e.id)))).pipe(w.U(C.orUndefined),O.h(B.fQ),y.x(),w.U((0,s.ls)(t,n.chain((e=>(0,o.pipe)(e.extraProperties.takeaway,n.map((({score:t})=>({score:t,textRange:e.getHighlightRanges()[0]})))))),C.orUndefined)),O.h(B.fQ))}(this._assistantLensState,(e=>this._getAlertById(e)),this._getActiveAlert).subscribe((t=>{e.tracking.onKeyTakeawayCardShow(t.score,t.textRange)})))})))}dispose(){this._subs.unsubscribe()}}var j=i(62623),W=i(13299),z=i(66866),q=i(66310),K=i(91402),Z=i(40151),Q=i(76974),Y=i(78674),$=i(60797),X=i(41398),J=i(95195);function ee(e,t,i,a,s){return{id:"changeAlertEffect",when:T.R.isWithAlertsId,what:H.nL.Effect.SwitchAlert.create(e.actionEvents.pipe(q.w((e=>{const r=t.get();if(!H.nL.hasCards(r))return K._(new E.ej("Cannot update state without cards"));switch(e.type){case D.lY.Type.alertMinicardButtonClick:return(0,o.pipe)(i.getRegistered(e.alertHighlight.alert.id),n.fold((()=>(s.warn("somehow we got click on non registered alert",e.alertHighlight.alert),Z.E)),(()=>Q.of(e.alertHighlight))));case D.lY.Type.cardMatchesNavigationButtonClick:const t=e.transitionTo;switch(t.kind){case"anotherAlert":return(0,o.pipe)("right"===e.direction?a.nextAlert(t.card):(0,o.pipe)(a.prevAlert(t.card),C.orElse(a.anyRegisteredAlert(t.card))),n.fold((()=>Z.E),(e=>Q.of({alert:e,highlightIndex:0}))));case"sameAlert":return(0,o.pipe)(i.getRegistered(t.card.activeAlert.id),n.fold((()=>Z.E),(()=>Q.of({alert:t.card.activeAlert,highlightIndex:t.highlightIndex}))));default:return(0,E.vE)(t)}default:return Z.E}})),w.U((e=>({alertHighlight:e,alertSource:V.l$.sidebar,options:{order:"lensOrder"}})))))}}function te(e,t,i){const a=e.pipe(O.h(H.nL.hasCards),Y.b(0),O.h((e=>e.currentLens.items.size>0&&n.isNone(H.In.getActiveItem(e.currentLens))&&i.get())),w.U((e=>(0,o.pipe)(e.currentLens.items.getAt(0),n.chain(m.O.checksFeedItemsMapper((e=>n.some(e.activeAlert)),(e=>n.some(e.activeAlert)),(()=>n.none),(()=>n.none),(()=>n.none))),C.tap((()=>t.set(n.some(W.CV.skip))))))),$.oA,O.h((e=>e.state.type===V.bZ.State.Type.REGISTERED)),y.x());return{id:"focusFirstCardSideEffect",when:e=>e!==T.R.SpecialId.PredictionTakeaways&&e!==T.R.SpecialId.PredictionEmogenie,what:H.nL.Effect.SwitchLens.create(a.pipe(X.M(e),w.U((([e,t])=>({lensId:t.currentLens.id,alertSource:V.l$.text,options:{order:"lensOrder",toFocus:H.nL.Effect.FocusBehavior.focusAlert({alert:e,highlightIndex:0})}})))))}}function ie(e,t,i){const a=e.pipe(w.U((e=>a=>e.type===z.ay.Type.AppliedAlertAnimationFinished&&a.currentLens.meta.filter(e.alert)&&H.nL.hasItems(a)?a.patch({currentLens:(0,o.pipe)(J.tryCatch((()=>V.bZ.isApplicableAlert(e.alert)?t.finishApplyAnimation([e.alert])(a.currentLens):a.currentLens),(e=>i.error("could not update lens state on applied animation finish",e))),J.getOrElse((()=>a.currentLens))),alertSource:e.alert.state.source}):a)));return{id:"onAlertApply",when:s.W8,what:H.nL.Effect.Applicator.create(a)}}function ae(e,t){return{id:"lensChangeEffect",when:s.W8,what:H.nL.Effect.SwitchLens.create(e.pipe(X.M(t),O.h((([e,t])=>e.lensId!==t)),w.U((([e])=>({lensId:e.lensId,alertSource:V.l$.sidebar,options:{order:"lensOrder",toFocus:e.focusFirstCard?H.nL.Effect.FocusBehavior.focusFirst:H.nL.Effect.FocusBehavior.noFocus}})))))}}var se=i(34641),re=i(5920),ne=i(16892),oe=i(48521),le=i(6100),ce=i(55415);const de=(e,t)=>i=>(0,s.zG)(t,n.fold((()=>n.some({lens:i,newItem:n.none})),(t=>(0,s.zG)(e,n.fold((()=>n.some({lens:i,newItem:n.some(se.g.create(t,ne.s.PositionState.empty,oe.o.VisualState.initial({type:"rendered",clockwise:!0},!1)))})),(e=>(0,s.zG)(se.g.create(t,e.positionState,e.visualState),n.fromPredicate((t=>se.g.hashCodeOwnFields(t)!==se.g.hashCodeOwnFields(e))),n.map((e=>({lens:i,newItem:n.some(e)}))))))))));var ue=i(49435),pe=i(32952),me=i(19751),he=i(8125),ge=i(73975),fe=i(55649),ve=i(71249),be=i(84368);const we=fe.Y.create("ReadersAttentionItemSideEffects");function ye(e){return e.pipe(w.U((()=>s.yR)))}function Se(e,t){return e.pipe(O.h(be.Vl),w.U((e=>i=>i.patch({currentLens:(0,o.pipe)(i.currentLens.items.find((t=>t.id===e.id)),n.fold((()=>(we.error("Cannot focus non-existing ReadersAttentionItem."),i.currentLens)),(()=>(0,s.MZ)((0,o.pipe)(i.currentLens,t.selectItemById(e.id))))))}))))}class ke{constructor(e,t,i,a,r,o,l,c,d){this._cardActions=e,this._readersAttentionItemInfo=t,this._assistantLensState=i,this._checksFeedCapabilities=a,this._heatmapVisible=r,this._layoutViewModel=o,this._onDismiss=l,this._gnar=c,this._statistics=d,this._subs=new U.w,this.actions=new pe.xQ,this._relayBaseActions=this.actions.pipe(O.h((0,he.Kg)(D.eI.isStartTransitionTo,D.eI.isCompleteTransitionTo))).subscribe((e=>this._cardActions.next(e))),this._goToReadersAttentionView=this.actions.pipe(O.h(be.Q)).subscribe((e=>{this._gnar.attentionScoreFullCardSeeSuggestionsButtonClick(),this._layoutViewModel.pushActiveView({type:v.a.Type.readersAttention,caller:{type:v.a.ReadersAttention.Caller.Type.readersAttentionItem,item:e.item}})})),this._goToFeedbackView=this.actions.pipe(O.h(be.RJ)).subscribe((()=>{this._layoutViewModel.pushActiveView({type:v.a.Type.feedback})})),this._dismissItem=this.actions.pipe(O.h(be.l9)).subscribe((()=>{this._gnar.attentionScoreFullCardDismissButtonClick(),this._onDismiss()})),this._toggleHeatmapVisibility=this._assistantLensState.pipe(w.U((e=>(0,s.zG)(J.fromPredicate(H.nL.hasItems,(()=>e.currentLens.id))(e),J.map(H.nL.Prism.getLens().get),J.chain((e=>(0,s.zG)(e,H.In.getActiveItemOfType(se.m),J.fromOption((()=>e.id)),J.map((e=>e.id)))))))),me.skipBy(J.getEq(ge.yv,ge.yv))).subscribe(J.fold((e=>{e!==T.R.SpecialId.PredictionTakeaways&&this._heatmapVisible.set(!1)}),(()=>this._heatmapVisible.set(!0)))),this._activeCardOpenStats=null,this._trackOpenClose=this._assistantLensState.pipe(w.U((e=>(0,s.zG)(n.fromPredicate(H.nL.hasItems)(e),n.map(H.nL.Prism.getLens().get),n.chain(H.In.getActiveItemOfType(se.m)),n.fold(s.jv,s.W8)))),y.x()).subscribe((e=>{(0,s.zG)(this._readersAttentionItemInfo.get(),n.map((e=>ue.T.prism.reverseGet(e.attentionScore))),C.tap((t=>{const i=this._statistics.wordsCount.get();e?(this._gnar.attentionScoreFullCardShow(i,t),this._activeCardOpenStats={numWords:i,attentionScore:t}):this._activeCardOpenStats&&(this._gnar.attentionScoreFullCardHide(i,t,this._activeCardOpenStats.numWords,this._activeCardOpenStats.attentionScore),this._activeCardOpenStats=null)})))})),this._subs.add(this._relayBaseActions),this._subs.add(this._toggleHeatmapVisibility),this._subs.add(this._goToReadersAttentionView),this._subs.add(this._goToFeedbackView),this._subs.add(this._dismissItem),this._subs.add(this._trackOpenClose)}getApplicatorEffects(){return e=this._readersAttentionItemInfo,t=this.actions,i=this._checksFeedCapabilities,(0,o.pipe)([[ye(e),"newReadersAttentionInfo"],[Se(t,i),"focusReadersAttentionItem"]],ve.UI((([e,t])=>({id:`readersAttentionFeedItem.effects.${t}`,when:T.R.isMainLens,what:H.nL.Effect.Applicator.create(e)}))));var e,t,i}dispose(){if(this._activeCardOpenStats){const e=this._activeCardOpenStats.numWords,t=this._activeCardOpenStats.attentionScore;(0,s.zG)(this._readersAttentionItemInfo.get(),n.map((e=>ue.T.prism.reverseGet(e.attentionScore))),C.tap((i=>{this._gnar.attentionScoreFullCardHide(this._statistics.wordsCount.get(),i,e,t)}))),this._heatmapVisible.set(!1),this._activeCardOpenStats=null}this._subs.unsubscribe()}}var Ee,Ce=i(54466);!function(e){const t=(e,t)=>e.pipe(O.h(D.lY.isCreateSnippetAction),w.U((({id:e})=>i=>{const a=(0,s.zG)(i.currentLens.items.update(e,t({type:"success",clockwise:!0})),J.fold((()=>i.currentLens.items),s.yR));return Ce.sU.itemsLens.set(a,i)})));e.applicatorEffects=(e,i)=>(0,s.zG)([[t(e,i),"suggestedSnippetSuccessEffect"]],ve.UI((([e,t])=>({id:`cardsViewModel.effects.${t}`,when:T.R.isWithAlertsId,what:H.nL.Effect.Applicator.create(e)}))))}(Ee||(Ee={}));var Ae=i(55563),_e=i(864),Ie=i(36689),xe=i(52098),Te=i(14592),Me=i(1050),Re=i(8901),Fe=i(56913),Le=i(51129),Pe=i(52622),Ne=i(84966),Be=i(13313),Ve=i(21619),Oe=i(54216),Ue=i(92485),De=i(91549),He=i(83167),Ge=i(20594),je=i(35607),We=i(20291),ze=i(34383),qe=i(33806),Ke=i(86775),Ze=i(11245),Qe=i(4890),Ye=i(73841),$e=i(89770),Xe=i(39920),Je=i(93265),et=i(88772),tt=i(93508),it=i(68425),at=i(24209),st=i(17343),rt=i(95574),nt=i(81531);const ot=e=>e.view((e=>(0,o.pipe)(n.fromPredicate(H.nL.hasItems)(e),n.map((e=>e.currentLens.items)),n.map((e=>e.filter((0,he.Kg)(m.O.isAlertCard,m.O.isAlertsBundle)))),n.map((e=>e.filter((e=>"rendered"===e.visualState.transition.type)))),n.fold((()=>null),(e=>e.values()))))).pipe(tt.O([]),O.h(B.Nf),k.G(),w.U((([e,t])=>{const i=new Set(e.map((e=>e.id)));return t.filter((e=>!i.has(e.id)))})),it.J()),lt=(e,t)=>e.alertClicked.pipe(w.U((e=>(0,o.pipe)(e,n.fold(s.gn,(e=>e.alert))))),O.h(B.fQ),X.M((e=>e.pipe(w.U((e=>H.nL.hasCards(e)&&T.R.isMainLens(e.currentLens.id)?m.O.getActiveItemWithAlert(e.currentLens):n.none)),w.U((e=>(0,o.pipe)(e,n.fold((()=>null),(e=>e.activeAlert)))))))(t)),O.h((([e,t])=>e.id!==(null==t?void 0:t.id))),w.U((([e,t])=>e))),ct=(e,t,i,a,f,S,E,x,R,N,U,K,Y,$,X,ne,oe,ue,me,ge,fe,ve,be,we,ye,Se,it,ct,dt,ut)=>{const pt=nt.C8.Logging.getLogger("view_models"),mt=A.h.create(Be.A.defaultState),ht=A.h.create(s.jv),gt=A.h.create(!1),ft=A.h.create(!1),vt=A.h.create(!1),bt=Le.n5.isFree($.view("user").get()),wt=e=>(0,he.W9)((()=>!ft.get()),(0,he.W9)((e=>!vt.get()||V.bZ.isInline(e)),e)),yt=Oe.t.create({...Oe.t.defaultLensFilters,[T.R.SpecialId.Priority]:V.bZ.belongsToPriorityLens,[T.R.SpecialId.AllAlerts]:(0,he.W9)(V.bZ.belongsToAllAlerts,(0,s.ff)(V.bZ.isTakeaway))},{...Oe.t.defaultTextFilters,[T.R.SpecialId.Closed]:s.jv,[T.R.SpecialId.Priority]:wt(V.bZ.belongsToPriorityLens),[T.R.SpecialId.AllAlerts]:wt((0,he.W9)(V.bZ.belongsToAllAlerts,(0,s.ff)(V.bZ.isTakeaway))),[T.R.SpecialId.PredictionTakeaways]:e=>ht.get()(e)}),St=at.T(ht,ft,gt,vt).pipe(st.h(M.PU)),kt=Be.A.get(e.alertsList.state,e.alertsList.lensesScores,yt).subscribe(M.wW(mt)),Et=new xe.t(mt.view("lenses"),yt,e.sessionModel.scoreStatus),Ct=(0,Ue.$y)((0,Pe.a)(t).getContents),At={features:new Set([Ge.IG.Features.showCardLabelInOutcomes]),cardLayoutDensityMode:Qe.j.Density.minimal,shouldAnimateAlertApply:Ge.IG.Default.shouldAnimateAlertApply,cardVisualMode:A.h.create(Qe.j.CardVisualMode.RegularLightMode)},_t=(0,Ge.Ls)(Ct,e.alertsReader,At,(()=>Q.of(n.none)),e.mutingAlertsReader),It=De.R.ItemFactory.create(Ct,e.mutingAlertsReader,At,(()=>Q.of(n.none))),xt=(0,Ze.U)(Ct,e.alertsReader,At,ze.T.ordAlert),Tt=A.h.create(ze.D.empty()),Mt=A.h.create(n.none),Rt=A.h.create(16),Ft=(0,d.q)((()=>Ht.get().currentLens.id),(()=>Mt.get()),(()=>Rt.get())),Lt=m.O.getCapabilities(_t,It,xt,e.alertsReader,Ct,Tt,(()=>Ht.get().currentLens.id),Ft),Pt=new Xe.gi(m.O.equatable.structEq,m.O.defaultOrd),Nt=(0,Xe.is)(_t,Lt),Bt=new Xe.ad((e=>e.id===T.R.SpecialId.Priority),new qe.c(xt,Tt,e.alertsReader,(e=>e.id===T.R.SpecialId.PredictionTakeaways),Pt,m.O.equatable.structEq),m.O.equatable.structEq,m.O.bundlesOrd),Vt=(0,Xe.kn)(It,At,(e=>e===T.R.SpecialId.Priority),(0,qe.E)(xt,Tt,e.alertsReader,(e=>e===T.R.SpecialId.PredictionTakeaways),Nt,Lt),Lt),Ot=Je.v.createWithInitialAlerts(Bt,Vt,yt,(0,s.ff)(V.bZ.isMuted),Lt),Ut=new $e.oq(e.alertsList.state,e.alertsReader,mt.view("lenses"),e.positionManager,Et,Ot,Vt,Lt,yt),Dt=i.get(),Ht=A.h.create(Ut.emptyState(Dt).patch({alertSource:V.l$.sidebar})),Gt=Ht.view((e=>(0,o.pipe)(n.fromPredicate(H.nL.hasItems)(e),n.map((e=>H.nL.Prism.getLens().get(e))),n.filter((e=>e.id===T.R.SpecialId.PredictionTakeaways)),n.chain(H.In.getActiveItem)))).view(n.fold((()=>s.jv),(e=>t=>Lt.hasAlert(t.id)(e)))).subscribe(M.wW(ht)),jt=Ht.view((e=>(0,o.pipe)(n.fromPredicate(H.nL.hasItems)(e),n.map((e=>H.nL.Prism.getLens().get(e))),n.chain(H.In.getActiveItem),n.filter(se.m),n.fold(s.jv,s.W8)))).subscribe(M.wW(ft));U.next({kind:Ae.R.ChangeLens,selectedLens:Dt===T.R.SpecialId.Priority?"priority":"all"});const Wt=(0,He.u0)((()=>t.getCursor().index),Ut),zt=new Re.x(e.alertsList,Ht,3,ne),qt=new b.EQ(new Me.o(e.sessionModel,zt,me.get().isPremium,ne)),Kt=new _e.C(ct()),Zt=new Ce.Xx({flush:()=>t.flushChanges()},new pe.xQ,_t,e.alertsService,e.alertsReader,(()=>Promise.resolve()),(()=>Promise.resolve()),(0,o.pipe)(e.mutedAlertsCategoriesModel,n.map((e=>({model:e,openSuggestionsManagement:()=>self.open((0,Fe.Um)().suggestionsSettings)})))),n.some(g.B.getCardsViewModelSendToURLExperiment(Kt,ne)),(()=>!1),m.O.getActiveItemWithAlert,Lt,Ht,Kt,{bufferTransitions:!0,showGbPrompt:g.B.shouldShow(me.get())}),Qt=new u.y(Zt.actionEvents,ne,e.alertsReader),Yt=new v.D(ne,fe,ve,Se,it),$t=new P.X(f,Yt,e.alertsList.state,e.alertsReader,Ht),Xt=new F(Et,Yt,$t,a,e.sessionModel,$t.predictionCardState,ne),Jt=new p.WY(Ht,Xt,zt,Lt,ne,bt),ei=new je.o((()=>J.right(void 0))),ti=Jt.upgradeHookExpanded.pipe(w.U((e=>e&&bt)),y.x()).subscribe(M.wW(gt)),ii=(0,Te.xl)(Ht,yt,St,gt),ai=new Te.o$(e.alertsList,e.alertsReader,e.positionManager,e.alertsService,t,Ht,ii,m.O.getActiveItemWithAlert,K,!0,gt),si=(0,W.hp)(Ht,ai,A.h.create(16),ei,t,pt),ri=new pe.xQ,ni=Ht.pipe(w.U((e=>e.currentLens.id))),oi=$t.checklist.subscribe(M.wW(Tt)),li=new _(e.sessionModel,Yt,qt,me,ne,ge),ci=Yt.activeView.pipe(w.U((e=>e.type)),tt.O(v.a.Type.startupPlaceholder),k.G(),w.U((([e,t])=>e===v.a.Type.startupPlaceholder&&t===v.a.Type.proofitRequest))).subscribe(M.wW(vt)),di=Jt.cardListViewportHeight.subscribe(M.wW(Mt)),ui=new h._(Yt,ue,ne),pi=(0,o.pipe)(N,n.map((e=>new L.S(Yt,e,ge,ne)))),mi=new Ve.mN(t,Ht,ai,e.alertsReader,m.O.getActiveItemWithAlert,(t=>{const i=t.reduce(((t,i)=>(0,o.pipe)(e.alertsReader.getById(i.alert.id),n.chain(V.bZ.getRawId),C.tap((e=>t.set(e,i))),n.fold((()=>t),(()=>t)))),new Map),a=Array.from(i.keys()).map((e=>we.alerts.getAlertById(e))).filter(B.fQ);if(a.length){const e=a.reduce(((e,t)=>l.S.ordering.greaterThanOrEqual(t,e)?t:e));return n.fromNullable(i.get(Ne.wQ.Id.create(e.id)))}return n.none})),hi=ot(Ht),gi=lt(mi,Ht),fi=E.pipe(q.w(n.fold((()=>Z.E),(t=>t.initAssistantCardActionsProcessing(Zt.actionEvents,e.alertsReader,Ht,hi,gi))))).subscribe(),vi=x.pipe(q.w(n.fold((()=>Z.E),(t=>t.initCardActionsProcessing(Zt.actionEvents,e.alertsReader,hi,gi,Ht))))).subscribe(),bi=R.pipe(q.w(n.fold((()=>Z.E),(t=>t.initCardActionsProcessing(Zt.actionEvents,e.alertsReader,hi,Ht))))).subscribe(),wi=A.h.create((0,o.pipe)(Y,n.fold((()=>W.CV.skip),(()=>V.l$.text)),n.some)),yi=(0,o.pipe)(f,n.map((e=>new ke(Zt.actionEvents,e.feedItemInfo,Ht,Lt,e.heatmap.visible,Yt,(()=>e.onDismissFeedItem()),ne,oe)))),Si=[(0,Ie.A7)(mi,Ht,bt),(0,o.pipe)(z.EQ.focusMarkByActiveAlert(Ht,ai,e.alertsReader,m.O.getActiveFocusableItem,pt.getLogger("MarksEffects.focusMarkByActiveAlert")),H.nL.Effect.Producer.delayed(K)),ie(ai.events,Lt,pt.getLogger("createOnAlertApplySideEffect")),ee(Zt,Ht,e.alertsReader,_t,pt),te(Ht,wi,Jt.autoFocusEnabled),...Zt.getApplicatorEffects(),Jt.applicatorEffects,We.R7(Ht,ei,Lt,(0,s.MZ)(Zt.actionEvents),{cardsAroundActive:10,cardsBeyondViewport:10}),(0,o.pipe)((0,W.k9)(Ht,si,wi,m.O.getActiveAlignableItem,Lt),H.nL.Effect.Producer.delayed(K)),We.XU(Ht,ei,Lt),ae(ri,ni),Ce.dv.createSendActiveAlertFeedbacksEffect(Ht,m.O.getActiveItemWithAlert,e.alertsService,e.alertsReader,pt.getLogger("CardsViewModelEffects.createSendActiveAlertFeedbacksEffect")),Ke.G.getChecklistHandlerSideEffect(xt,$t.checklist,e.alertsReader,m.O.getActiveItemWithAlert,(e=>e===T.R.SpecialId.PredictionTakeaways)),...(0,o.pipe)(yi,n.fold((()=>[]),(e=>e.getApplicatorEffects()))),...Ee.applicatorEffects(Zt.actionEvents,Lt.transitionTo)],ki=A.h.create(T.R.SpecialId.AllAlerts),Ei=Ht.view((e=>e.currentLens.id)).pipe(O.h((e=>e===T.R.SpecialId.Priority||e===T.R.SpecialId.AllAlerts))).subscribe(M.wW(ki)),Ci=(0,He.VC)(Ut,Wt,ki,Lt),Ai=A.h.create(Y),_i=(0,He.Dv)((e=>T.R.isMainLens(e.currentLens.id)),Ci,Lt),Ii=new He.vM(e.sessionModel.checkingState,Ht),xi=(0,o.pipe)([(0,o.pipe)((e=>He.Py.whenShouldVerifyCurrentLens(m.O.getActiveItemWithAlert,Lt)(e)&&e.currentLens.id!==T.R.SpecialId.PredictionTakeaways),He.Py.behaviorToEffect((()=>n.some(H.nL.Effect.FocusBehavior.focusNext)))),(0,o.pipe)((0,he.W9)((()=>n.isSome(Ai.get())),He.Py.whenNoActiveCard),He.Py.behaviorToEffect((e=>(0,o.pipe)((e=>{const t=(0,n.fromPredicate)((0,he.Kg)(m.O.isAlertCard,m.O.isAlertsBundle));return(0,o.pipe)(Ai.get(),n.chain((i=>(Ai.set(n.none),H.nL.hasCards(e)?(0,o.pipe)(e.currentLens.items.reduce(((e,a)=>(0,o.pipe)(e,n.alt((()=>(0,o.pipe)(a,t,n.chain((e=>n.fromNullable(e.alerts.find((e=>e.id.startsWith(i+"_"))))))))))),n.none),n.map((t=>({alert:t,highlightIndex:0,lensId:e.currentLens.id})))):n.none))))})(e),n.map((e=>H.nL.Effect.FocusBehavior.focusAlert(e))))))),(0,o.pipe)((0,he.W9)((()=>Jt.autoFocusEnabled.get()),(0,he.W9)(He.Py.whenFirstOpeningDocumentWithAlerts(Ii),He.Py.whenNoActiveCard)),He.Py.behaviorToEffect((()=>n.some(H.nL.Effect.FocusBehavior.focusFirst))))],(0,r.fold)((0,r.getFunctionMonoid)(n.getFirstMonoid())())),Ti=He.Py.getStateTransformer(xi,_i,e.alertsReader,Lt,(e=>Jt.autoFocusEnabled.get()&&"text"!==e.alertSource),s.Q1,ki),Mi=le.v.Items.getItemsPositionsUpdateTransformer(Lt),Ri=(0,o.pipe)(f,n.fold((()=>et.t.nothing),(e=>{return t=e.feedItemInfo,({state:e,metadata:i})=>{if(!H.nL.hasItems(e)||!T.R.isMainLens(e.currentLens.id)||!H.nL.isLensview(e))return J.left({state:e,metadata:i});const a=(0,s.zG)(re.l.find(e.currentLens.items,se.m),n.map(ce.pick("value")));return(0,s.zG)(e,H.nL.getLens,n.chain(de(a,t.get())),n.map((({lens:t,newItem:i})=>H.nL.Prism.getLens().compose(le.v.Prism.items).set((0,s.zG)(a,n.fold((()=>t.items),(e=>t.items.remove(e.id))),(e=>(0,s.zG)(i,n.fold((()=>e),(t=>e.add(t)))))),e))),n.getOrElse((()=>e)),(e=>J.left({state:e,metadata:i})))};var t}))),Fi=(0,s.ls)(Ti,rt.chainLeft(Mi),rt.chainLeft(Ri)),Li=new Ye.l(Ht,Ut,e.alertsReader,e.alertsService,Si,m.O.getActiveItemWithAlert,Fi),Pi=ri.pipe(w.U((({lensId:e})=>e)),O.h((e=>e===T.R.SpecialId.AllAlerts||e===T.R.SpecialId.Priority)),y.x()).subscribe((e=>{i.set(e),U.next({kind:Ae.R.ChangeLens,selectedLens:e===T.R.SpecialId.Priority?"priority":"all"})})),Ni=Yt.activeView.pipe(w.U((e=>{switch(e.type){case v.a.Type.default:return i.get();case v.a.Type.emogenie:return T.R.SpecialId.PredictionEmogenie;case v.a.Type.readersAttention:return T.R.SpecialId.PredictionTakeaways;case v.a.Type.readersAttentionHelp:return T.R.SpecialId.Closed;case v.a.Type.proofitReview:return T.R.SpecialId.RealTimeProofit;default:return null}})),O.h(B.fQ),y.x(),w.U((e=>[e,e===T.R.SpecialId.AllAlerts||e===T.R.SpecialId.Priority]))).subscribe((([e,t])=>ri.next({lensId:e,focusFirstCard:t}))),Bi=new j.X($,X,ut,ue),Vi=new G(f,Ht,Zt.actionEvents,(t=>e.alertsReader.getById(t)),m.O.getActiveItemWithAlert),Oi=S.pipe(q.w(n.fold((()=>Z.E),(t=>t.initAssistantSession(Zt.actionEvents,e.alertsReader,Ht,e.alertsService,e.alertsList.state))))).subscribe(),Ui=Zt.actionEvents.pipe(O.h(D.lY.isOpenIdeasGallery)).subscribe((()=>self.open((0,Fe.Um)().grammarlyIdeasSales,"_blank"))),Di=(0,I.W)(be),Hi=Zt.actionEvents.subscribe((0,s.ls)((0,c.JH)(e.alertsReader,c.SV.Source.assistant),C.tap((e=>{(async()=>{e.kind===c.SV.Kind.alertApply&&e.source===c.SV.Source.assistant&&await dt.incrementCounter(),ye.next(e)})()}))));return{lensState:Ht,cardsViewModel:Zt,lensPreviewViewModel:Et,cardsListScrollManager:ei,upgradeViewModel:zt,alertProcessor:we,assistantHeaderViewModel:li,assistantLayoutViewModel:Yt,assistantCardListViewModel:Jt,lensChanged:ri,predictionsPreviewViewModel:Xt,assistantFeedbackViewModel:ui,assistantSettingsViewModel:Bi,assistantProofitViewModel:pi,readersAttentionViewModel:$t,readersAttentionItemViewModel:yi,assistantModalManager:qt,marksViewModel:ai,gnar:ne,positionViewModel:Di,user:me,capabilities:Lt,remSize:Rt,isSingleCardAssistant:!1,dispose:()=>{Hi.unsubscribe(),Vi.dispose(),Gt.unsubscribe(),oi.unsubscribe(),Zt.dispose(),Li.dispose(),ai.dispose(),Xt.dispose(),Pi.unsubscribe(),kt.unsubscribe(),Ni.unsubscribe(),li.dispose(),Jt.dispose(),qt.hideAll(),$t.dispose(),Ei.unsubscribe(),di.unsubscribe(),Oi.unsubscribe(),jt.unsubscribe(),ci.unsubscribe(),Ui.unsubscribe(),vi.unsubscribe(),bi.unsubscribe(),fi.unsubscribe(),ti.unsubscribe(),(0,o.pipe)(pi,C.tap((e=>e.dispose()))),(0,o.pipe)(yi,C.tap((e=>e.dispose()))),Qt.dispose()}}}},7737:(e,t,i)=>{i.d(t,{t:()=>c,y:()=>o});var a=i(67331),s=i(15646),r=i(85985),n=i(77176);class o{constructor(e,t,i){this._cardActions=e,this._gnar=t,this._alertsReader=i,this._subs=[c(this._cardActions,this._gnar,"assistant"),l(this._cardActions,this._gnar),a.g.createSubscription(this._cardActions,this._gnar,this._alertsReader.getById)]}dispose(){this._subs.forEach((e=>e.unsubscribe()))}}const l=(e,t)=>e.pipe(r.h((e=>e.type===s.lY.Type.sduiCardAction&&"learn-more"===e.sourceId))).subscribe((()=>{t.learnMoreButtonClick()})),c=(e,t,i)=>e.pipe(n.U((e=>e.type)),r.h((e=>e===s.lY.Type.muteAlertCategory||e===s.lY.Type.undoMuteAlertCategory||e===s.lY.Type.mutedAlertSuggestionManagementClick||e===s.lY.Type.mutedAlertSuccessShow))).subscribe((e=>{switch(e){case s.lY.Type.muteAlertCategory:t.mutedAlertsCardTurnOffButtonClick(i);break;case s.lY.Type.undoMuteAlertCategory:t.mutedAlertsTurnBackOnButtonClick(i);break;case s.lY.Type.mutedAlertSuggestionManagementClick:t.suggestionManagementClick(i);break;case s.lY.Type.mutedAlertSuccessShow:t.categoryDeactivatedShow(i)}}))},98325:(e,t,i)=>{i.d(t,{WY:()=>H,lo:()=>a});var a,s=i(57050),r=i(40327),n=i(4903),o=i(42466),l=i(8901),c=i(20641),d=i(48015),u=i(66896),p=i(74660),m=i(70023),h=i(94785),g=i(9922),f=i(77176),v=i(95300),b=i(28043),w=i(2834),y=i(95093),S=i(32952),k=i(16782),E=i(85985),C=i(24209),A=i(78674),_=i(60797),I=i(57091),x=i(50628),T=i(66310),M=i(85089),R=i(41398),F=i(16118),L=i(35416),P=i(6100),N=i(27125),B=i(5114),V=i(8125),O=i(38983),U=i(94895),D=i(44358);!function(e){let t;!function(e){e.clickOnEmpty="clickOnEmpty",e.clickOnFakeCard="clickOnFakeCard",e.clickOnUpgradeCard="clickOnUpgradeCard"}(t=e.Type||(e.Type={}))}(a||(a={}));class H{constructor(e,t,i,H,G,j){this._lensState=e,this._predictionsVM=t,this._upgradeViewModel=i,this._capabilities=H,this._gnar=G,this._isYellowUnderlinesExperimentActive=j,this._subs=new g.w.Keeper,this.activeAlert=this._lensState.pipe(f.U((e=>L.nL.hasCards(e)&&u.R.isMainLens(e.currentLens.id)?n.O.getActiveItemWithAlert(e.currentLens):B.none)),f.U((e=>(0,r.pipe)(e,B.fold((()=>null),(e=>e.activeAlert)))))),this.successView=O.h.combine(this._lensState,this._predictionsVM.previewState,((e,t)=>P.v.WithSuccess.State.isInSuccess(this._capabilities)(e)?t.kind===o.fA.visible?B.some(N.g.SuccessType.applied):B.some(N.g.SuccessType.small):B.none)),this._premiumAlertsCount=this._upgradeViewModel.advancedAlerts.view((0,s.ls)(B.map((e=>e.count)),B.getOrElse((()=>0)))),this.havePremiumAlerts=this._premiumAlertsCount.view((e=>e>0)),this._upgradeHookExpanded=new v.X(!1),this.upgradeHookExpanded=(0,r.pipe)(this._upgradeHookExpanded,b.x()),this.upgradeHookFlow=(0,r.pipe)((0,m.d)(this._upgradeViewModel.advancedAlerts),U.Z.extendActions(w.b((e=>{e.key===h.n.State.expanded?"upgrade"===e.action.kind?((0,D.Q)(this._gnar,{placement:"advancedIssues",bannerType:"SeeWhatsInPremium",upgradeHookName:"advancedIssues",upgradeHookSlot:"singleCardAssistant"}),(0,c.Tb)().upgradeHooks.clickUpgradeHook("advancedIssues","singleCardAssistant"),this._upgradeViewModel.openUpgradeUrl(l.L.Place.assistantCardList)):"onUpgradeButtonMount"===e.action.kind&&this._onUpgradeButtonMount.next(e.action.element):e.key===h.n.State.minimized&&"onClick"===e.action.action&&(this._upgradeHookExpandReason.next("click"),this._isYellowUnderlinesExperimentActive&&this.assistantActions.next({type:a.Type.clickOnUpgradeCard}))}))),U.Z.patchState(y.T(this._minimizeUpgradeHook())),U.Z.patchState(y.T(this._autoOpenUpgradeHook())),U.Z.patchState(w.b((e=>this._onUpgradeHookShown.next(function(e){switch(e){case"hidden":return h.n.State.hidden;case"expanded":return h.n.State.expanded;case"minimized":return h.n.State.minimized;default:(0,d.vE)(e)}}(e.kind))))),U.Z.patchState(w.b((e=>this._upgradeHookExpanded.next("expanded"===e.kind))))),this.cardListContext=new v.X(B.none),this.assistantActions=new S.xQ,this.autoFocusEnabled=O.h.create(!0),this.cardListViewportHeight=O.h.create(B.none),this._onUpgradeButtonMount=new k.t,this._upgradeHookExpandReason=new k.t,this._onUpgradeHookShown=new S.xQ,this._unselectActiveAlert=this.assistantActions.pipe(E.h((e=>e.type===a.Type.clickOnEmpty||e.type===a.Type.clickOnFakeCard||!(!this._isYellowUnderlinesExperimentActive||e.type!==a.Type.clickOnUpgradeCard))),w.b((()=>this.autoFocusEnabled.set(!1))),f.U((()=>e=>e.patch({currentLens:(0,r.pipe)(L.In.getActiveItem(e.currentLens),B.fold((()=>e.currentLens),(t=>L.nL.hasItems(e)?this._capabilities.unselectItem()(e.currentLens):e.currentLens))),switchOrder:"lensOrder",alertSource:p.l$.sidebar})))),this.applicatorEffects={id:"assistantCardListViewModel.effects",when:u.R.isWithAlertsId,what:L.nL.Effect.Applicator.create(C.T(this._unselectActiveAlert))},this._subs.push(this._onUpgradeHookShown.pipe(A.b(1),b.x(),E.h((e=>e===h.n.State.minimized))).subscribe((()=>{this._gnar.assistantCollapsedUpgradeHookShow()})),this._onUpgradeButtonMount.pipe(_.oA,I.a(this.cardListContext.pipe(_.oA,x.P())),T.w((([e,t])=>M.n(e,{root:t}).pipe(x.P()))),E.h(V.Dw),f.U((e=>Math.trunc(100*e[0].intersectionRatio))),R.M(this._upgradeHookExpandReason,this._premiumAlertsCount)).subscribe((([e,t,i])=>{this._gnar.assistantExpandedUpgradeHookShow(i,e,t)})),this._lensState.pipe(E.h(L.nL.hasCards),f.U((e=>L.In.getActiveItem(e.currentLens))),F.G(),E.h((([e,t])=>B.isNone(e)&&B.isSome(t)))).subscribe((e=>{this.autoFocusEnabled.set(!0)})))}dispose(){this._subs.dispose()}_minimizeUpgradeHook(){return this.activeAlert.pipe(b.x(),R.M(this.upgradeHookExpanded),E.h((([e,t])=>!!(e&&t&&this._isYellowUnderlinesExperimentActive))),R.M(this._upgradeViewModel.advancedAlerts),f.U((([e,t])=>(0,r.pipe)(t,B.fold((()=>({kind:h.n.State.hidden})),(e=>({kind:h.n.State.minimized,alertsCount:e.count})))))))}_autoOpenUpgradeHook(){return this._lensState.pipe(E.h((e=>(0,r.pipe)(e.currentLens.id,(0,V.Kg)(u.R.isPriority,u.R.isAllAlerts)))),f.U(P.v.WithSuccess.State.isInSuccess(this._capabilities)),I.a(this.havePremiumAlerts,((e,t)=>e&&t)),b.x(),w.b((e=>{e&&this._upgradeHookExpandReason.next("alertsAddressed")})),R.M(this._upgradeViewModel.advancedAlerts),f.U((([e,t])=>(0,r.pipe)(t,B.fold((()=>({kind:h.n.State.hidden})),(t=>e?{kind:h.n.State.expanded,showCloseButton:!0,alertsState:{count:t.count,alerts:t.alerts()}}:{kind:h.n.State.minimized,alertsCount:t.count}))))))}}},4903:(e,t,i)=>{i.d(t,{O:()=>Q});var a=i(57050),s=i(35214),r=i(40327),n=i(34641),o=i(33817),l=i(18055),c=i(35108),d=i(77176),u=i(40151),p=i(2834),m=i(55415),h=i(5114),g=i(22232),f=i(34217),v=i(27378),b=i(50474),w=i(64757),y=i(31278),S=i(3656),k=i(28706),E=i(26027),C=i(15646),A=i(74754),_=i(66346),I=i(76974),x=i(5739),T=i(84368),M=i(37095),R=i(4194),F=i(27871);const L=f.UI.Node.make((({state:e,notify:t})=>{const i=v.useContext(b.m.Context);return v.createElement(x.F.Fragment,null,e.pipe(d.U((e=>(0,a.zG)(e.details,h.fold((()=>v.createElement("div",null)),(()=>v.createElement(w.zx.Tertiary,{key:"toggle-more",name:(0,_.hC)(e.visualState,i),title:(0,_.hC)(e.visualState,i),onClick:k.hz(t({type:C.eI.Kind.startTransitionTo,id:e.id,transition:{type:E.X.isCardOpen(e.visualState)?"focused":"expanded",clockwise:!0}}))},E.X.isCardOpen(e.visualState)?v.createElement(y.JO.Arrow,{key:"more",className:F.lessIcon}):v.createElement(y.JO.QuestionMark,{key:"expand"}),(0,_.hC)(e.visualState,i)))))))))})),P=f.UI.Node.make((({notify:e})=>v.createElement(w.zx.Tertiary,{name:"dismiss",title:"Dismiss",onClick:k.hz(e({type:T.Dy.ignoreButtonClick}))},v.createElement(y.JO.Ignore,null)))),N=f.UI.Node.make((({state:e})=>v.createElement(x.F.Fragment,null,e.pipe(d.U((e=>(0,a.zG)(e.details,h.fold(a.gn,(t=>v.createElement(_.G3,{key:"card-actions-details",visualState:e.visualState,className:F.more},v.createElement(S.XY,{className:F.minimalDescription,...A.y.renderToHtml(t)}))))))))))),B=f.UI.Node.make((({notify:e})=>v.createElement(w.zx.Flat,{className:F.feedbackFooter,name:"attention-score-card-open-feedback-form",onClick:k.hz(e({type:T.Dy.feedbackButtonClick}))},v.createElement("span",null,"Anything we can improve?"),v.createElement(y.JO.OpenFeedbackFormArrow,null)))),V=f.UI.Node.make((({state:e,notify:t})=>v.createElement(x.F.Fragment,null,e.pipe(d.U((e=>v.createElement(w.zx.Primary,{name:"readersAttentionItem-view-more",onClick:k.hz(t({type:T.Dy.viewMoreButtonClick,item:e})),className:F.viewMoreButton},"See suggestions"))))))),O=f.UI.Knot.make(f.UI.Grid.make((({slots:e})=>v.createElement(x.F.div,{className:R.card,"data-name":"attention-score-card-full"},e.header,v.createElement(x.F.div,{className:F.cardBody},e.content,e.details,v.createElement("div",{className:F.actions},e.viewMoreButton)),v.createElement(x.F.div,{className:F.actionsFooter},e.expandButton,e.dismissButton),e.feedbackFooter))),{header:(0,M.h)("full"),content:M.r,details:N,expandButton:L,dismissButton:P,viewMoreButton:V,feedbackFooter:B}),U=e=>f.Z.composeKnot({header:()=>e,content:()=>e.pipe(d.U((e=>({attentionScore:e.attentionScore,attentionScoreDescription:e.description})))),details:()=>e,expandButton:()=>e,dismissButton:()=>I.of(null),viewMoreButton:f.Z.fromSideEffect(a.Q1,e),feedbackFooter:()=>I.of(null)});var D=i(12187),H=i(32485);const G=f.UI.Knot.make(f.UI.Grid.make((({slots:e,notify:t})=>v.createElement(x.F.div,{"data-name":"attention-score-card-mini",onClick:k.hz(t({type:T.Dy.miniCardClick,id:n.g.id})),...(0,D.Sh)(R.card,H.miniCard)},e.header))),{header:(0,M.h)("mini")}),j=e=>f.Z.composeKnot({root:f.Z.fromSideEffect(a.Q1,null),header:()=>e});var W;!function(e){const t=f.UI.Union.make("kind",{mini:G,full:O,hidden:f.UI.Node.empty}),i=e=>({mini:j(e.pipe(d.U((e=>({title:e.view.title,attentionScore:e.view.attentionScore,density:e.density}))))),full:U(e.pipe(d.U(m.pick("view")))),hidden:()=>u.E}),s=o.G.make(t);function r(e){switch(e){case"added":case"rendered":return"mini";case"focused":case"expanded":return"full";case"hidden":case"removed":return"hidden";case"presuccess":case"success":case"feedback_form":case"muted":throw new Error(`${e} is not supported for ReadersAttentionCard`);default:(0,g.vE)(e)}}e.Card=f.UI.Node.make((({state:e,notify:t})=>f.UI.mount(s,(0,a.zG)(l.g.flow(e.pipe(d.U(m.pick("view"))),(0,a.zG)((e=>f.Z.composeUnion(i(e),(()=>e.pipe(d.U((e=>({kind:r(e.view.visualState.transition.type)})))))))(e),f.Z.extendActions(p.b((e=>t(e.action.action)())))),(e=>f.Z.composeUnion(i(e),(()=>e.pipe(d.U((e=>({kind:(0,a.zG)(e.view.visualState.from,h.fold((()=>"mini"),r))})))))))(e),m.pick("id"),c.CE.toOption(c.a)),l.g.extend((e=>t(e)()))))))}(W||(W={}));var z=i(48521),q=i(16892);const K=e=>t=>({...t,positionState:e}),Z=e=>t=>({...t,visualState:e});var Q,Y=i(66896),$=i(22373),X=i(7910),J=i(49978),ee=i(34574),te=i(98752),ie=i(17594),ae=i(91549),se=i(20594),re=i(86775),ne=i(77610),oe=i(15215),le=i(70100),ce=i(47306),de=i(35416),ue=i(6100),pe=i(8125),me=i(45701),he=i(83078),ge=i(73975),fe=i(94895);!function(e){function t(e,t,i,a,s){return de.nL.Items.mapper((e=>e.kind),{[E.X.Kind]:e,[ae.R.Kind]:t,[le.X.kind]:i,[ce.J.kind]:a,[n.g.kind]:s})}function i(e){return e.kind===E.X.Kind}function o(e){return e.kind===ae.R.Kind}function l(e){return i(e)&&ne.i.isEthicalAIItem(e)}function c(e){return o(e)&&ne.i.isEthicalAIItem(e)}function d(e,i){return{viewState:(a,s)=>t((t=>({view:t,isLastCard:a,kind:"alertCard",visibleViewportHeight:e(s)})),(t=>({view:t,isLastCard:a,kind:"alertsBundle",visibleViewportHeight:e(s)})),(e=>({view:e,kind:"checklistItemEmpty"})),(t=>({view:t,kind:"checklistItemWithAlerts",isLastCard:a,visibleViewportHeight:e(s)})),(e=>({density:i()===Y.R.SpecialId.AllAlerts?"normal":"compact",view:e,kind:"readersAttentionItem"})))}}e.isSelectableWithAlertItem=(0,pe.Kg)(i,o,oe.d.isChecklistItemWithAlerts),e.getActiveItemWithAlert=de.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.getActiveAlignableItem=de.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.getActiveFocusableItem=de.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.checksFeedItemsMapper=t,e.isAlertCard=i,e.isAlertsBundle=o,e.isEthicalAIAlertCard=l,e.isEthicalAIAlertsBundle=c,e.defaultOrd=(0,s.fold)(me.getMonoid())([(0,r.pipe)(me.ordBoolean,me.contramap((0,pe.ff)(l))),(0,r.pipe)(me.ordBoolean,me.contramap(n.m)),me.fromCompare(((e,t)=>i(e)&&i(t)?E.X.ord.compare(e,t):0))]),e.bundlesOrd=(0,s.fold)(me.getMonoid())([(0,r.pipe)(me.ordBoolean,me.contramap((0,pe.ff)(c))),(0,r.pipe)(me.ordBoolean,me.contramap(n.m)),me.fromCompare(((e,t)=>o(e)&&o(t)?ae.R.ord.compare(e,t):0))]),e.item=e=>fe.UI.Union.make("kind",{alertCard:$.p.Card(e),alertsBundle:J.Q.Card(e),checklistItemEmpty:ee.z.Card(e),checklistItemWithAlerts:te.fw.Card(e),readersAttentionItem:W.Card}),e.viewState=d,e.createCardListFlow=e=>(0,X.sJ)((t=>(0,r.pipe)(e,he.tap((e=>e.actions.next(t.action)))))),e.listItemOrd=e=>me.contramap((e=>e.cell.item.view))(e).compare;const u={equals:(e,t)=>e.kind===t.kind&&q.s.eqById.equals(e,t)},p=(e,t,i,a,s)=>({equals:(r,o)=>{const l={[E.X.Kind]:e,[ae.R.Kind]:t,[le.X.kind]:i,[ce.J.kind]:a,[n.g.kind]:s};return u.equals(r,o)&&function(e,t){return(i,a)=>t[e(i)].equals(i,a)}((e=>e.kind),l)(r,o)}}),m=(0,s.fold)(ge.uZ())([z.o.eq,q.s.verticalPositionEq,u]);function g(e,i){const a=E.X.Capabilities.getChangePosition(e);return{changePosition:e=>t(a.changePosition(e),ae.R.changePosition(e),le.X.changePositionState(e),i.changePositionState(e),K(e))}}function f(e,i,a){const s=E.X.Capabilities.getAnimatable(e),r=ae.R.Capabilities.getAnimatable(a);return{completeTransition:e=>{return t(s.completeTransition(e),r.completeTransition(e),le.X.completeTransition(e),i.completeTransition(e),(a=e,e=>({...e,visualState:z.o.VisualState.complete(e.visualState,a)})));var a},transitionTo:e=>t(s.transitionTo(e),r.transitionTo(e),le.X.transitionTo(e),i.transitionTo(e),(e=>t=>({...t,visualState:z.o.VisualState.to(t.visualState,e)}))(e)),changeVisualState:e=>t(s.changeVisualState(e),r.changeVisualState(e),le.X.changeVisualState(e),i.changeVisualState(e),Z(e))}}function v(e,i,s,n,o){const l=ae.R.getCardHydrator(o),c=ae.R.getSelect(s,n,l),d=ae.R.getSelectByAlert(s,n,l),u=E.X.Capabilities.getSelect(e);return{select:(e,s)=>t(u.select(e,s),c(e,s),le.X.select(e),i.selectFirstAlert((0,a.MZ)(e),s),function(e,t){return i=>{const s=(0,r.pipe)(e,h.map((e=>t.compare(i,e)>0)),h.getOrElse(a.W8)),n=(0,r.pipe)(e,h.exists((e=>e.id===i.id))),o=n&&E.X.isCardOpen(i.visualState)?"expanded":"focused",l=(0,r.pipe)(e,h.fold((()=>z.o.VisualState.initial({type:o,clockwise:s})),(e=>z.o.VisualState.to(i.visualState,{type:o,clockwise:s}))));return(0,r.pipe)(i,n?a.yR:K(q.s.PositionState.invalidateHeight(i.positionState)),Z(l))}}(e,s)),selectByAlert:(e,s,r)=>t(u.selectByAlert(e,s,r),d(s,e,r),le.X.select(e),i.selectByAlert(s,(0,a.MZ)(e),r),a.yR),unselect:(e,s)=>t(u.unselect((0,a.MZ)(e),s),ae.R.unselect((0,a.MZ)(e),s),le.X.unselect(e),i.unselect((0,a.MZ)(e),s),function(e,t){return i=>{const s=(0,r.pipe)(e,h.map((e=>t.compare(i,e)>0)),h.getOrElse(a.W8)),n=(0,r.pipe)(e,h.exists((e=>e.id===i.id)));return(0,r.pipe)(i,n?a.yR:K(q.s.PositionState.invalidateHeight(i.positionState)),z.o.isHidden(i)?a.yR:Z(z.o.VisualState.to(i.visualState,{type:"rendered",clockwise:s})))}}(e,s))}}function b(e,s,r,n,l,c){return{removeAlertFromItem:(d,u)=>t((t=>E.X.Capabilities.getRemoveAlerts(e,u.itemsOrd)(d,de.In.getActiveItemOfType(i)(u))(t)),(e=>ae.R.Capabilities.getRemoveAlertsCapability(n,l,c,u.itemsOrd)(d,de.In.getActiveItemOfType(o)(u))(e)),a.yR,(e=>re.G.getRemoveAlert(s,r,n).removeAlertFromItem(d,u)(e)),a.yR)}}function w(e,i,s,r){const n=E.X.Capabilities.getRemove(e);return{remove:(e,o)=>t(n.remove(e,o),(t=>e(t)?ae.R.Capabilities.getRemove(s,r)([t.activeAlert],o(t))(t):t),a.yR,(t=>e(t)?i.removeAlerts(t.alerts,o(t))(t):t),a.yR)}}function y(e,i,s,r){const n=E.X.Capabilities.getUpdateWithAlert(e),o=ae.R.Capabilities.getUpdatableWithAlertsCapability(i,r);return{updateWithAlerts:e=>t(n.updateWithAlerts(e),o(e),a.yR,s.updateWith(e),a.yR)}}e.equatable={structEq:p(E.X.eq,ae.R.eq,le.X.eq,ce.J.eq,n.g.eq),idEq:p(u,u,u,u,u),visualStateEq:p(m,m,m,m,m)},e.changePosition=g,e.disposable={isScheduledToDispose:t((e=>ne.i.willBeDisposed(e,e.removedAlertsIds)),(e=>ne.i.willBeDisposed(e,e.removedAlertsIds)),a.jv,(e=>ne.i.willBeDisposed(e,e.removedAlertsIds)),a.jv)},e.hidable={isHidden:t(z.o.isHidden,z.o.isHidden,z.o.isHidden,z.o.isHidden,z.o.isHidden)},e.animatableItem=f,e.hasAlertsQueries={isSelectableByAlert:e=>t(ne.i.hasAlert(e.alert.id),ne.i.hasAlert(e.alert.id),a.jv,ne.i.hasAlert(e.alert.id),a.jv),hasAlert:e=>t(ne.i.hasAlert(e),ne.i.hasAlert(e),a.jv,ne.i.hasAlert(e),a.jv),hasActiveAlert:t(ne.i.hasActiveAlert,ne.i.hasActiveAlert,(()=>h.none),ne.i.hasActiveAlert,(()=>h.none))},e.changePositionStrategyQueries={useReferenceHeightOnRemove:t(a.jv,a.jv,a.jv,a.W8,a.jv)},e.select=v,e.removeAlert=b,e.remove=w,e.updateWithAlert=y,e.releaseAlert=(t,i,a,s,r,n)=>ue.v.Capabilities.getAlertReleaser({...b(t,i,a,s,r,n),...e.disposable}),e.unselectable=(t,i,a,s,r)=>ue.v.Capabilities.getUnselectable(de.In.getActiveItem,{...v(t,i,a,s,r),...e.disposable}),e.selectableByAlert=(t,i,a,s,r)=>ue.v.Capabilities.getSelectableByAlert(de.In.getActiveItem,{...e.hasAlertsQueries,...v(t,i,a,s,r),...ue.v.Capabilities.getHasChecksFeed(),...e.disposable}),e.selectableById=(t,i,a,s,r)=>ue.v.Capabilities.getSelectableById(de.In.getActiveItem,{...v(t,i,a,s,r),...e.disposable}),e.updateMeta=()=>({updateMeta:ue.v.Capabilities.getMetaUpdatable().updateMeta}),e.animatableFeed=(e,t,i,a,s,r)=>ue.v.Capabilities.getAnimatable(e,{...b(e,t,i,a,s,r),...f(e,t,r),...ue.v.Capabilities.getHasChecksFeed()}),e.hasPriorityToggle=(t,i,a)=>ue.v.WithPriority.getHasPriorityToggle({...f(t,i,a),...e.hasAlertsQueries,...e.disposable});const S=t=>["focused","expanded"].includes(t.visualState.transition.type)&&!e.disposable.isScheduledToDispose(t);function k(e,i){const a=se.Mq.getCardSelections(i);return{nextAlert:t(a.nextAlert,a.nextAlert,(()=>h.none),e.nextAlert,(()=>h.none)),prevAlert:t(a.prevAlert,a.prevAlert,(()=>h.none),e.prevAlert,(()=>h.none))}}function C(){return{updateUserInput:e=>t(E.X.updateUserInput(e),ae.R.changeUserInput(e),a.yR,a.yR,a.yR)}}e.alignable={isValidToAlign:t(S,S,a.jv,S,a.jv)},e.alertIterator=k,e.itemReleaser=(e,t,i)=>re.G.getItemReleaser(e,t,i,ue.v.Capabilities.getItemReleaser()),e.hasAlerts=ue.v.Capabilities.getHasAlerts,e.getDefaultNextAlertItemFilter=t=>(0,pe.W9)(e.isSelectableWithAlertItem,(i=>!e.disposable.isScheduledToDispose(i)&&(0,r.pipe)(i,e.hasAlertsQueries.hasActiveAlert,h.map((e=>t.isRegistered(e.alert.id))),h.getOrElse(a.jv)))),e.hasUserInput=C,e.priorityTest=(0,pe.W9)(i,(e=>ie.$.isPriority(e.activeAlert))),e.verifiable=()=>ue.v.Capabilities.getVerifiable(e.disposable),e.cloneable=()=>{const e=q.s.Capabilities.getPojoCloneable().clone;return{clone:t(E.X.Capabilities.getCloneable().clone,e,e,e,e)}},e.getCapabilities=function(t,i,s,r,n,o,l,c=(0,a.a9)(h.none),u=se.IG.Default){return{...d(c,l),...e.disposable,...e.hidable,...e.equatable,...C(),...e.cloneable(),...g(t,s),...f(t,s,n),...v(t,s,r,u,n),...w(t,s,u,n),...b(t,s,o,r,u,n),...y(t,i,s,n),...e.hasAlertsQueries,...e.changePositionStrategyQueries,...e.alignable,...e.releaseAlert(t,s,o,r,u,n),...e.unselectable(t,s,r,u,n),...e.selectableByAlert(t,s,r,u,n),...e.selectableById(t,s,r,u,n),...e.updateMeta(t),...e.animatableFeed(t,s,o,r,u,n),...e.hasPriorityToggle(t,s,n),...e.itemReleaser(s,o,r),...e.verifiable(),...e.cloneable(),...e.hasAlerts(k(s,r),r,(()=>e.isSelectableWithAlertItem),{...e.hasAlertsQueries,...e.disposable})}}}(Q||(Q={}))},31470:(e,t,i)=>{i.d(t,{Q:()=>a,_:()=>n});var a,s=i(92693),r=i(86061);!function(e){e.readersAttention="readers_attention",e.settings="settings"}(a||(a={}));class n{constructor(e,t,i){this._assistantLayoutViewModel=e,this._domain=t,this._gnar=i,this._entryPoint=void 0}getDomain(){return this._domain}openFeedback(e){this._entryPoint=e,this._gnar.assistantFeedbackButtonClick(this._entryPoint),this._assistantLayoutViewModel.pushActiveView({type:s.a.Type.feedback})}submitFeedback(e){this._entryPoint&&this._gnar.assistantFeedbackSubmitButtonClick(this._entryPoint,e.domain,e.text,(0,r.dK)(e)?e.score:void 0)}}},26109:(e,t,i)=>{i.d(t,{B:()=>a});var a,s=i(56913),r=i(54466);!function(e){e.shouldShow=e=>{var t;return!!(null===(t=e.institutionInfo)||void 0===t?void 0:t.voxEnabled)};const t=e=>({onShow:t=>e.gbPromptFormShow(t),onAccept:t=>e.gbPromptAcceptClick(t),onDismiss:t=>e.gbPromptDismissClick(t)});e.getCardsViewModelSendToURLExperiment=(e,i)=>({handleGbPrompt:r.sU.Experiments.handleGbPrompt(e,{account:{styleGuide:(0,s.Um)().styleGuideSettings,writingStyle:(0,s.Um)().writingStyleSettings}},t(i))})}(a||(a={}))},92693:(e,t,i)=>{i.d(t,{D:()=>d,a:()=>a});var a,s=i(59358),r=i(81591),n=i(48015),o=i(14601),l=i(78674),c=i(85985);!function(e){let t,i;!function(e){e.default="default",e.emogenie="emogenie",e.readersAttention="readersAttention",e.readersAttentionHelp="readersAttentionHelp",e.feedback="feedback",e.settings="settings",e.proofitRequest="proofitRequest",e.proofitReview="proofitReview",e.startupPlaceholder="startupPlaceholder"}(t=e.Type||(e.Type={})),function(e){let t;!function(e){let t;!function(e){e.predictionWidget="predictionWidget",e.navigation="navigation",e.readersAttentionItem="readersAttentionItem"}(t=e.Type||(e.Type={}))}(t=e.Caller||(e.Caller={}))}(i=e.ReadersAttention||(e.ReadersAttention={})),e.isDefault=function(t){return t.type===e.Type.default},e.isEmogenie=function(t){return t.type===e.Type.emogenie},e.isReadersAttention=function(t){return t.type===e.Type.readersAttention},e.isReadersAttentionHelp=function(t){return t.type===e.Type.readersAttentionHelp},e.isFeedback=function(t){return t.type===e.Type.feedback},e.isSettings=function(t){return t.type===e.Type.settings},e.isProofitRequest=function(t){return t.type===e.Type.proofitRequest},e.isProofitReview=function(t){return t.type===e.Type.proofitReview}}(a||(a={}));class d extends r.A{constructor(e,t,i,r,d=s.V.defaultLayout){super({type:a.Type.startupPlaceholder},{type:a.Type.default}),this.browser=r,this.layout=d,this._sub=new o.w,this._sub.add(t.subscribe((e=>{if(e.length>0)for(;!this.activeViewHasAlerts();)this.popActiveView()})));const u=new Set([a.Type.readersAttention,a.Type.emogenie]);this._sub.add(i.pipe(l.b(100),c.h(n.fQ)).subscribe((()=>{if(u.has(this._activeView.get().type))for(;this._activeView.get().type!==this._defaultView.type;)this.popActiveView()}))),this._sub.add(this._activeView.subscribe((t=>{switch(t.type){case a.Type.settings:return void e.assistantSettingsShow();case a.Type.proofitRequest:return void e.proofitRequestFormShow();default:return}})))}activeViewHasAlerts(){switch(this._activeView.get().type){case a.Type.default:case a.Type.emogenie:case a.Type.readersAttention:return!0;default:return!1}}popActiveView(){const e=this._viewHistory.pop()||this._defaultView;e.type===a.Type.readersAttention?this._activeView.set({...e,caller:{type:a.ReadersAttention.Caller.Type.navigation}}):this._activeView.set(e)}get isHeaderNavigationEnabled(){return this._activeView.view((e=>e.type!==a.Type.feedback))}dispose(){this._sub.unsubscribe()}}},59881:(e,t,i)=>{i.d(t,{W:()=>s});var a=i(70063);const s=e=>{const t=e.initialPositionOffset.get();return{initialPositionOffset:t,onDrag:i=>{e.updateInitialPositionOffset(a.E9.plus(t,a.E9.fromCartesian(i.translate)))}}}},89131:(e,t,i)=>{i.d(t,{S:()=>u});var a=i(77843),s=i(28043),r=i(16118),n=i(41398),o=i(85985),l=i(2768),c=i(92693),d=i(78002);class u{constructor(e,t,i,a){this.feature=t,this._closeAssistant=i,this._gnar=a,this._subs=[],this._subs.push(this.feature.requestInfo.view("status").pipe((0,s.x)(),(0,r.G)(),(0,n.M)(e.activeView)).subscribe((([[t,i],a])=>{t===d.eE.REVIEWING&&a.type===c.a.Type.proofitReview&&e.popActiveView()}))),this._subs.push(this.feature.layoutCreated.pipe((0,n.M)(e.activeView)).subscribe((([t,i])=>{i.type!==c.a.Type.proofitRequest&&i.type!==c.a.Type.proofitReview||t||e.popActiveView()})))}onSubmitRequest(e){this.feature.submitRequest(),this._gnar.proofitRequestFormSubmit();const t=this.feature.requestInfo.lens("status").pipe((0,o.h)((e=>e===d.eE.ACCEPTED)));(0,a.F)(100).pipe((0,l.R)(t)).subscribe({complete:()=>this._closeAssistant(e)})}onCompleteRequest(e){this.feature.resetRequest(),this._gnar.proofitOrderDone(),this._closeAssistant(e)}onSubmitFeedback(e){this._gnar.proofitFeedbackFormSubmit(e.text,e.score)}dispose(){this._subs.forEach((e=>e.unsubscribe()))}}},95747:(e,t,i)=>{i.d(t,{d:()=>y,X:()=>G});var a=i(17771),s=i(57050),r=i(26328),n=i(40327),o=i(92693),l=i(74660),c=i(4390),d=i(93508),u=i(16118),p=i(77176),m=i(85985),h=i(66310),g=i(12126),f=i(40151),v=i(92843),b=i(71249),w=i(5114);var y,S=i(48015),k=i(66896),E=i(14601),C=i(98403),A=i(28043),_=i(19751),I=i(34383),x=i(15215),T=i(35416),M=i(83078),R=i(73975),F=i(38983),L=i(17889),P=i(32243),N=i(86718);function B(e,t){return F.h.combine(e.panelInfo.view(w.map((e=>({items:e.checklist,wordsCount:e.wordsCount})))),t,((e,t)=>{const i=c.p.reduce(new Map,((e,t)=>{return(0,s.zG)((i=t,(0,s.zG)(i.alert.extraProperties.takeawayBundleId,w.map(I.T.Id.create))),w.fold((()=>e),(i=>e.set(i,(e.get(i)||[]).concat([t])))));var i}))(t);return(0,s.zG)(e,w.fold((()=>new Map),(e=>new Map(P.AO(e.items).map((([t,a])=>[I.T.Id.create(t),O(a,e.wordsCount,i)]))))))}))}function V(e){return l.bZ.isTakeaway(e)&&e.takeawayIsLikelyToBeRead&&M.contains(l.TO.correctlyDetected)(e.takeawayFeedback)}function O(e,t,i){const a=I.T.Id.create(e.id),r=(i.get(a)||[]).map((e=>e.alert)),n=(0,s.zG)(r,b.hX((e=>!l.bZ.isTakeaway(e)||w.isNone(e.takeawayFeedback)||M.contains(l.TO.correctlyDetected)(e.takeawayFeedback))),(e=>e.every(V)?[]:e),L.nI);return{id:a,rank:e.rank,suggestionsView:(0,s.zG)(e.suggestionsCard,w.chain((e=>(0,s.zG)(n,w.map((t=>({title:e.title,miniTitle:e.miniTitle,miniLabel:w.none,alertIds:(0,s.zG)(t,(0,L.UI)((e=>e.id)))}))))))),emptyView:{checked:e.defaultCard.checked,title:e.defaultCard.title,miniTitle:e.defaultCard.miniTitle,miniLabel:"textLength"===e.defaultCard.kind?w.some(`${t} words`):w.none,card:U(e,t)}}}function U(e,t){const i="simple"===e.defaultCard.kind?N.f.Kind.simple:"textLength"===e.defaultCard.kind?N.f.Kind.textLength:(0,S.vE)(e.defaultCard.kind);return i===N.f.Kind.simple?{kind:i,explanation:e.defaultCard.description,details:e.defaultCard.details}:{kind:i,explanation:e.defaultCard.description,details:e.defaultCard.details,wordCount:t}}function D(e){return w.isNone(e.suggestionsView)&&e.emptyView.checked}function H(e){return o.a.isReadersAttention(e)||o.a.isReadersAttentionHelp(e)}!function(e){e.ok="ok",e.warning="warning",e.feedback="feedback"}(y||(y={}));class G{constructor(e,t,i,o,S){this._readersAttentionFeature=e,this._assistantLayoutVM=t,this._alertsCollection=i,this._alertsReader=o,this._assistantLensState=S,this._subs=new E.w,this._checklist=F.h.create(I.D.empty()),this.checklist=this._checklist.view(),this.panelState=(0,n.pipe)(this._readersAttentionFeature,w.fold((()=>F.h.create(w.none)),(e=>F.h.combine(e.panelInfo,this._checklist,((e,t)=>(0,n.pipe)(e,w.map((e=>({attentionScore:e.attentionScore,attentionScoreDescription:e.attentionScoreDescription,headerMessage:e.headerMessage,numChecklistItemsChecked:Array.from(t.values()).reduce(((e,t)=>D(t)?e+1:e),0),numChecklistItems:t.size}))))))))),this.predictionCardState=(0,n.pipe)(this._readersAttentionFeature,w.fold((()=>F.h.create(w.none)),(e=>function(e,t,i){return F.h.combine(e.panelInfo,t,((e,t)=>(0,n.pipe)(e,w.map((e=>({message:e.predictionMessage,icon:Array.from(t.values()).every(D)?y.ok:Array.from(t.values()).every((e=>(0,n.pipe)(e.suggestionsView,w.map(function(e){return t=>(0,n.pipe)(t.alertIds,(0,r.UI)((0,s.ls)((t=>e.getById(t)),w.filter((e=>l.bZ.isTakeaway(e)&&e.takeawayIsLikelyToBeRead&&w.isNone(e.takeawayFeedback))))),b.yW(w.isSome))}(i)),w.getOrElse((()=>e.emptyView.checked)))))?y.feedback:y.warning,alertsCount:z(t)}))))))}(e,this._checklist,this._alertsReader)))),this._subs.add(this._handleHeatmapVisibilityAndNavigationTracking()),this._subs.add(this._trackChecklistItemExpand()),(0,n.pipe)(this._readersAttentionFeature,M.tap((e=>{var t;this._subs.add((t=this._alertsCollection,t.pipe(d.O(c.p.empty),u.G(),p.U((([e,t])=>(0,n.pipe)(c.p.diff(e,t),c.p.Diff.filter((e=>l.bZ.isTakeaway(e.alert)))))),m.h((0,s.ff)(v.v.isEmpty)),p.U((e=>(0,n.pipe)(e,v.v.reduce(new Map,((e,t)=>e),((e,t,i)=>l.bZ.isTakeaway(i.alert)?e.set(i.alert.id,i.alert):e),((e,t)=>l.bZ.isTakeaway(t.alert)?e.set(t.alert.id,t.alert):e))))),h.w((e=>(0,n.pipe)(Array.from(e.values()),b.UI((e=>(0,n.pipe)(a.Y(w.option)({rawId:(0,n.pipe)(e,l.bZ.getRawId),feedback:e.takeawayFeedback}),w.map((e=>({rawId:e.rawId,feedback:e.feedback})))))),b.oA,(e=>e.length>0?g.D(e):f.E)))))).subscribe((t=>{e.takeawaysFeedbackStore.registerFeedback(t.rawId,t.feedback)}))),this._subs.add(B(e,this._alertsCollection).subscribe(C.wW(this._checklist)))})))}openPanel(e){this._assistantLayoutVM.pushActiveView({type:o.a.Type.readersAttention,caller:e})}showHelp(){this._assistantLayoutVM.pushActiveView({type:o.a.Type.readersAttentionHelp}),this._trackOnShowHelp()}dispose(){H(this._assistantLayoutVM.activeView.get())&&((0,n.pipe)(this._readersAttentionFeature,M.tap((e=>e.heatmap.visible.set(!1)))),this._trackOnReadersAttentionHide()),this._subs.unsubscribe()}_handleHeatmapVisibilityAndNavigationTracking(){return this._assistantLayoutVM.activeView.pipe(A.x(((e,t)=>e.type===t.type)),d.O(null),u.G()).subscribe((([e,t])=>{(0,n.pipe)(this._readersAttentionFeature,M.tap((i=>{H(t)&&!i.heatmap.visible.get()?i.heatmap.visible.set(!0):e&&H(e)&&!H(t)&&i.heatmap.visible.get()&&i.heatmap.visible.set(!1)}))),!o.a.isReadersAttention(t)||e&&o.a.isReadersAttentionHelp(e)?!H(t)&&e&&H(e)&&this._trackOnReadersAttentionHide():this._trackOnReadersAttentionShow(t.caller)}))}_trackChecklistItemExpand(){return this._assistantLensState.pipe(p.U((e=>(0,n.pipe)(w.fromPredicate(T.nL.hasItems)(e),w.map(T.nL.Prism.getLens().get),w.filter((e=>e.id===k.R.SpecialId.PredictionTakeaways)),w.chain(T.In.getActiveItemOfType(x.d.isChecklistItem)),w.map((e=>{return{id:(t=e.id,i=k.R.SpecialId.PredictionTakeaways,I.T.Id.create(t.substr(i.length+1)||t)),title:(0,n.pipe)(e.itemMeta.miniTitle,w.getOrElse((()=>e.itemMeta.title))),checked:j(e),numAlerts:x.d.isChecklistItemWithAlerts(e)?e.alerts.length:0};var t,i}))))),_.skipBy(w.getEq(R.Uz((e=>e.id))(R.yv))),p.U(w.getOrElse(s.gn)),m.h(S.fQ)).subscribe((e=>(0,n.pipe)(this._readersAttentionFeature,M.tap((t=>t.tracking.onChecklistItemExpand(e))))))}_trackOnReadersAttentionShow(e){(0,n.pipe)(this._readersAttentionFeature,w.chain((e=>(0,n.pipe)(a.g(w.option)(e.panelInfo.get(),W(this._checklist.get())),w.map((t=>({feature:e,predictionMessage:t[0].predictionMessage,checklistInfo:t[1]})))))),M.tap((({feature:t,predictionMessage:i,checklistInfo:a})=>{t.tracking.onOpen(a,i,this._getNumAlerts(),e)})))}_trackOnReadersAttentionHide(){(0,n.pipe)(this._readersAttentionFeature,w.chain((e=>(0,n.pipe)(W(this._checklist.get()),w.map((t=>({feature:e,checklistInfo:t})))))),M.tap((({feature:e,checklistInfo:t})=>{e.tracking.onClose(t,this._getNumAlerts())})))}_trackOnShowHelp(){(0,n.pipe)(this._readersAttentionFeature,M.tap((e=>{e.tracking.onHelpScreenShow()})))}_getNumAlerts(){return(0,n.pipe)(this._alertsCollection.get(),c.p.reduce({takeaway:0,nonTakeaway:0},((e,t)=>{const i=l.bZ.isTakeaway(t.alert),a=l.bZ.belongsToPredictionTakeaways(t.alert)&&!i;return{takeaway:e.takeaway+(i?1:0),nonTakeaway:e.nonTakeaway+(a?1:0)}})))}}function j(e){return x.d.isChecklistItemEmpty(e)&&e.itemMeta.checked}function W(e){const t=Array.from(e.values()).sort(((e,t)=>e.rank-t.rank));return(0,n.pipe)(t.map((e=>({checked:D(e),message:(0,n.pipe)(e.suggestionsView,w.map((e=>(0,n.pipe)(e.miniTitle,w.getOrElse((()=>e.title))))),w.getOrElse((()=>(0,n.pipe)(e.emptyView.miniTitle,w.getOrElse((()=>e.emptyView.title))))))}))),r.nI)}function z(e){return(0,n.pipe)(Array.from(e.values()),b.u4(0,((e,t)=>e+(0,n.pipe)(t.suggestionsView,w.map((e=>e.alertIds.length)),w.getOrElse((()=>0))))))}},62623:(e,t,i)=>{i.d(t,{X:()=>a});class a{constructor(e,t,i,a){this._contentScriptState=e,this._contentScriptActions=t,this._dapiActions=i,this.domain=a,this.state=this._contentScriptState.view((e=>({user:e.user,page:e.page,dynamicConfig:e.dynamicConfig,dapi:e.dapi}))),this.actions={toggleSite:(e,t)=>{this._contentScriptActions.toggleSite({enabled:e,domain:t})},toggleDefs:e=>{this._contentScriptActions.toggleDefs(e)},toggleAutocomplete:e=>{this._contentScriptActions.toggleAutocomplete(e)},toggleAutocorrect:e=>{this._contentScriptActions.toggleAutocorrect(e)},cheetahToggleInlineRewrite:e=>{this._contentScriptActions.cheetahToggleInlineRewrite(e)},cheetahToggleInlineQuickReply:e=>{this._contentScriptActions.cheetahToggleInlineQuickReply(e)},readerToggleFeature:e=>{this._contentScriptActions.readerToggleFeature(e)},toggleCitationBuilderForDomain:e=>{this._contentScriptActions.toggleCitationBuilderForDomain(e)},changeStrongDialect:e=>{this._dapiActions.changeStrongDialect(e)},setDesktopIntegration:e=>{this._contentScriptActions.setDesktopIntegration(e)},setEmogenieEmojiState:e=>{this._dapiActions.setEmogenieEmojiState(e)},setSerengetiState:e=>{this._dapiActions.setSerengetiState(e)},toggleKnowledgeHub:e=>{this._contentScriptActions.toggleKnowledgeHub(e)},togglePiiDetection:e=>{this._contentScriptActions.togglePiiDetection(e)}}}}},42466:(e,t,i)=>{i.d(t,{fA:()=>c,pL:()=>S});var a=i(40327),s=i(27378),r=i(95747),n=i(37902),o=i(26284);const l=({message:e,emoji:t,emojiId:i,icon:a,iconPartName:r})=>s.createElement("div",{className:o.insight},t&&i&&s.createElement("div",{className:o.insight__inline_icon},s.createElement(n.dy,{unicodeHexArray:[i],unicodeLiteral:t})),a&&s.createElement("div",{className:o.insight__inline_icon,"data-grammarly-part":r},a),s.createElement("div",{className:o.insight__inline_text},e));var c,d=i(49898),u=i(24264),p=i(72154),m=i(48015),h=i(31278),g=i(3656),f=i(77176),v=i(18208),b=i(5739),w=i(94895),y=i(22521);!function(e){e.hidden="hidden",e.zero="zero",e.visible="visible"}(c||(c={}));const S=({predictionsVM:e})=>w.UI.mount(I,e.previewFlow),k=w.UI.Grid.make((({slots:e})=>s.createElement("div",{className:y.predictions},s.createElement("div",{className:y.predictions__header},"Predictions"),e.children))),E=({children:e,count:t,dataPartName:i})=>s.createElement(u.Z,{kind:"assistant-priority-lens",dataPartName:i,marginBottom:"12px"},s.createElement("div",{className:y.predictions__card},e,t>0&&s.createElement("div",{className:y.counterContainer},s.createElement(g.CL,null,t)))),C=w.UI.Node.make((({state:e,notify:t})=>s.createElement(p.M,{clickHandler:t("select")},s.createElement(b.F.Fragment,null,e.pipe(f.U((e=>s.createElement(E,{count:e.alertsCount,dataPartName:"emogenie-prediction-card"},s.createElement(l,{key:"tone",message:"off"===e.emotion.brandToneLabel?s.createElement(s.Fragment,null,"May sound ",s.createElement("span",{className:y.predictions__off_brand},"off-brand")):`Sounds ${e.emotion.name}`,emoji:e.emotion.emoji,emojiId:e.emotion.emojiId}))))))))),A=w.UI.Node.make((({state:e,notify:t})=>s.createElement(p.M,{clickHandler:t("select")},s.createElement(b.F.Fragment,null,e.pipe(f.U((e=>s.createElement(E,{count:e.alertsCount,dataPartName:"readers-attention-prediction-card"},s.createElement(l,{key:"readersAttention",message:v.capitalize(e.message),icon:e.icon===r.d.ok?s.createElement(h.JO.ValidationOk,{width:16}):e.icon===r.d.warning?s.createElement(d.a,null):e.icon===r.d.feedback?s.createElement(h.JO.Megaphone,{width:16}):(0,m.vE)(e.icon),iconPartName:e.icon===r.d.ok?"icon-ok":e.icon===r.d.warning?"icon-warning":e.icon===r.d.feedback?"icon-feedback":(0,m.vE)(e.icon)}))))))))),_=w.UI.Group.make({tone:x(C),readersAttention:x(A)}),I=w.UI.Union.make("kind",{[c.hidden]:w.UI.Node.empty,[c.zero]:w.UI.Node.empty,[c.visible]:w.UI.Composite.make(k,_)});function x(e){return{tag:"_tag",members:{Some:(0,a.pipe)(e,w.UI.contramapState((e=>e.value))),None:w.UI.Node.empty}}}},67331:(e,t,i)=>{i.d(t,{g:()=>a});var a,s=i(40327),r=i(85985),n=i(15646),o=i(83078);!function(e){e.createSubscription=function(e,t,i){return e.pipe(r.h(n.lY.isAlertApplyAction)).subscribe((e=>(0,s.pipe)(i(e.alertId),o.tap((e=>{"unlocked"===o.orUndefined(e.extraProperties.freePremium)&&t.freePremiumSuggestionAcceptButtonClick("assistant")})))))}}(a||(a={}))},74564:(e,t,i)=>{i.d(t,{c:()=>s});var a=i(12102);class s{constructor(e){this._highlights=e}addHighlight(e,t,i){return this._highlights.addHighlight(e,t,i)}updateHighlight(e,t,i){return this._highlights.updateHighlight(e,t,i)}removeHighlights(e){return this._highlights.removeHighlights(e)}recalculateHighlight(e){return this._highlights.recalculateHighlight(e)}recalculateAllHighlights(){return this._highlights.recalculateAllHighlights()}maintainConsistency(e,t=(e=>e),i=!1){return this._highlights.maintainConsistency(e,t,i)}hasHighlight(e){return this._highlights.hasHighlight(e)}getSelectedHighlightsTracker(e){return(0,a.H)({...e,highlights:this._highlights})}getGeometryByHighlightId(e){return this._highlights.geometry.get().get(e)}}},34641:(e,t,i)=>{i.d(t,{g:()=>a,m:()=>p});var a,s=i(57050),r=i(49435),n=i(36156),o=i(16892),l=i(48521),c=i(4890),d=i(73975),u=i(5114);function p(e){return e.id===a.id}!function(e){e.id="ReadersAttentionItemId",e.kind="ReadersAttentionItem",e.eq=d.f7(((e,t)=>e.hashCode()===t.hashCode()&&o.s.PositionState.eq.equals(e.positionState,t.positionState)&&l.o.VisualState.eq.equals(e.visualState,t.visualState))),e.hashCodeOwnFields=e=>(0,n.NO)({title:e.title,description:e.description,details:(0,s.zG)(e.details,u.fold((()=>"none"),(e=>`some(${e})`))),attentionScore:r.T.prism.reverseGet(e.attentionScore)}),e.hashCode=e.hashCodeOwnFields,e.create=function(t,i,a){return{id:e.id,kind:e.kind,renderOptions:{...c.j.defaultOptions,layoutDensity:c.j.Density.minimal},positionState:i,visualState:a,title:t.title,description:t.description,details:t.details,attentionScore:t.attentionScore,equals(t){return e.eq.equals(this,t)},hashCode(){return e.hashCode(this)}}}}(a||(a={}))},84368:(e,t,i)=>{var a;function s(e){return e.type===a.miniCardClick}function r(e){return e.type===a.ignoreButtonClick}function n(e){return e.type===a.viewMoreButtonClick}function o(e){return e.type===a.feedbackButtonClick}i.d(t,{Dy:()=>a,Q:()=>n,RJ:()=>o,Vl:()=>s,l9:()=>r}),function(e){e.miniCardClick="readersAttentionItemMiniCardClick",e.ignoreButtonClick="readersAttentionItemIgnoreButtonClick",e.viewMoreButtonClick="readersAttentionItemViewMoreButtonClick",e.feedbackButtonClick="readersAttentionItemFeedbackButtonClick"}(a||(a={}))},37095:(e,t,i)=>{i.d(t,{h:()=>h,r:()=>g});var a=i(27378),s=i(76457),r=i(3656),n=i(77176),o=i(49435),l=i(8125),c=i(5739),d=i(12187),u=i(34217),p=i(4194);const m=({progress:e})=>a.createElement(c.F.Fragment,null,e.pipe(n.U((e=>a.createElement(s.P,{percentage:o.g.prism.reverseGet(e),colorType:s.P.ColorType.neoBlue,iconSize:s.P.IconSize.extraSmall,theme:{radialProgressBar:p.circleProgress,radialProgressText:p.circleText}}))))),h=e=>u.UI.Node.make((({view:t})=>a.createElement(c.F.div,{...(0,d.Sh)(p.header,t("density").pipe(n.U((e=>"normal"===e)),n.U((0,l.RN)(p.normal,p.compact))))},a.createElement("div",{className:p.progressIcon},a.createElement(m,{progress:t("attentionScore").pipe(n.U(o.g.fromRatio))})),a.createElement(r.XY,{...(0,d.Sh)(p.title,"full"===e?p.full:void 0)},t("title"))))),g=u.UI.Node.make((({view:e})=>a.createElement(a.Fragment,null,a.createElement("div",{className:p.progressContainer,"data-name":"attention-score-progress-bar"},a.createElement(c.F.div,{className:p.progressBar,style:{width:e("attentionScore").pipe(n.U(o.g.fromRatio),n.U(o.g.prism.reverseGet),n.U((e=>`${e}%`)))}},a.createElement(r.XY,{className:p.progressValue,"data-name":"attention-score-progress-value"},e("attentionScore").pipe(n.U(o.g.fromRatio),n.U(o.g.prism.reverseGet),n.U((e=>`${e}%`)))))),a.createElement(r.XY,{className:p.description},e("attentionScoreDescription")))))},81591:(e,t,i)=>{i.d(t,{A:()=>s});var a=i(38983);class s{constructor(e,t){this._viewHistory=[],this._startupPlaceHolder=e,this._activeView=a.h.create(this._startupPlaceHolder),this._defaultView=t}get activeView(){return this._activeView.view()}get lastView(){return this._viewHistory[this._viewHistory.length-1]||this._defaultView}pushActiveView(e){const t=this._activeView.get();e.type!==t.type&&(t.type!==this._startupPlaceHolder.type&&this._viewHistory.push(t),this._activeView.set(e))}popActiveView(){const e=this._viewHistory.pop()||this._defaultView;this._activeView.set(e)}replaceActiveView(e){e.type!==this._activeView.get().type&&this._activeView.set(e)}}},99040:(e,t,i)=>{i.d(t,{f:()=>s});const a="MockCAPIPlagiarismClient. Not implemented yet. That implementation is a placeholder for the actual implementation, of the plagiarism feature. Proper implementation will be done later by the responsible team. That placeholder is required to be able to update SDUI version in extension. Client won't get those actions (enablePlagiarismSearch, disablePlagiarismSearch) as they are disabled in 'src/js/universal/bg/sdui/config.ts'.",s={enablePlagiarismSearch:()=>{throw new Error(a)},disablePlagiarismSearch:()=>{throw new Error(a)}}},30912:(e,t,i)=>{i.d(t,{I:()=>c,S:()=>a});var a,s=i(27378),r=i(50474),n=i(88056),o=i(19429),l=i(35407);!function(e){e.Context=s.createContext(n.Y.invariantContent("SidebarTextResources")),e.holder=o.VF((()=>({logoText:"GRAMMARLY",plagiarismTooltip:"Scan for plagiarism",setGoalsTooltip:"Adjust goals",statisticsTooltip:"See performance"})))}(a||(a={}));const c=l.composeS({denali:r.m.holder,sidebar:a.holder})},73607:(e,t,i)=>{i.d(t,{US:()=>G,hz:()=>j,ux:()=>W});var a=i(57050),s=i(27378),r=i(4903),n=i(20067),o=i(66896),l=i(89894),c=i(68579),d=i(36156),u=i(71841),p=i(74238),m=i(99116),h=i(35416),g=i(18955),f=i(77176),v=i(98403),b=i(32952),w=i(93508),y=i(76974),S=i(2844),k=i(60797),E=i(24209),C=i(18625),A=i(66310),_=i(40151),I=i(85089),x=i(2834),T=i(95093),M=i(24713),R=i(85985),F=i(49708),L=i(17343),P=i(19751),N=i(5114),B=i(19962),V=i(5739),O=i(81531),U=i(94895),D=i(66853);const H=U.UI.Grid.make((({slots:e,view:t})=>s.createElement(V.F.div,{style:{marginBottom:t("spacing").pipe(f.U(l.ux.rem))}},e.children)));function G(e){switch(e){case o.R.SpecialId.PredictionTakeaways:case o.R.SpecialId.Priority:return.75;default:return 1}}const j=s.forwardRef((({state:e,cardsViewModel:t,cardsListScrollManager:i,connectorElements:o,header:l,footer:p,capabilities:m,comparator:f,readersAttentionItemViewModel:S},k)=>{const E=v.jw((e=>{let t=7;return t=31*t+(0,d.AC)(e.currentLens.id),t=31*t+(h.nL.hasItems(e)?1231:1237),t}),e).view((e=>h.nL.hasItems(e.get())?e.view(h.nL.Prism.getLens()):null)).view((e=>e?{state:e,spacing:G(e.get().id)}:null)),C=s.useContext(n.Dg).state;return s.createElement(g.d,{className:y.of(""),name:"cardlist",stateSyncListener:z(i,o,C),height:W(e,i,m),isMaster:!0},s.createElement(s.Fragment,null,l?s.createElement(V.F.div,{className:D.headerOrFooterWrapper,mount:e=>o.lens("title").set(N.fromNullable(e))},l):null,s.createElement(V.F.div,{mount:k},E.view((e=>{return e?U.UI.mount((s=e.spacing,(0,a.zG)(c.A.cardList(r.O.item(t.actionEvents)),U.UI.patch("content","cell","item")((e=>(0,a.zG)(U.UI.Knot.make(H,{children:e.child}),U.UI.squash,U.UI.contramapState((e=>({children:e,root:{spacing:s}}))),U.UI.mapAction((e=>e.action))))))),(e=>(0,a.zG)(r.O.createCardListFlow(S)(t,e,new b.xQ,u.i$(i).pipe(w.O(!1)),m,f)))(e.state)):null;var s}))),p?s.createElement(V.F.div,{className:D.headerOrFooterWrapper},p):null))})),W=(e,t,i)=>{const a=(0,m.Sd)(i)(e.view(h.nL.mapper((({currentLens:e,alertSource:t})=>N.some({currentLens:e,alertSource:t})))));return S.aj([a.pipe(k.oA,f.U((({currentLens:e})=>e.cardsHeight)),w.O(0)),t.paddingTop]).pipe(f.U((([e,t])=>e+t)))},z=(e,t,i)=>{const a=O.C8.Logging.getLogger("view_models");return E.T(C.P((()=>{e.paddingTop.set(0)})),t.view("viewport").pipe(A.w(N.fold((()=>_.E),(e=>I.YC(e).pipe(x.b((()=>a.debug("update card list viewport due to viewport resize event"))),T.T(i.pipe(M.j("dragging"),R.h((e=>!e)),A.w(v.b2.rafScheduler),x.b((()=>a.debug("update card list viewport due to drag end event"))))),f.U((()=>e.getBoundingClientRect())),f.U((e=>({top:p.r.FromWindowTop.ISO.wrap(e.top),height:e.height}))))))),x.b(v.wW(e.viewport))),t.view("scrollProvider").pipe(A.w(N.fold((()=>_.E),(t=>F.R(t,"scroll").pipe(f.U((()=>t.scrollTop)),w.O(t.scrollTop),x.b(v.wW(e.scrollTop)),L.h(v.PU)))))),t.view("title").pipe(A.w(N.fold((()=>y.of(B.Rect.empty)),(e=>I.YC(e)))),f.U((e=>e.height)),P.shareReplay({bufferSize:1,refCount:!0}),x.b(v.wW(e.paddingTop))),t.view("scrollConsumer").pipe(A.w(N.fold((()=>_.E),(t=>e.scrollOffset.pipe(x.b((e=>{t.scrollTop+=e})))))))).pipe(L.h(void 0))}},95305:(e,t,i)=>{i.d(t,{C:()=>R,S:()=>M});var a=i(40327),s=i(46149),r=i(27378),n=i(4903),o=i(73607),l=i(101),c=i(66896),d=i(94785),u=i(6100),p=i(18955),m=i(98403),h=i(60797),g=i(77176),f=i(5114),v=i(19962),b=i(5739),w=i(94895),y=i(764),S=i(8901),k=i(38819),E=i(10339);const C=({upgradeViewModel:e})=>{const t=e.advancedAlerts.pipe(g.U(f.map((e=>({count:e.count,alerts:e.alerts()})))));return r.createElement(b.F.div,{className:E.premiumLens},w.UI.mount(k.r,w.Z.fromSideEffect((t=>{"upgrade"===t.action.action.action.kind?(e.trackUpgradeButtonClick({placement:"advancedIssues",bannerType:"GoPremium",upgradeHookName:"advancedIssues",upgradeHookSlot:"gDocsSidebarSuccessView"}),e.openUpgradeUrl(S.L.Place.gdocsSidebarCardList)):"onUpgradeButtonMount"===t.action.action.action.kind&&e.trackUpgradeButtonShow({placement:"advancedIssues",bannerType:"GoPremium",upgradeHookName:"advancedIssues",upgradeHookSlot:"gDocsSidebarSuccessView"})}),t)))};var A=i(50474),_=i(89379),I=i(43805),x=i(11102);const T=({successLensViewModel:e})=>{const t=(0,_.hM)((0,_.wK)(e.successState.view("type"),r.useContext(A.m.Context)));return r.createElement(b.F.div,{className:x.successLens},w.UI.mount(I.q,t))},M=r.forwardRef((function({state:e,cardsViewModel:t,upgradeViewModel:i,cardsListScrollManager:a,capabilities:l,upgradeHookFlow:p,...h},g){const v=m.jw((e=>{let t=7;return t=31*t+(0,s.AC)(e.currentLens.id),t=31*t+(u.v.WithSuccess.State.isInSuccess(l)(e)?1231:1237),t}),e);return r.createElement(R,{ref:g},(e=>r.createElement(b.F.Fragment,null,v.view((s=>{const m=s.get();return m.currentLens.id===c.R.SpecialId.Premium?r.createElement(C,{upgradeViewModel:i}):u.v.WithSuccess.State.isInSuccess(l)(m)?r.createElement(T,{successLensViewModel:h.successLensViewModel}):r.createElement("div",null,r.createElement(o.hz,{state:s,cardsViewModel:t,cardsListScrollManager:a,connectorElements:e,header:w.UI.mount(d.n.TogglablePanel,p),comparator:n.O.listItemOrd,capabilities:l,readersAttentionItemViewModel:f.none}))})))))})),R=r.forwardRef((function({children:e,onClick:t,className:i=y.cardList,footer:s},n){const o=p.d.Elements.create(),c=(0,a.pipe)(o.view("viewport"),h.oA,g.U(v.Rect.fromEl));return r.createElement("div",{onClick:t,className:i,ref:e=>{"function"==typeof n?n(e):n&&(n.current=e);const t=f.fromNullable(e);o.lens("scrollConsumer").set(t),o.lens("scrollProvider").set(t),o.lens("viewport").set(t)}},r.createElement(l.l.RootVirtualContainer,{name:"cardListConnector",viewport:c},e(o)),s)}))},55272:(e,t,i)=>{i.d(t,{Z:()=>c});var a=i(27378);if(3075==i.j)var s=i(62295);if(3075==i.j)var r=i(31278);if(3075==i.j)var n=i(66896);if(3075==i.j)var o=i(5739);var l=i(34162);const c=({lensPreviewViewModel:e})=>{const t=e.getLens(n.R.SpecialId.AllAlerts).view((e=>e.count));return a.createElement(o.F.div,{className:l.footer},a.createElement(d,{activeAlerts:t}))},d=({activeAlerts:e})=>a.createElement(o.F.Fragment,null,e.view((e=>e>0?a.createElement(s.x.OutcomeCounter,{count:e,theme:{counterWrapper:l.counterWrapper,counterContent:l.counter}}):a.createElement(r.JO.CheckmarkOutcomes,{className:l.counterCheckmarkIcon}))))},86338:(e,t,i)=>{i.d(t,{$l:()=>I});var a=i(27378);if(3075==i.j)var s=i(55563);if(3075==i.j)var r=i(30912);if(3075==i.j)var n=i(57796);if(3075==i.j)var o=i(64757);if(3075==i.j)var l=i(31278);if(3075==i.j)var c=i(81301);if(3075==i.j)var d=i(3656);if(3075==i.j)var u=i(66896);if(3075==i.j)var p=i(74660);if(3075==i.j)var m=i(40743);if(3075==i.j)var h=i(87667);if(3075==i.j)var g=i(92644);if(3075==i.j)var f=i(39474);if(3075==i.j)var v=i(43623);if(3075==i.j)var b=i(84317);if(3075==i.j)var w=i(77176);if(3075==i.j)var y=i(85985);if(3075==i.j)var S=i(22232);if(3075==i.j)var k=i(8125);if(3075==i.j)var E=i(5114);if(3075==i.j)var C=i(12187);var A=i(94895),_=i(86642);const I=({state:e,navigationViewModel:t,modalManager:i,lensPreviewViewModel:r,features:n})=>{switch(n.priorityLens.kind){case s.h.Kind.dropdown:return a.createElement(x,{state:e,navigationViewModel:t,modalManager:i,lensPreviewViewModel:r});case s.h.Kind.priorityToggle:return a.createElement(T,{state:e,navigationViewModel:t,modalManager:i,lensPreviewViewModel:r,defaultMode:n.priorityLens.defaultMode});case s.h.Kind.none:return a.createElement(M,{navigationViewModel:t,modalManager:i});default:(0,S.vE)(n.priorityLens)}},x=({state:e,navigationViewModel:t,modalManager:i,lensPreviewViewModel:s})=>a.createElement("div",{className:_.priorityLensHeader},a.createElement(R,{navigationViewModel:t,modalManager:i}),a.createElement("div",{className:_.prioritySwitchWrapper},A.UI.mount(h.n.Switch,(0,g.i)(s,t,e.pipe(w.U((e=>e.currentLens.id))))))),T=({state:e,navigationViewModel:t,modalManager:i,lensPreviewViewModel:s,defaultMode:r})=>a.createElement("div",{className:_.priorityLensHeader},a.createElement(R,{navigationViewModel:t,modalManager:i}),a.createElement("div",{className:_.prioritySwitchFlatWrapper},A.UI.mount(v.B.DefaultHeader,(0,b.HP)(t,e.pipe(w.U((e=>e.currentLens.id)),y.h((0,k.Kg)(u.R.isPriority,u.R.isAllAlerts))),"priority"===r?f.H.LensMode.priority:f.H.LensMode.all,"compact",s,10)))),M=({navigationViewModel:e,modalManager:t})=>a.createElement("div",{className:_.defaultHeader},a.createElement(R,{navigationViewModel:e,modalManager:t}),a.createElement("div",{...(0,C.Sh)(_.lensNavigation,_.disabledLensNavigation)},A.UI.mount(m.C,A.Z.fromSideEffect((t=>{e.events.next({type:"switchToLens",id:t.lens.id,focusFirst:!1,actionSource:p.l$.sidebar})}),{activeLensId:E.none,previews:Object.values(e.lensPreviews.get()).filter((e=>e.id!==u.R.SpecialId.Vox)),disabled:!1})))),R=({navigationViewModel:e,modalManager:t})=>{const i=a.useContext(r.S.Context),s=t.state.view(E.exists((e=>e.instance.type===c.dC.SetGoals)));return a.createElement("div",{className:_.head},a.createElement("div",{className:_.headerGroup},a.createElement(n.K,{className:_.logoIcon,size:18}),a.createElement(d.H5,{className:_.logoText},i.logoText)),a.createElement(o.zx.Flat,{name:"setGoals",className:_.setGoalsButton,title:i.setGoalsTooltip,titleAlign:"bottomCenter",active:s,disabled:s,onClick:()=>e.events.next({type:"setGoals"})},a.createElement(l.JO.GoalsEmpty,{width:24})),a.createElement("div",{className:_.headerGroup},a.createElement("div",{className:_.divider}),a.createElement(o.zx.Flat,{name:"closeSidebar",onClick:()=>e.events.next({type:"toggleSidebar",actionSource:p.l$.sidebar})},a.createElement(l.JO.Close,{width:16}))))}},78249:(e,t,i)=>{i.d(t,{L:()=>o});var a=i(57050),s=i(27378),r=i(5114),n=i(5739);const o=({modalManager:e})=>s.createElement(n.F.Fragment,null,e.state.view((0,a.ls)(r.map((({component:e})=>e)),r.toNullable)))},29274:(e,t,i)=>{i.d(t,{P:()=>o});var a=i(27378),s=i(50790),r=i(82858),n=i(32380);const o={unauthorizedError:(e,t)=>a.createElement(r.s.UnauthorizedError,{action:t("gotoLogin")}),offline:()=>a.createElement(l,null),alertUndo:(e,t)=>a.createElement(n.A.Standard,{action:t("undo"),params:e.args.params})},l=()=>a.createElement(s.DI.TitledContent,{title:"Lost Connection"},"Your Internet session was interrupted.")},88571:(e,t,i)=>{i.d(t,{Q:()=>l});var a=i(27378),s=i(15073),r=i(60797),n=i(95300),o=i(5114);const l=({children:e,remSize:t,setter:i})=>(c+=1,a.useEffect((()=>{const e=t.subscribe((e=>{d.next(o.some(e)),i(o.some(e))}));return()=>{e.unsubscribe(),c-=1,0===c&&(d.next(o.none),i(o.none))}}),[t]),a.createElement(s.u.Context.Provider,{value:d.pipe(r.oA)},e));let c=0;const d=new n.X(o.none)},54657:(e,t,i)=>{i.d(t,{_:()=>r});var a=i(27378);if(3075==i.j)var s=i(5494);const r=({children:e,className:t})=>a.createElement("div",{className:t,style:{position:"fixed",right:"0px",top:"0px",bottom:"0px",width:s.xK,zIndex:1e3,background:"white",display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100vh"}},e)},5494:(e,t,i)=>{i.d(t,{H2:()=>r,iB:()=>a,kl:()=>n,xK:()=>s});const a=".docs-companion-sidebar",s="300px";var r;!function(e){e.selector=".companion-guest-app-switcher .app-switcher-button",e.selectedClass="app-switcher-button-selected",e.selectedSelector=`.${e.selectedClass}`,e.activeClass="app-switcher-button-active",e.hoverClass="app-switcher-button-hover",e.disabledClass="app-switcher-button-disabled"}(r||(r={}));const n=".companion-about-panel-button"},9780:(e,t,i)=>{i.d(t,{I:()=>n});var a=i(5802),s=i(41966);const r={priority:a.P.Priority.highest,timeout:a.P.TimeoutDisabled,position:a.P.Position.top,viewType:a.P.ViewType.standard};var n;!function(e){e.createFactory=function(){return{alertUndo:s.r.createBuilder().build({priority:a.P.Priority.low,timeout:a.P.DefaultTimeout,position:a.P.Position.bottomRight,viewType:a.P.ViewType.standard}),unauthorizedError:s.r.createBuilder().build(r),offline:s.r.createBuilder().build(r)}}}(n||(n={}))},25814:(e,t,i)=>{i.d(t,{U9:()=>T,jv:()=>R});var a=i(27378);if(3075==i.j)var s=i(864);if(3075==i.j)var r=i(30912);if(3075==i.j)var n=i(95305);if(3075==i.j)var o=i(55272);if(3075==i.j)var l=i(86338);if(3075==i.j)var c=i(78249);if(3075==i.j)var d=i(29274);if(3075==i.j)var u=i(88571);if(3075==i.j)var p=i(54657);if(3075==i.j)var m=i(69910);var h=i(8307),g=i(4147);if(3075==i.j)var f=i(51369);if(3075==i.j)var v=i(42103);if(3075==i.j)var b=i(33678);if(3075==i.j)var w=i(15073);if(3075==i.j)var y=i(50474);if(3075==i.j)var S=i(47861);if(3075==i.j)var k=i(90845);if(3075==i.j)var E=i(76974);if(3075==i.j)var C=i(91463);var A=i(31584),_=i(3320),I=i(2479);const x=({state:e,cardsViewModel:t,navigationViewModel:i,successLensViewModel:s,upgradeViewModel:r,cardsListScrollManager:c,notificationManager:u,lensPreviewViewModel:m,modalManager:h,features:g,capabilities:f,upgradeHookFlow:v})=>a.createElement(p._,{className:I.sidebarContainer},a.createElement(l.$l,{state:e,navigationViewModel:i,modalManager:h,lensPreviewViewModel:m,features:g}),a.createElement(n.S,{cardsViewModel:t,state:e,successLensViewModel:s,upgradeViewModel:r,cardsListScrollManager:c,capabilities:f,upgradeHookFlow:v}),"none"!==g.priorityLens.kind?null:a.createElement(o.Z,{lensPreviewViewModel:m}),a.createElement(S.i,{key:"notificationCenter",manager:u,views:d.P,theme:{grid:{container:_.container,bottomLeft:_.bottomLeft,bottomRight:_.bottomRight,top:_.top},view:{wrapper:_.notificationWrapper}}}));function T(e){return({integration:t,sidebarReady:i,shortenItFeature:r,ethicalAIFeature:n,cardEvents:o,user:l,startWithExpandedUphook:d})=>function(){const u=t.engine,p=new s.C,{lensState:h,cardsViewModel:g,navigationViewModel:v,successLensViewModel:b,upgradeViewModel:w,dispose:y,cardsListScrollManager:S,notificationManager:E,lensPreviewViewModel:C,modalManager:A,capabilities:_,upgradeHookFlow:I}=(0,m.G)(u,t.denaliViewAdapter,e,t.connectionState,t.gnar,t.user,l,t.document.settings.lens("selectedLens"),t.features,i,r,n,o,t.experimentClient,d);return k.P.useEffectOnWillUnmount((()=>{u.shutdown(),y()})),a.createElement(M,{environment:p},a.createElement(x,{user:l,gnar:t.gnar,state:h,cardsViewModel:g,navigationViewModel:v,successLensViewModel:b,upgradeViewModel:w,cardsListScrollManager:S,notificationManager:E,lensPreviewViewModel:C,modalManager:A,features:t.features,capabilities:_,upgradeHookFlow:I}),a.createElement(c.L,{modalManager:A}),a.createElement(f.X,null))}}const M=({environment:e,children:t})=>{const i=a.useRef((0,r.I)(y.m.getConfig(e.has(s.U.Flag.isAppleSystem)?"mac":"windows")));return a.createElement(u.Q,{remSize:E.of(16),setter:e=>w.u.setRootCssVar(document.documentElement,e)},a.createElement(s.U.Context.Provider,{value:e},a.createElement(b.a.Context.Provider,{value:e},a.createElement(r.S.Context.Provider,{value:i.current.sidebar},a.createElement(y.m.Context.Provider,{value:i.current.denali},a.createElement(C.TG.ContextMock,null,a.createElement(v.G.DefaultProvider,null,a.createElement(R,null,t))))))))},R=({children:e})=>a.createElement(a.Fragment,null,a.createElement(g.o,{"data-grammarly-part":"gdocs-sidebar",className:A.wrapper},e),a.createElement(h.p,{thin:!0,thinItalic:!0,regular:!0,italic:!0,bold:!0,boldItalic:!0,semiBold:!0}))},13299:(e,t,i)=>{i.d(t,{CV:()=>O,hp:()=>V,k9:()=>U});var a=i(57050),s=i(40327),r=i(55649),n=i(59443),o=i(74660),l=i(66896),c=i(18625),d=i(60797),u=i(77176),p=i(66310),m=i(17343),h=i(98403),g=i(91224),f=i(40151),v=i(38194),b=i(76974),w=i(24209),y=i(93508),S=i(16118),k=i(85985),E=i(28043),C=i(41398),A=i(83401),_=i(598),I=i(25980),x=i(52658),T=i(74238),M=i(99116),R=i(4890),F=i(35416),L=i(5114),P=i(83078),N=i(38983);class B{constructor(e,t){this._cardPositions=e,this._markPositions=t,this._log=r.Y.create("SidebarAlignmentViewModelImpl")}alignCardToMark({id:e,renderOptions:{features:t},activeAlert:i,activeHighlightIndex:a},r){return c.P((()=>this._markPositions.getMarkAlertPosition({alert:i,highlightIndex:a}))).pipe(d.oA,u.U((i=>(0,s.pipe)(this._cardPositions.getCardSuggestedPositionInViewport(e,t.has(R.j.Features.showLabel),L.some(i),"cardContentTop"),L.fromEither))),d.oA,p.w((i=>this._cardPositions.setCardPosition(e,t.has(R.j.Features.showLabel),!0,i.top))),m.h(h.PU),g.K((e=>(this._log.error("Cannot align card to mark",e),f.E))),v.B())}alignMarkTo(e,t,i,a){return c.P((()=>b.of((0,s.pipe)(this._cardPositions.getCardSuggestedPositionInViewport(e.id,e.renderOptions.features.has(R.j.Features.showLabel),L.some(i),"cardContentTop"),L.fromEither)).pipe(d.oA))).pipe(p.w((i=>w.T(this._markPositions.moveAlertHighlightInViewport(t,T.r.FromWindowTop.ISO.modify(T.L.concatC(i.contentOffset))(i.top),n.uq.initial),this._cardPositions.setCardPosition(e.id,e.renderOptions.features.has(R.j.Features.showLabel),!0,i.top)))),m.h(h.PU),g.K((e=>(this._log.error("Cannot align mark to suggested position",e),f.E))),v.B())}alignMarkToCard({id:e,renderOptions:{features:t},activeHighlightIndex:i,activeAlert:a},r,o=L.none){return c.P((()=>b.of((0,s.pipe)(this._cardPositions.getCardSuggestedPositionInViewport(e,t.has(R.j.Features.showLabel),o,"cardContentTop"),L.fromEither)).pipe(d.oA))).pipe(p.w((s=>w.T(this._markPositions.moveAlertHighlightInViewport({alert:a,highlightIndex:i},T.r.FromWindowTop.ISO.modify(T.L.concatC(s.contentOffset))(s.top),n.uq.initial),this._cardPositions.setCardPosition(e,t.has(R.j.Features.showLabel),!0,s.top)))),m.h(h.PU),g.K((e=>(this._log.error("Cannot align mark to card",e),f.E))),v.B())}alignCardTo(e,t,i){const a=i!==I.v.Animation.NO_ANIMATION;return c.P((()=>b.of((0,s.pipe)(this._cardPositions.getCardSuggestedPosition(e.id,e.renderOptions.features.has(R.j.Features.showLabel),L.some(t),"cardTop"),L.fromEither)).pipe(d.oA))).pipe(p.w((t=>this._cardPositions.setCardPosition(e.id,e.renderOptions.features.has(R.j.Features.showLabel),a,t.top))),m.h(h.PU),g.K((e=>(this._log.error("Cannot align card to required top",e),f.E))),v.B())}}const V=(e,t,i,a,s,r)=>new B(x.eZ.getSuperScrollMapper(e,a,N.h.create(16)),x.UC.getMapper(t,s,r));var O;!function(e){e.skip="skip"}(O||(O={}));const U=(e,t,i,r,n,c=h.b2.rafScheduler)=>{const d=(e,i,a,s)=>{if(a===o.l$.text)return t.alignCardToMark(e,i?I.v.Animation.ANIMATE_ALL:I.v.Animation.NO_ANIMATION,!0);if(a===F.h8.forceText)return t.alignCardToMark(e,I.v.Animation.NO_ANIMATION,!1);{const r=a===o.l$.sidebar;return t.alignMarkToCard(e,r?i?I.v.Animation.ANIMATE_ALL:I.v.Animation.ANIMATE_MARK:I.v.Animation.NO_ANIMATION,s)}},g=w.T(e.view(F.nL.mapper((({currentLens:e,alertSource:t})=>L.some({currentLens:e,alertSource:t})))).pipe(y.O(L.none),u.U(L.map((e=>e.currentLens.id))),S.G(),k.h((([e,t])=>(0,s.pipe)(P.map2(((e,t)=>e!==t))(e,t),L.exists(a.yR)))),m.h(L.none)),e.view(F.nL.mapper((({currentLens:e,alertSource:t})=>L.some({currentLens:e,alertSource:t})))).pipe(k.h(L.exists((({currentLens:e})=>(0,M.Bk)(n)(e)))),u.U(L.chain((({currentLens:e,alertSource:t})=>(0,s.pipe)(r(e),L.filter(n.isValidToAlign),L.map((i=>({item:i,source:t,lensId:e.id}))))))))).pipe(E.x((0,a.ls)(P.map2(((e,t)=>e.lensId===t.lensId&&e.item.activeAlert.id===t.item.activeAlert.id&&e.item.visualState.transition.type===t.item.visualState.transition.type&&e.item.activeHighlightIndex===t.item.activeHighlightIndex)),L.exists(a.yR))),y.O(L.none),S.G(),u.U((([e,t])=>(0,s.pipe)(t,L.map((i=>({item:i.item,source:i.source,animate:(0,s.pipe)(e,P.forAll((({lensId:e})=>e===i.lensId))),suggestedPosition:(0,s.pipe)(e,L.filter((e=>!n.isScheduledToDispose(e.item))),L.chain((e=>(0,s.pipe)(t,L.map((t=>[e.item,t.item]))))),L.filter((([e,t])=>t.lensId===e.lensId&&t.positionState.absTop>e.positionState.absTop)),L.map((([e,t])=>T.r.FromWindowTop.ISO.wrap(t.positionState.absTop))))})))))),p.w(L.fold((()=>f.E),c)),C.M(i),p.w((([{item:e,source:t,animate:a,suggestedPosition:r},n])=>(0,s.pipe)(n,L.fold((()=>d(e,a,t,r)),(t=>(i.set(L.none),t===O.skip?A.C:d(e,a,t,r))))))));return{id:"alignmentSideEffect",when:l.R.isWithAlertsId,what:F.nL.Effect.Applicator.create(g.pipe(_.c(A.C)))}}},34849:(e,t,i)=>{if(i.d(t,{C:()=>n}),3075==i.j)var a=i(7737);if(3075==i.j)var s=i(67331);if(3075==i.j)var r=i(9922);class n{constructor(e,t,i){this._cardsViewModel=e,this._gnar=t,this._getAlertById=i,this._subs=new r.w.Keeper,this.subscribeToSidebarCardActions()}subscribeToSidebarCardActions(){this._subs.push(s.g.createSubscription(this._cardsViewModel.actionEvents,this._gnar,this._getAlertById),(0,a.t)(this._cardsViewModel.actionEvents,this._gnar,"gdocs"))}dispose(){this._subs.dispose()}}},36689:(e,t,i)=>{i.d(t,{A7:()=>C,CH:()=>I,Ng:()=>_,uo:()=>A});var a=i(57050),s=i(66896),r=i(74660),n=i(55935),o=i(66310),l=i(40151),c=i(76974),d=i(85985),u=i(41398),p=i(77176);if(3075==i.j)var m=i(28043);if(3075==i.j)var h=i(598);if(3075==i.j)var g=i(83401);if(3075==i.j)var f=i(13444);if(3075==i.j)var v=i(57091);if(3075==i.j)var b=i(16118);var w=i(35416);if(3075==i.j)var y=i(6100);var S=i(5114);if(3075==i.j)var k=i(83078);if(3075==i.j)var E=i(38983);function C(e,t,i){return{id:"alertSwitchingByClickSideEffect",when:a.W8,what:w.nL.Effect.SwitchAlert.create(e.alertClicked.pipe(n.T(1),o.w(S.fold((()=>l.E),c.of)),d.h((e=>!i||e.alert.lensId!==s.R.SpecialId.Premium)),u.M(t.pipe(d.h(w.nL.hasCards),p.U((e=>e.currentLens.id))),((e,t)=>({...e,lensId:t}))),p.U((({alert:e,highlightIndex:t,lensId:i})=>({alertHighlight:{alert:e,highlightIndex:t},alertSource:r.l$.text,options:{lensId:i,order:"textOrder"}})))))}}function A(e,t){return{id:"connectionManager",when:()=>!0,what:w.nL.Effect.SwitchAlert.create(e.pipe(p.U((e=>e.online)),m.x(),o.w((e=>e?l.E:t.enqueue("offline",{reconnectTime:E.h.create(10)}))),h.c(g.C)))}}function _(e,t,i){const a=e.getLens(s.R.SpecialId.Premium).pipe(p.U((e=>e.count>0)),m.x());return{id:"autoSwitchToPremiumLensSideEffect",when:e=>e===s.R.SpecialId.AllAlerts||e===s.R.SpecialId.Priority,what:w.nL.Effect.SwitchLens.create(t.pipe(p.U(y.v.WithSuccess.State.isInSuccess(i)),m.x(),f.g(1),v.a(a),d.h((([e,t])=>e&&t)),p.U((()=>({lensId:s.R.SpecialId.Premium,alertSource:r.l$.sidebar,options:{toFocus:w.nL.Effect.FocusBehavior.noFocus}})))))}}function I(e,t){const i=e.getLens(s.R.SpecialId.AllAlerts).pipe(p.U((e=>e.count>0)),m.x()),n=e.getLens(s.R.SpecialId.Priority).pipe(p.U((e=>e.count>0)),m.x());return{id:"autoSwitchFromPremiumLensSideEffect",when:a.W8,what:w.nL.Effect.SwitchLens.create(t.pipe(p.U((e=>e.currentLens.id)),m.x(),b.G(),d.h((([e,t])=>t===s.R.SpecialId.Premium)),p.U((([e,t])=>e)),v.a(i,n),p.U((([e,t,i])=>e===s.R.SpecialId.Priority&&i?S.some(s.R.SpecialId.Priority):e===s.R.SpecialId.AllAlerts&&t?S.some(s.R.SpecialId.AllAlerts):S.none)),d.h(S.isSome),p.U(k.unsafeGet),p.U((e=>({lensId:e,alertSource:r.l$.sidebar,options:{toFocus:w.nL.Effect.FocusBehavior.noFocus}})))))}}},82001:(e,t,i)=>{i.d(t,{D:()=>a});var a,s=i(40327),r=i(73353),n=i(5114),o=i(55415);!function(e){e.updateCitationStyle=(e,t)=>i=>{const a=(0,s.pipe)(e.defaultContext.get(),n.getOrElse((()=>r.R$.defaultContextFallback))),l=(0,s.pipe)(e.context.get(),r.R$.OutcomeContext.withCitationStyle(i));(0,s.pipe)(l,e.updateContext)&&t.goalsFormSuccess((0,s.pipe)(l.domain,n.getOrElse((()=>a.domain))),(0,s.pipe)(l.goals,n.getOrElse((()=>a.goals)),(e=>Array.from(e))),"essayDetectionCard",(0,s.pipe)(l.outcomeContext,n.map(o.pick("type")),n.toUndefined),void 0,(0,s.pipe)(l.outcomeContext,n.map(o.pick("citation")),n.toUndefined),void 0)}}(a||(a={}))},69910:(e,t,i)=>{if(i.d(t,{G:()=>ke}),3075==i.j)var a=i(57050);if(3075==i.j)var s=i(40327);if(3075==i.j)var r=i(95294);if(3075==i.j)var n=i(53391);if(3075==i.j)var o=i(28682);if(3075==i.j)var l=i(4903);if(3075==i.j)var c=i(55563);if(3075==i.j)var d=i(864);if(3075==i.j)var u=i(9780);if(3075==i.j)var p=i(34849);if(3075==i.j)var m=i(82001);if(3075==i.j)var h=i(14592);if(3075==i.j)var g=i(57882);if(3075==i.j)var f=i(8901);if(3075==i.j)var v=i(53945);if(3075==i.j)var b=i(9205);if(3075==i.j)var w=i(56913);if(3075==i.j)var y=i(51129);if(3075==i.j)var S=i(52622);if(3075==i.j)var k=i(81301);if(3075==i.j)var E=i(61813);if(3075==i.j)var C=i(74660);if(3075==i.j)var A=i(66896);if(3075==i.j)var _=i(13313);if(3075==i.j)var I=i(94785);if(3075==i.j)var x=i(70023);if(3075==i.j)var T=i(98403);if(3075==i.j)var M=i(76974);if(3075==i.j)var R=i(77176);if(3075==i.j)var F=i(85985);if(3075==i.j)var L=i(24209);if(3075==i.j)var P=i(60797);if(3075==i.j)var N=i(23063);if(3075==i.j)var B=i(93508);if(3075==i.j)var V=i(55935);if(3075==i.j)var O=i(2834);if(3075==i.j)var U=i(17343);if(3075==i.j)var D=i(28043);if(3075==i.j)var H=i(66310);if(3075==i.j)var G=i(40151);if(3075==i.j)var j=i(21619);if(3075==i.j)var W=i(54216);if(3075==i.j)var z=i(54466);if(3075==i.j)var q=i(92485);if(3075==i.j)var K=i(91549);if(3075==i.j)var Z=i(83167);if(3075==i.j)var Q=i(20594);if(3075==i.j)var Y=i(35607);if(3075==i.j)var $=i(20291);if(3075==i.j)var X=i(34383);if(3075==i.j)var J=i(11245);if(3075==i.j)var ee=i(4890);if(3075==i.j)var te=i(35416);if(3075==i.j)var ie=i(6100);if(3075==i.j)var ae=i(73841);if(3075==i.j)var se=i(89770);if(3075==i.j)var re=i(39920);if(3075==i.j)var ne=i(93265);if(3075==i.j)var oe=i(17372);if(3075==i.j)var le=i(66866);if(3075==i.j)var ce=i(27125);if(3075==i.j)var de=i(5114);if(3075==i.j)var ue=i(83078);if(3075==i.j)var pe=i(95195);if(3075==i.j)var me=i(8125);if(3075==i.j)var he=i(95574);if(3075==i.j)var ge=i(38983);if(3075==i.j)var fe=i(81531);var ve=i(34217);if(3075==i.j)var be=i(13299);if(3075==i.j)var we=i(36689);if(3075==i.j)var ye=i(52098);if(3075==i.j)var Se=i(1050);const ke=(e,t,i,ke,Ee,Ce,Ae,_e,Ie,xe,Te,Me,Re,Fe,Le)=>{const Pe=fe.C8.Logging.getLogger("view_models"),Ne=ge.h.create(_.A.defaultState),Be=ge.h.create(!1),Ve=W.t.create(W.t.defaultLensFilters,W.t.defaultTextFilters),Oe=e.alertsList.state.pipe((t=>_.A.get(t,e.alertsList.lensesScores,Ve))).subscribe(T.wW(Ne)),Ue=new ye.t(Ne.view("lenses"),Ve,e.sessionModel.scoreStatus),De=(0,q.$y)((0,S.a)(t).getContents),He={features:(()=>{const e=new Set;return e.add(Q.IG.Features.showCardLabelInOutcomes),e})(),cardLayoutDensityMode:ee.j.Density.compact,shouldAnimateAlertApply:a.jv,cardVisualMode:ge.h.create(ee.j.CardVisualMode.RegularLightMode)},Ge=(0,Q.Ls)(De,e.alertsReader,He,(()=>M.of(de.none)),e.mutingAlertsReader),je=K.R.ItemFactory.create(De,e.mutingAlertsReader,He,(()=>M.of(de.none))),We=(0,J.U)(De,e.alertsReader,He,X.T.ordAlert),ze=l.O.getCapabilities(Ge,je,We,e.alertsReader,De,ge.h.create(X.D.empty()),(()=>$e.get().currentLens.id)),qe=new re.gi(l.O.equatable.structEq,l.O.defaultOrd),Ke=(0,re.is)(Ge,ze),Ze=ne.v.createWithInitialAlerts(qe,Ke,Ve,(0,a.ff)(C.bZ.isMuted),ze),Qe=new se.oq(e.alertsList.state,e.alertsReader,Ne.view("lenses"),e.positionManager,Ue,Ze,Ke,ze,Ve),Ye=A.R.SpecialId.AllAlerts;i.next({kind:c.R.ChangeLens,selectedLens:"all"});const $e=ge.h.create(Qe.emptyState(Ye)),Xe=$e.pipe(R.U((e=>e.currentLens.id)),F.h(n.U.SelectedLens.filter)).subscribe((e=>_e.set(e))),Je=(0,Z.u0)((()=>t.getCursor().index),Qe),et=new f.x(e.alertsList,$e,5,Ee),tt=new v.r(e.alertsList,$e),it=new k.EQ(new Se.o(e.sessionModel,et,Ce.isPremium,Ee,Fe.isGateEnabled(b.K.StudentsOFEGdocs)||Fe.isGateEnabled(b.K.StudentsOFEInternal))),at=new g.$($e,Ue,i,it,t,Ie,Ee,oe.z.all),st=new z.Xx({flush:()=>t.flushChanges()},at.events,Ge,e.alertsService,e.alertsReader,(()=>Promise.resolve()),(()=>Promise.resolve()),(0,s.pipe)(e.mutedAlertsCategoriesModel,de.map((e=>({model:e,openSuggestionsManagement:()=>self.open((0,w.Um)().suggestionsSettings)})))),de.none,(()=>!1),l.O.getActiveItemWithAlert,ze,$e,new d.C,{bufferTransitions:!0,showGbPrompt:!1},m.D.updateCitationStyle(e.sessionModel,Ee)),rt=new p.C(st,Ee,(t=>e.alertsReader.getById(t))),nt=y.n5.isFree(Ae.get()),ot=(0,s.pipe)(Le?e=>L.T(et.advancedAlerts.pipe(P.oA,R.U((e=>({kind:I.n.State.expanded,showCloseButton:!0,alertsState:{count:e.count,alerts:e.alerts()}}))),N.q(1),B.O({kind:I.n.State.minimized,alertsCount:0})),(0,x.d)(et.advancedAlerts)(e).pipe(V.T(1))):(0,x.d)(et.advancedAlerts),ve.Z.extendActions(O.b((e=>{e.key===I.n.State.minimized&&"onClick"===e.action.action&&nt&&Be.set(!0),e.key===I.n.State.expanded&&"collapse"===e.action.kind&&Be.set(!1),e.key===I.n.State.expanded&&"upgrade"===e.action.kind&&(et.trackUpgradeButtonClick({placement:"advancedIssues",bannerType:"SeeWhatsInPremium",upgradeHookName:"advancedIssues",upgradeHookSlot:"gDocsSidebar"}),et.openUpgradeUrl(f.L.Place.gdocsSidebarCardList)),e.key===I.n.State.expanded&&"onUpgradeButtonMount"===e.action.kind&&et.trackUpgradeButtonShow({placement:"advancedIssues",bannerType:"SeeWhatsInPremium",upgradeHookName:"advancedIssues",upgradeHookSlot:"gDocsSidebar"})})))),lt=Be.pipe(U.h(T.PU)),ct=tt.freeAlerts.pipe(R.U((e=>{var t;return!(null===(t=(0,s.pipe)(e,ue.orUndefined))||void 0===t?void 0:t.count)&&nt})),D.x()).subscribe(T.wW(Be)),dt=(0,h.xl)($e,Ve,lt,Be),ut=new h.o$(e.alertsList,e.alertsReader,e.positionManager,e.alertsService,t,$e,dt,l.O.getActiveItemWithAlert,xe,!1,Be),pt=new Y.o((()=>pe.right(void 0))),mt=(0,be.hp)($e,ut,ge.h.create(16),pt,t,Pe),ht=new j.mN(t,$e,ut,e.alertsReader,l.O.getActiveItemWithAlert),gt=new E.y(ge.h.create([]),u.I.createFactory(),3,5e3),ft=[z.dv.changeAlertEffect($e,st,Ge,l.O.getActiveItemWithAlert,e.alertsReader,de.some(mt),Je,Pe.getLogger("CardsViewModelEffects.changeAlertEffect")),...st.getApplicatorEffects(),$.R7($e,pt,ze,(0,a.MZ)(st.actionEvents),{cardsAroundActive:25,cardsBeyondViewport:25}),we.A7(ht,$e),(0,be.k9)($e,mt,ge.h.create(de.none),l.O.getActiveAlignableItem,ze),$.XU($e,pt,ze),le.EQ.focusMarkByActiveAlert($e,ut,e.alertsReader,l.O.getActiveFocusableItem,Pe.getLogger("MarksEffects.focusMarkByActiveAlert")),we.uo(ke,gt),z.dv.createSendActiveAlertFeedbacksEffect($e,l.O.getActiveItemWithAlert,e.alertsService,e.alertsReader,Pe.getLogger("CardsViewModelEffects.createSendActiveAlertFeedbacksEffect")),we.Ng(Ue,$e,ze),we.CH(Ue,$e),at.lensChangeEffect],vt="none"!==Ie.priorityLens.kind?at.lensMode.view(oe.K.isPriorityMode).view((0,me.RN)(A.R.SpecialId.Priority,A.R.SpecialId.AllAlerts)):ge.h.create(A.R.SpecialId.AllAlerts),bt=(0,Z.VC)(Qe,Je,vt,ze),wt=ge.h.create(!0),yt=Z.Py.getStateTransformer(Z.Py.getDefaultBehavior(l.O.getActiveItemWithAlert,ze),bt,e.alertsReader,ze,(e=>wt.get()&&"text"!==e.alertSource),a.Q1,vt),St=ie.v.Items.getItemsPositionsUpdateTransformer(ze),kt=(0,a.ls)(yt,he.chainLeft(St)),Et=new ae.l($e,Qe,e.alertsReader,e.alertsService,ft,l.O.getActiveItemWithAlert,kt),Ct=new ce.L($e,e.sessionModel,a.Q1,ze,de.none,de.none,(e=>te.nL.isWithPriorityList(e)&&ie.v.WithPriority.onlyNonPriorityAlertsLeft(e.currentLens,l.O.priorityTest,ze)),ie.v.WithPriority.isInSuccess(l.O.priorityTest,ze),ge.h.create(!1)),At=Te.pipe(H.w(de.fold((()=>G.E),(t=>t.initAssistantSession(st.actionEvents,e.alertsReader,$e,e.alertsService,e.alertsList.state))))).subscribe(),_t=Me.pipe(H.w(de.fold((()=>G.E),(t=>t.initCardActionsProcessing(st.actionEvents,e.alertsReader,(0,o.aU)($e),(0,o.X5)(ht,$e),$e))))).subscribe(),It=st.actionEvents.subscribe((0,a.ls)((0,r.JH)(e.alertsReader,r.SV.Source.sidebar),ue.tap((e=>Re.next(e)))));return{lensState:$e,lensStateManager:Et,cardsViewModel:st,marksViewModel:ut,navigationViewModel:at,successLensViewModel:Ct,alignmentViewModel:mt,lensPreviewViewModel:Ue,cardsListScrollManager:pt,notificationManager:gt,upgradeViewModel:et,modalManager:it,capabilities:ze,upgradeHookFlow:ot,dispose:()=>{It.unsubscribe(),ut.dispose(),Xe.unsubscribe(),Oe.unsubscribe(),rt.dispose(),At.unsubscribe(),_t.unsubscribe(),ct.unsubscribe(),tt.dispose()}}}},52098:(e,t,i)=>{i.d(t,{t:()=>v});var a=i(71249),s=i(57050),r=i(40327),n=i(45614),o=i(32426),l=i(80800),c=i(66896),d=i(49435),u=i(64992),p=i(8125),m=i(22232),h=i(5114),g=i(50147),f=i(38983);class v{constructor(e,t,i){this._lensesList=e,this._alertsFilterService=t,this._scoreStatus=i,this.getLens=(0,p.HP)((function(e){switch(e){case c.R.SpecialId.AllAlerts:return this._lensesList.view(b(c.R.Info.allAlerts,c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(c.R.SpecialId.AllAlerts)));case c.R.SpecialId.Priority:return this._lensesList.view(b(c.R.Info.priority,c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(c.R.SpecialId.Priority)));case c.R.SpecialId.PredictionTakeaways:return this._lensesList.view(b(c.R.Info.predictionTakeaways,c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(c.R.SpecialId.PredictionTakeaways)));case c.R.SpecialId.PredictionEmogenie:return this._lensesList.view(b(c.R.Info.predictionEmogenie,c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(c.R.SpecialId.PredictionEmogenie)));case c.R.SpecialId.RealTimeProofit:return this._lensesList.view(b(c.R.Info.realTimeProofit,c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(c.R.SpecialId.RealTimeProofit)));case c.R.SpecialId.Plagiarism:return this._lensesList.view(this._getPlagiarismLens);case c.R.SpecialId.Premium:return this._lensesList.view(b(c.R.Info.premium,c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(c.R.SpecialId.Premium)));case c.R.SpecialId.FreePremiumAlerts:return this._lensesList.view(b(c.R.Info.freePremium,c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(c.R.SpecialId.FreePremiumAlerts)));case c.R.SpecialId.Correctness:case c.R.SpecialId.Clarity:case c.R.SpecialId.Engagement:case c.R.SpecialId.Delivery:case c.R.SpecialId.Vox:case c.R.SpecialId.CorrectnessPriority:case c.R.SpecialId.ClarityPriority:case c.R.SpecialId.EngagementPriority:case c.R.SpecialId.DeliveryPriority:case c.R.SpecialId.VoxPriority:case c.R.SpecialId.KnowledgeHub:case c.R.SpecialId.KnowledgeHubPriority:return this._lensesList.view(b(c.R.Info.createOutcome(e),c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(e)));default:return(0,m.vE)(e)}})),this._outcomes=[c.R.SpecialId.Correctness,c.R.SpecialId.Clarity,c.R.SpecialId.Engagement,c.R.SpecialId.Delivery],this._previews=(0,p.HP)((()=>n.fromFoldableMap((0,o.getFirstSemigroup)(),a.IX)(this._outcomes,(e=>[e,this._getPreview(e)])))),this._isDocumentEmpty=f.h.create(!1),this._isFree=f.h.create(!1),this._outcomeStatusMask=f.h.combine(this._isDocumentEmpty,this._isFree,((e,t)=>{let i=0;return e&&(i|=u.x.IsDocumentEmpty),t&&(i|=u.x.IsFreeUser),i})),this._getPlagiarismLens=(0,s.ls)(b(c.R.Info.plagiarism,{...c.R.Meta.group.empty,percentile:d.T.MAX},this._alertsFilterService.getLensesFilter(c.R.SpecialId.Plagiarism)),c.R.WithAlerts.modifyMeta((e=>({...e,percentile:d.T.groupSum.concat(d.T.MAX,d.T.groupSum.inverse(e.percentile))}))))}findLens(e){return(0,r.pipe)(h.fromNullable([this.getLens(c.R.SpecialId.AllAlerts),this.getLens(c.R.SpecialId.Premium)].find((t=>e(t.get())))),h.map((e=>e.get().id)))}_getPreview(e){return{...c.R.Info.base,logo:h.none,...this._getOutcomeButtonData(e)}}get lensPreviews(){return this._previews()}_getOutcomeButtonData(e){const t=this.getLens(e),i=t.get().title,a=this._isFree.view((t=>t&&(e===c.R.SpecialId.Engagement||e===c.R.SpecialId.Delivery))),n=f.h.combine(t.view("count").view((e=>0===e)),a,((e,t)=>e&&!t)),{description:o,stateMessage:p}=(0,u.O)(e),m=f.h.combine(this._isDocumentEmpty,n,t.view("percentile"),((e,t,i)=>e?d.T.MIN:t?d.T.MAX:i)).view(d.g.fromRatio),g=f.h.create(!1),v=f.h.combine(this._scoreStatus.view((e=>(0,r.pipe)(e,h.map((e=>e===l.v0.ScoresStatus.SENSITIVE)),h.getOrElse(s.jv)))),t,m,this._outcomeStatusMask,g,p);return{id:e,title:i,description:o,status:v,progress:m,isUnavailable:a}}get nonEmptyLensId(){return(0,r.pipe)(h.fromNullable([this.getLens(c.R.SpecialId.AllAlerts),this.getLens(c.R.SpecialId.Premium)].find((e=>e.get().count>0))),h.map((e=>e.get().id)))}}function b(e,t,i){return a=>{return new c.R.LensImpl(e,(s=e.id,n=t,e=>(0,r.pipe)(g.P5(c.R.Id.ord)(s,e),h.getOrElse((()=>n))))(a),i);var s,n}}},14592:(e,t,i)=>{i.d(t,{gM:()=>K,o$:()=>Q,xl:()=>Z});var a,s=i(57050),r=i(40327),n=i(32409),o=i(4903),l=i(10389),c=i(33194),d=i(14315),u=i(98805),p=i(66896),m=i(74660),h=i(51374),g=i(4390),f=i(9922),v=i(98403),b=i(59368),w=i(16746),y=i(17594),S=i(35416),k=i(6100),E=i(66866),C=i(77176),A=i(67434),_=i(2844),I=i(24209),x=i(85985),T=i(28043),M=i(41398),R=i(76974),F=i(32952),L=i(16118),P=i(40151),N=i(60797),B=i(24713),V=i(92843),O=i(71249),U=i(8125),D=i(5114),H=i(95195),G=i(83078),j=i(55415),W=i(22232),z=i(38983),q=i(81531);!function(e){e.create=(e,t,i,a,s,r)=>(n,o)=>{const l=o.to.visualState===b.Bd.highlighted;return d.sO.Change.getCreateAction({range:n,capiAlertId:e,visualState:l?{type:d.sO.Change.VisualState.Type.highlighted,source:t()}:{type:d.sO.Change.VisualState.Type.visible},highlightColor:i,highlightDisplayFormat:a(n(),l),highlightDisappearOnHoverDelay:s,order:r})},e.update=(e,t,i,a,s,r)=>(n,o)=>{const l=o.to.visualState===b.Bd.highlighted;return d.sO.Change.getUpdateAction({range:n,capiAlertId:e,visualState:l?{type:d.sO.Change.VisualState.Type.highlighted,source:t()}:{type:d.sO.Change.VisualState.Type.visible},highlightColor:i,highlightDisplayFormat:a(n(),l),highlightDisappearOnHoverDelay:s,order:r})},e.remove=e=>t=>d.sO.Change.getRemoveAction({range:t,capiAlertId:e})}(a||(a={}));const K=(e,t)=>{const i=e.pipe(C.U(c.D1.StrongAlertRef.getStrongAlertRefBulkDismissAlertIds)),a=t.pipe(C.U((e=>e.cards)),A.R(((e,t)=>(0,r.pipe)(t,V.v.reduce(e,((e,t)=>(e.delete(t.id),e)),((e,t,i)=>e.set(i.id,i.alertIds.map((e=>e.toString())))),((e,t)=>e.set(t.id,t.alertIds.map((e=>e.toString()))))))),new Map),C.U((e=>(0,r.pipe)(Array.from(e.values()),O.xH))),C.U((e=>new Set(e)))),s=t.pipe(C.U((e=>e.feedId===c.D1.AssistantFeed.TONE_INSIGHTS_CARD_FEED_ID))),n=t.pipe(C.U((e=>e.feedId===c.D1.AssistantFeed.PERFORMANCE_SCORE_FEED))),o=t.pipe(C.U((e=>e.feedId===c.D1.AssistantFeed.BULK_DISMISS_CARD_FEED_ID))),l=t.pipe(C.U((e=>e.feedId===c.D1.AssistantFeed.BULK_DISMISS_REVIEW_FEED_ID)));return _.aj([i,a,s,n,o,l]).pipe(C.U((([e,t,i,a,s,r])=>i||a?t=>!e.has(t.id):s||r?e=>t.has(e.id):i=>t.has(i.id)&&!e.has(i.id))))},Z=(e,t,i,a=z.h.create(!1))=>I.T(e.pipe(x.h((e=>e.currentLens.id!==p.R.SpecialId.Premium)),T.x(((e,t)=>!(e.currentLens.id!==t.currentLens.id||S.nL.isWithPriorityList(e)&&S.nL.isWithPriorityList(t)&&k.v.WithPriority.isNonPriorityListOpened(e.currentLens)!==k.v.WithPriority.isNonPriorityListOpened(t.currentLens)))),T.x()),i.pipe(M.M(e),C.U((([e,t])=>t)))).pipe(M.M(a),C.U((([e,i])=>i?(0,U.W9)(m.bZ.isPremium,m.bZ.isHidden):t.alertVisibleInText(e.currentLens.id,k.v.WithPriority.nonPriorityAlertsVisible(e)))));class Q{constructor(e,t,i,c,u,v,k,A,_=R.of(void 0),I=!1,T=z.h.create(!1)){this._alertList=e,this._alertsReader=t,this._positionManager=i,this._alertsService=c,this._ded=u,this._lensState=v,this._filterChanges=k,this._getActiveItemWithAlert=A,this._readyObs=_,this._emulateAppliedAlertAnimation=I,this._showYellowUnderlines=T,this._highlightedAlert=D.none,this._focusedAlert=D.none,this._marksMap=new Map,this._subs=new f.w.Keeper,this.events=new F.xQ,this._alertStateDiff=this._alertList.state.pipe(L.G(),C.U((([e,t])=>g.p.diff(e,t))),x.h((0,U.ff)(V.v.isEmpty))),this._alertsFilter=z.h.create(s.jv),this._filteredAlerts=z.h.create(D.none),this._ready=!1,this._log=q.C8.Logging.getLogger("marks_view_model"),this.getMarkByAlert=e=>(0,r.pipe)(this._marksMap.get(e.alert.id),D.fromNullable,D.chain((t=>t.markByIndex(e.highlightIndex)))),this.getAlertByMark=e=>(0,r.pipe)(this._alertsReader.getRegistered(h.P.fromRangeIdToAlertId(e.id)),D.chain((t=>(0,r.pipe)(E.$A.getHighlightIndex(t,e.range()),H.map((e=>({alert:y.$.fromModel(t),highlightIndex:e}))),D.fromEither)))),this.ensureAlertHighlightInViewport=(e,t,i)=>(0,r.pipe)(this.getMarkByAlert(e),D.fold((()=>P.E),(e=>this._ded.scrollToMark(e.id,{animate:i,paddingTop:t})))),this._createMA=(e,t)=>{const i=t&&m.bZ.isPremium(e)&&m.bZ.isHidden(e),c=G.unsafeGet(e.rawId),{impact:u,cardLayout:{outcome:g},extra_properties:f}=e.toRawAlert(),v=n.M.getHighlightColor({outcome:l.DD.createOutcomeType(g),impact:u,extraProperties:f,patternName:e.patternName},i),k=this._lensState.view(S.nL.getActiveItem(o.O.getActiveItemWithAlert)).view((0,s.ls)(D.filter((t=>t.activeAlert.id===e.id)),D.map((e=>e.activeHighlightIndex)),D.getOrElse((()=>0)))),C=e=>(t,i)=>{const a=h.x.isEnclosingView(t),s=e.getHighlightRanges().some(h.x.isEnclosingView),o=h.x.isMainView(t),l=h.x.isMainStartView(t),c=e.getHighlightRanges(),d=(0,r.pipe)(c,O.cx((e=>e.start===t.start&&e.end===t.end)),D.getOrElse((()=>0)))===k.get(),u=m.bZ.isSuperAlert(e);return n.M.getHighlightDisplayFormat({isEnclosing:a,isEnclosed:s,isMain:o,isMainStart:l,isActive:d,belongsToActiveAlert:i,belongsToSuperAlert:u})},A=p.R.getSortOrder(e.lensType),_=new w.v((t=>(0,r.pipe)(this._alertsReader.getById(e.id),D.alt((()=>(t&&this._log.warn("Could not find alert for provided MarkAlert",{alert:e,source:t}),D.some(e)))),D.map(y.$.fromModel),G.unsafeGet)),this._alertsService,this._alertsService,(e=>this._ded.changeMarks(e)),a.create(c,(()=>d.sO.Change.VisualState.Source.api),v,C(e),null,A),a.update(c,(()=>Y.getAlertSource(e,this._lensState.get(),this._getActiveItemWithAlert)),v,C(e),null,A),a.remove(c),(t=>{t.to.visualState===b.Bd.applied&&(this.events.next({type:E.ay.Type.AppliedAlertAnimationFinished,alert:e}),this._handleRemovedAlerts([e]).forEach((e=>e.apply())))}));return this._marksMap.set(e.id,_),_},this._handleRemovedAlerts=e=>e.map((({id:e})=>{const t=this._marksMap.get(e);return this._marksMap.delete(e),t.scheduleApply(b.Bd.disposed),t})),this._handleAlertUpdate=(e,t)=>e.map((e=>m.bZ.isRegistered(e)&&!m.bZ.isMuted(e)?(0,r.pipe)(D.fromNullable(this._marksMap.get(e.id)),D.fold((()=>this._alertsFilter.get()(e)?this._createMA(e,t):null),(e=>(e.scheduleUpdate(),b.Oe.isOrWillBe(b.Bd.success)(e)&&e.scheduleApply(b.Bd.highlighted),e)))):(0,r.pipe)(D.fromNullable(this._marksMap.get(e.id)),D.fold((()=>{}),(t=>(e.allowUpdate&&m.bZ.isCapiDone(e)&&m.bZ.isRated(e)&&b.Oe.isOrWillBe(b.Bd.highlighted)(t)?(t.scheduleUpdate(),t.scheduleApply(b.Bd.success)):(t.scheduleApply(b.Bd.disposed),this._marksMap.delete(t.alert.id)),t)))))).filter((e=>Boolean(e))),this._subs.push(this._readyObs.subscribe((()=>{this._subs.push(this._listenAlertsUpdates(),this._listenRangesUpdates(),this._listenFilterChange(),this._listenFilteredAlerts()),this._ready=!0})))}focusAlertHighlight(e){return this._ready?(0,r.pipe)(this._marksMap.get(e.alert.id),D.fromNullable,D.map((t=>{this._focusedAlert=D.some(e.alert.id),t.scheduleApply(b.Bd.highlighted),t.scheduleForceUpdate(),t.apply()})),H.fromOption((()=>new Error("Unknown alert"))),H.map((()=>({dispose:()=>{D.exists((t=>t===e.alert.id))(this._focusedAlert)&&(this._highlightedAlert=D.none),(0,r.pipe)(this._marksMap.get(e.alert.id),D.fromNullable,D.filter((()=>!(0,r.pipe)(this._highlightedAlert,D.exists((t=>t===e.alert.id))))),D.map((e=>{e.scheduleApply(b.Bd.visible),e.apply()})))}})))):H.left(new Error("marks view model is not ready yet"))}highlightAlertHighlight(e){return this._ready?(0,r.pipe)(this._marksMap.get(e.id),D.fromNullable,D.map((t=>{this._highlightedAlert=D.some(e.id),t.scheduleApply(b.Bd.highlighted),t.apply()})),H.fromOption((()=>new Error("Unknown alert"))),H.map((()=>({dispose:()=>{D.exists((t=>t===e.id))(this._highlightedAlert)&&(this._highlightedAlert=D.none),(0,r.pipe)(this._marksMap.get(e.id),D.fromNullable,D.filter((()=>!(0,r.pipe)(this._focusedAlert,D.exists((t=>t===e.id))))),D.map((e=>{e.scheduleApply(b.Bd.visible),e.apply()})))}})))):H.left(new Error("marks view model is not ready yet"))}moveCursorToHighlight(e,t){return this._ready?(0,r.pipe)(this._marksMap.get(e.alert.id),D.fromNullable,D.chain((t=>t.markByIndex(e.highlightIndex))),D.chain((e=>D.fromEither(e.range()))),D.fold((()=>H.left(new Error("Cannot find mark for given range"))),(e=>{const{index:i,length:a}=this._ded.getCursor();if(0===a&&(i<e.start||i>e.end)){const i=Math.min(e[t],this._ded.getLastPossibleCursorPosition());return(0,r.pipe)(this._ded.setCursor(i,0),H.orElse(H.left))}return H.right(void 0)}))):H.left(new Error("marks view model is not ready yet"))}dispose(){this._subs.dispose()}_listenAlertsUpdates(){const e=e=>({activeAlerts:[],updatedAlerts:[],removedAlerts:[],acceptedAlerts:[],hiddenMarkAlerts:[],...e});return I.T(this._filteredAlerts.pipe(N.cp((({visible:t,hidden:i})=>R.of(e({activeAlerts:j.toArray(t),removedAlerts:j.toArray(i)}))))),this._alertStateDiff.pipe(M.M(this._alertsFilter),C.U((([t,i])=>(0,r.pipe)(t,V.v.reduce(e({}),((e,t)=>(this._marksMap.has(t.alert.id)&&e.removedAlerts.push(t.alert),e)),((e,t,i)=>(m.bZ.isAccepted(i.alert)?e.acceptedAlerts.push(i.alert):e.updatedAlerts.push(i.alert),e)),((e,t)=>(i(t.alert)&&e.activeAlerts.push(t.alert),e)))))))).pipe(M.M(this._showYellowUnderlines),C.U((([{activeAlerts:e,removedAlerts:t,updatedAlerts:i,acceptedAlerts:a},s])=>{let r=[];return r=r.concat(e.filter((0,U.W9)((0,U.Kg)((e=>s&&m.bZ.isPremium(e)&&m.bZ.isHidden(e)),(0,U.ff)(m.bZ.isPremium)),(e=>D.isSome(e.rawId)))).map((e=>{const t=this._marksMap.get(e.id);return void 0!==t?(t.scheduleForceUpdate(),t):this._createMA(e,s)}))),this._emulateAppliedAlertAnimation&&setTimeout((()=>{a.forEach((e=>{this.events.next({type:E.ay.Type.AppliedAlertAnimationFinished,alert:e})}))}),3*(0,u.Xd)(20)),r=r.concat(this._handleRemovedAlerts(t.concat(a).filter((e=>this._marksMap.has(e.id))))),r=r.concat(this._handleAlertUpdate(i,s)),r}))).subscribe((e=>{if(e.length>0){const[t,...i]=e;t.applyWith(i)}}))}_listenRangesUpdates(){return this._positionManager.rangeChanged.pipe(B.j("changed"),C.U((e=>e.filter((e=>h.P.is(e)&&h.x.isVisible(e)&&this._marksMap.has(e.meta.alertId))))),x.h((e=>e.length>0))).subscribe((e=>{const t=Array.from(e.values()).reduce(((e,t)=>(0,r.pipe)(this._alertsReader.getById(t.meta.alertId),D.chain((e=>this._alertsReader.getRegistered(e.id))),D.chain((e=>D.fromNullable(this._marksMap.get(e.id)))),G.tap((t=>e.set(t.alert.id,t))),(0,s.a9)(e))),new Map),i=Array.from(t.values());if(i.forEach((e=>{e.scheduleForceUpdate()})),i.length>0){const[e,...t]=i;e.applyWith(t)}}))}_listenFilterChange(){return this._filterChanges.subscribe((e=>{v.wW(this._alertsFilter)(e)}))}_listenFilteredAlerts(){return this._alertsFilter.pipe(M.M(this._alertList.state),C.U((([e,t])=>(0,r.pipe)(t,g.p.reduce({visible:{},hidden:{}},((t,i)=>(e(i.alert)&&m.bZ.isRegistered(i.alert)?t.visible[i.alert.id]=i.alert:t.hidden[i.alert.id]=i.alert,t))),(e=>D.some(e)))))).subscribe(v.wW(this._filteredAlerts))}}var Y;!function(e){e.toSidebarFluidMarkSource=e=>{switch(e){case m.l$.text:case S.h8.forceText:return d.sO.Change.VisualState.Source.text;case m.l$.sidebar:case S.h8.forceSidebar:return d.sO.Change.VisualState.Source.sidebar;case m.l$.api:return d.sO.Change.VisualState.Source.api;default:return(0,W.vE)(e)}},e.getAlertSource=(t,i,a)=>S.nL.hasCards(i)?(0,r.pipe)(a(i.currentLens),D.fold((()=>d.sO.Change.VisualState.Source.api),(a=>a.activeAlert.id===t.id?e.toSidebarFluidMarkSource(i.alertSource):d.sO.Change.VisualState.Source.api))):d.sO.Change.VisualState.Source.api}(Y||(Y={}))},1050:(e,t,i)=>{i.d(t,{o:()=>P});var a=i(40327),s=i(8901),r=i(20641),n=i(73353),o=i(56305),l=i(83078),c=i(5114),d=i(55415),u=i(8125),p=i(44358);function m({documentModel:e,features:t,gnar:i,modalOperations:m,upgradeVM:h,source:g}){return(0,o.k)(e,function(e,t,i){return{goalsPopupShow:t=>{e.goalsPopupShow(t),(0,p.n)(e,{placement:"goPremium",bannerType:"setGoalsPopup",upgradeHookName:"assistantGoals",upgradeHookSlot:"gDocsSetGoalsPopup"}),(0,r.Tb)().upgradeHooks.showUpgradeHook("assistantGoals","gDocsSetGoalsPopup")},getPremiumButtonClick:()=>{(0,p.Q)(e,{placement:"goPremium",bannerType:"setGoalsPopup",upgradeHookName:"assistantGoals",upgradeHookSlot:"gDocsSetGoalsPopup"}),(0,r.Tb)().upgradeHooks.clickUpgradeHook("assistantGoals","gDocsSetGoalsPopup")},goalsFormSuccess:(s,r)=>{const n=()=>l.contains("academic")(s.domain)&&t;return e.goalsFormSuccess((0,a.pipe)(s.domain,c.getOrElse((()=>r.domain))),(0,a.pipe)(s.goals,c.map((e=>n()?[]:e)),c.getOrElse((()=>r.goals)),(e=>Array.from(e))),i,(0,a.pipe)(s.outcomeContext,c.filter(n),c.map(d.pick("type")),c.toUndefined),(0,a.pipe)(s.audience,c.filter((0,u.ff)(n)),c.toUndefined),(0,a.pipe)(s.outcomeContext,c.filter(n),c.map(d.pick("citation")),c.toUndefined),(0,a.pipe)(s.style,c.filter((0,u.ff)(n)),c.toUndefined))}}}(i,t.isStudentsOFE,g),m,g,n.R$.defaultContextFallback,t,(()=>h.openUpgradeUrl(s.L.Place.gdocsGoals)),!1)}var h=i(18625),g=i(98403),f=i(57091),v=i(66310),b=i(76974),w=i(13444),y=i(93508),S=i(48403),k=i(95343),E=i(12768),C=i(95195),A=i(38983),_=i(81531);class I{constructor(e,t){this._documentModel=e,this._modalOperations=t,this.reportViewModel=c.none,this.state=h.P((()=>g.GQ((()=>this._documentModel.calculateStats())))).pipe(f.a(this._documentModel.checkingState,((e,t)=>(0,a.pipe)(e,c.filter((()=>"idle"===t))))),v.w(c.fold((()=>b.of({type:E.g.State.Type.LOADING}).pipe(w.g(150))),C.fold((e=>(_.C8.Logging.getLogger("editor.toolbar").error("Error on requesting document stats",e),this.onModalClose(),b.of({type:E.g.State.Type.ERROR}))),(e=>A.h.combine(this._documentModel.score,this._documentModel.counters,this._documentModel.documentLength.view("trimmed"),((t,i,s)=>(0,a.pipe)(t,c.fold((()=>({type:E.g.State.Type.SHORT_CONTENT})),(t=>({type:E.g.State.Type.READY,documentIsEmpty:0===s,score:t,counters:i,stats:e})))))))))),y.O({type:E.g.State.Type.EMPTY}),S._(1),k.x()),this.onModalClose=()=>{this._modalOperations.onClose()}}}var x=i(81301),T=i(13863),M=i(87195),R=i(77176),F=i(22232),L=i(94895);class P{constructor(e,t,i,a,s=!1){this._documentModel=e,this._upgradeViewModel=t,this._isPremiumUser=i,this._gnar=a,this._isStudentsOFE=s}load(e){switch(e.type){case x.dC.SetGoals:return this._loadSetGoals(e.source);case x.dC.Performance:return this._loadPerformance();default:return(0,F.vE)(e)}}_loadSetGoals(e){return Promise.resolve((t=>{const i=m({features:{demoMode:!1,isRedesign:!1,isFree:!this._isPremiumUser,isStudentsOFE:this._isStudentsOFE},documentModel:this._documentModel,upgradeVM:this._upgradeViewModel,source:e,modalOperations:t,gnar:this._gnar});return{instance:{type:x.dC.SetGoals,source:e},component:L.UI.mount(T.R.Modal,i)}}))}_loadPerformance(){return Promise.resolve((e=>{const t=new I(this._documentModel,e),i=L.UI.Knot.make(M.q.ModalView,{downloadButton:L.UI.Node.empty}),a=L.Z.fromSideEffect((t=>{if(t.action.kind===M.q.ActionsKind.close)e.onClose();else(0,F.vE)(t.action.kind)}),t.state.pipe(R.U((e=>({root:e})))));return{instance:{type:x.dC.Performance},component:L.UI.mount(i,a)}}))}}},57882:(e,t,i)=>{if(i.d(t,{$:()=>S}),3075==i.j)var a=i(57050);if(3075==i.j)var s=i(55563);if(3075==i.j)var r=i(81301);if(3075==i.j)var n=i(74660);if(3075==i.j)var o=i(66896);if(3075==i.j)var l=i(32952);if(3075==i.j)var c=i(9922);if(3075==i.j)var d=i(41398);if(3075==i.j)var u=i(77176);if(3075==i.j)var p=i(85985);if(3075==i.j)var m=i(66310);if(3075==i.j)var h=i(40151);if(3075==i.j)var g=i(4890);if(3075==i.j)var f=i(35416);if(3075==i.j)var v=i(91605);if(3075==i.j)var b=i(5114);if(3075==i.j)var w=i(22232);if(3075==i.j)var y=i(38983);class S{constructor(e,t,i,s,r,m,h,w){this._state=e,this._lensPreviewVM=t,this._sidebarEvents=i,this._modalManager=s,this._ded=r,this._features=m,this._gnar=h,this._defaultLensMode=w,this.isUphooksRedesign=!1,this.popover=y.h.create(b.none),this.events=new l.xQ,this.activeLensId=this._state.view("currentLens","id"),this.documentActions=y.h.create({proofit:v.Bo.proofitDisabled(v.TV.NotAvailable),plagiarism:v.Bo.plagiarismDisabled(v.eh.NotAvailable),cheetah:v.Bo.cheetahDisabled(v.Sh.NotAvailable)}),this.showMuteControl=y.h.create(!1),this._subs=new c.w.Keeper,this._lensSwitch=new l.xQ,this.lensMode=y.h.create(this._defaultLensMode),this.lensTitleType="none"!==this._features.priorityLens.kind?v.Bo.LensTitleType.priority:v.Bo.LensTitleType.default,this.lensChangeEffect={id:"lensChangeEffect",when:a.W8,what:f.nL.Effect.SwitchLens.create(this._lensSwitch.pipe(d.M(this._state.pipe(u.U((e=>e.currentLens.id)))),p.h((([{lensId:e},t])=>e!==t)),u.U((([{lensId:e,focusFirst:t}])=>({lensId:e,alertSource:n.l$.sidebar,options:{order:"lensOrder",toFocus:t?f.nL.Effect.FocusBehavior.focusFirst:f.nL.Effect.FocusBehavior.noFocus}})))))},this.cardVisualMode=y.h.create(g.j.CardVisualMode.RegularLightMode),this._listenNavigationEvent();const S=[o.R.SpecialId.Correctness,o.R.SpecialId.Clarity,o.R.SpecialId.Engagement,o.R.SpecialId.Delivery].reduce(((e,t)=>(e[t]=this._lensPreviewVM.lensPreviews[t],e)),{});this.lensPreviews=y.h.create(S),this.a11yContrast=!1}dispose(){this._subs.dispose()}_listenNavigationEvent(){this._subs.push(this.events.pipe(m.w((e=>{switch(e.type){case"toggleSidebar":return this._sidebarEvents.next({kind:s.R.Close}),h.E;case"switchToLens":if("none"!==this._features.priorityLens.kind){const t=e.id===o.R.SpecialId.Priority?"priority":"all";this._sidebarEvents.next({kind:s.R.ChangeLens,selectedLens:t}),this._lensSwitch.next({lensId:e.id,focusFirst:e.focusFirst}),this._gnar.gdocsSidebarChangeLensButtonClick(t,this._lensPreviewVM.getLens(o.R.SpecialId.AllAlerts).get().count,this._ded.getTextLength(),this._lensPreviewVM.getLens(o.R.SpecialId.Priority).get().count,"dropdown"===this._features.priorityLens.kind?"dropdown":"priorityToggle")}else this._gnar.gdocsSidebarOpenLensButtonClick(e.id);return h.E;case"setGoals":return this._modalManager.show(r.Iy.setGoals("user"));case"performance":return this._modalManager.show(r.Iy.performance);case"switchToCritical":case"switchToAdvanced":case"preferences":case"switchToAll":return h.E;default:return(0,w.vE)(e)}}))).subscribe())}}},8901:(e,t,i)=>{i.d(t,{L:()=>a,x:()=>E});var a,s=i(40327),r=i(75099),n=i(47612),o=i(75982),l=i(66896),c=i(74660),d=i(6782),u=i(4390),p=i(2844),m=i(77176),h=i(98403),g=i(5114),f=i(8125),v=i(95574),b=i(95195),w=i(38983),y=i(81531),S=i(20641),k=i(44358);!function(e){let t;!function(e){e.gdocsSidebarCardList="gdocsSidebarCardList",e.gdocsGoals="gdocsGoals",e.assistantCardList="assistantCardList",e.extensionSettingsAssistant="extensionSettingsAssistant",e.toneSuggestion="toneSuggestion"}(t=e.Place||(e.Place={}))}(a||(a={}));class E{constructor(e,t,i,a){this._alertsList=e,this._lensState=t,this._maxAlertCategories=i,this.gnar=a,this._log=y.C8.Logging.getLogger("UpgradeViewModel"),this._advancedAlerts=w.h.create([]),this.advancedAlerts=this._advancedAlerts.view((e=>e.length>0?g.some({count:e.length,alerts:()=>this._formatLiteAlerts(E._getGroupedLiteAlerts(e))}):g.none)),this._formatLiteAlerts=e=>{const t=e.slice(0,this._maxAlertCategories),i=e.slice(this._maxAlertCategories).map((e=>e.count)).reduce(f.Sm,0);return i>0?[...t,{group:"",category:"",categoryHuman:"more...",count:i,lensName:"",bundleInfo:g.none}]:t},this._connectionId=o._.createWithRandomId("sidebar"),p.aj([this._lensState.view("currentLens").view("id").view(l.R.isPriority).view((e=>e?e=>c.bZ.isRegistered(e)&&c.bZ.isPremium(e)&&c.bZ.isPriority(e):e=>c.bZ.isRegistered(e)&&c.bZ.isPremium(e))),this._alertsList.state]).pipe(m.U((([e,t])=>u.p.reduce([],((t,{alert:i})=>(e(i)&&t.push(i),t)))(t)))).subscribe(h.wW(this._advancedAlerts))}trackUpgradeButtonShow(e){const t=this._advancedAlerts.get();(0,k.n)(this.gnar,{placement:e.placement,bannerType:e.bannerType,advancedAlerts:t,upgradeHookName:e.upgradeHookName,upgradeHookSlot:e.upgradeHookSlot}),this.gnar.assistantExpandedUpgradeHookShow(t.length,100),(0,S.Tb)().upgradeHooks.showUpgradeHook(e.upgradeHookName,e.upgradeHookSlot)}trackUpgradeButtonClick(e){const t=this._advancedAlerts.get();(0,k.Q)(this.gnar,{placement:e.placement,bannerType:e.bannerType,advancedAlerts:t,upgradeHookName:e.upgradeHookName,upgradeHookSlot:e.upgradeHookSlot}),(0,S.Tb)().upgradeHooks.clickUpgradeHook(e.upgradeHookName,e.upgradeHookSlot)}openUpgradeUrl(e){(0,s.pipe)(v.tryCatchError((()=>{(0,n.P4)().openSubscriptionDialog({currentAlerts:this._getCapiAlerts(),isAnonymousUser:!1,isFromEmail:!1,forceUtmCampaign:e})})),b.getOrElse((e=>this._log.fatal("unexpected error on open upgrade page",e))))}_getCapiAlerts(){return this._advancedAlerts.get().map((e=>(0,r.IM)(E._toRawAlertWithPossibleWrongId(e),o.Q.create(this._connectionId,0))))}static _getGroupedLiteAlerts(e){return d.Q.group(e.map((e=>e.toLiteAlert())))}static _toRawAlertWithPossibleWrongId(e){return{...e.toRawAlert(),id:(0,s.pipe)(e.rawId,g.getOrElse((()=>e.id)))}}}},53945:(e,t,i)=>{if(i.d(t,{r:()=>p}),3075==i.j)var a=i(6782);if(3075==i.j)var s=i(74660);if(3075==i.j)var r=i(4390);if(3075==i.j)var n=i(14601);if(3075==i.j)var o=i(2844);if(3075==i.j)var l=i(77176);if(3075==i.j)var c=i(28043);if(3075==i.j)var d=i(5114);if(3075==i.j)var u=i(38983);class p{constructor(e,t){this._alertsList=e,this._lensState=t,this._sub=new n.w,this._freeAlerts=u.h.create([]),this.freeAlerts=this._freeAlerts.view((e=>e.length>0?d.some({count:e.length,alerts:()=>function(e){return a.Q.group(e.map((e=>e.toLiteAlert())))}(e)}):d.none)),this._sub.add(o.aj([this._lensState.view("currentLens").view("id").view((()=>e=>s.bZ.isRegistered(e)&&!s.bZ.isHidden(e)&&!s.bZ.isPremium(e))),this._alertsList.state]).pipe(l.U((([e,t])=>r.p.reduce([],((t,{alert:i})=>(e(i)&&t.push(i),t)))(t))),c.x()).subscribe((e=>{this._freeAlerts.set(e)})))}dispose(){this._sub.unsubscribe()}}},73385:(e,t,i)=>{i.d(t,{v:()=>n});var a=i(57050),s=i(27378),r=i(89872);const n=({browser:e,className:t,title:i="BETA",color:n="blue"})=>"safari"!==e?s.createElement(r.C,{title:i,className:t,kind:"blue"===n?"primary":"green"===n?"success":(0,a.Rz)(n)}):null},20330:(e,t,i)=>{i.d(t,{l:()=>d});var a=i(27378),s=i(5397),r=i(37522),n=i(6726),o=i(12187),l=i(71212),c=i.n(l);const d=({enableTooltip:e=!1,size:t="medium",...i})=>a.createElement(n.u,{message:"Settings",showDelay:s.gk,disabled:!e},a.createElement(r.h,{...i},a.createElement("div",{...(0,o.Sh)("small"===t?c().settingsButtonSmallIcon:null,"medium"===t?c().settingsButtonMediumIcon:null)})))},68610:(e,t,i)=>{i.d(t,{J:()=>d});var a=i(57050),s=i(27378),r=i(90845),n=i(60797),o=i(2834),l=i(12187),c=i(66206);const d=({onChange:e,labelId:t,className:i,checkboxClassName:d,labelClassName:u,checked:p,children:m,disabled:h,useDS:g,dataGrammarlyPart:f="ui-kit-checkbox",tabIndex:v=0,onMount:b=a.Q1})=>{const[w,y]=s.useState(null!=p&&p);s.useEffect((()=>{y(Boolean(p))}),[p]);const S=t=>{t.preventDefault(),t.stopPropagation(),y(!w),null==e||e(!w)},{ref:k,onMount:E}=r.P.useElWatcher();return s.useEffect((()=>{const e=k.pipe(n.oA,o.b(b)).subscribe();return()=>e.unsubscribe()}),[]),s.createElement("div",{"data-grammarly-part":f,...(0,l.Sh)(c.checkboxContainer,i)},s.createElement("div",{...(0,l.Sh)(c.checkbox,d,w?c.checkboxChecked:null,g?c.checkboxDS:null),role:"checkbox","aria-checked":w,tabIndex:v,"aria-labelledby":t,onKeyDown:e=>{" "===e.key&&S(e)},onClick:h?a.Q1:S,ref:E},w?s.createElement("div",{className:c.checkboxCheckmark}):null),s.createElement("label",{id:t,onClick:S,className:u},m))}},8096:(e,t,i)=>{i.d(t,{z:()=>c});var a=i(27378),s=i(31542);const r=({children:e,style:t,dataGrammarlyPart:i="ui-kit-iframe",...r})=>{const[n,o]=a.useState(null),l=a.useCallback((e=>{var t,i;let a=null;"contentDocument"in e.target&&(a=null!==(i=null===(t=e.target.contentDocument)||void 0===t?void 0:t.body)&&void 0!==i?i:null),o(a),a&&(a.style.margin="0",a.style.height="100vh",a.style.overflowY="hidden")}),[]);return a.createElement("iframe",{...r,style:{border:"none",...t},onLoad:l,srcDoc:"<html><body></body></html>","data-grammarly-part":i},n&&(0,s.createPortal)(e,n))};var n=i(29927),o=i(35111),l=i.n(o);const c=({placeholder:e,onChange:t,ariaLabel:i,iframeTitle:s,className:o})=>{const[c,d]=a.useState("");return a.useEffect((()=>{t(c)}),[c]),a.createElement(r,{dataGrammarlyPart:"ui-kit-textbox",className:o,style:{width:"100%",height:"100%"},title:s},a.createElement(n.b,null,l().__css),a.createElement("div",{role:"textbox",className:l().textBox,contentEditable:!0,onInput:e=>d(e.target.innerText),"data-placeholder":e,"aria-placeholder":e,"aria-label":i}))}},49898:(e,t,i)=>{i.d(t,{a:()=>r});var a=i(27378),s=i(70836);const r=({color:e})=>a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z",fill:null!=e?e:s.Z.red50}),a.createElement("path",{d:"M8.94827 4H7.05196L7.22242 10.1108H8.78208L8.94827 4ZM8.00225 12.8381C8.5477 12.8381 9.02071 12.3821 9.02498 11.8153C9.02071 11.2571 8.5477 10.8011 8.00225 10.8011C7.43975 10.8011 6.97526 11.2571 6.97952 11.8153C6.97526 12.3821 7.43975 12.8381 8.00225 12.8381Z",fill:s.Z.neutral0}))},80860:(e,t,i)=>{i.d(t,{Q:()=>o});var a=i(27378),s=i(48015),r=i(78002);const n=e=>{if(e.reason===r.rS.NO_FREE_TRIALS_LEFT){const t="No email reviews left this month";let i;if(e.meta.quotaResetDate){const t=Intl.DateTimeFormat([],{month:"short",day:"numeric"}).format(new Date(Date.parse(e.meta.quotaResetDate)));i=`You will get ${r.SR} free reviews again next month (${t}). You can also use paid expert writing help in Grammarly's web editor anytime.`}else i=`You will get ${r.SR} free reviews again next month. You can also use paid expert writing help in Grammarly's web editor anytime.`;return{title:t,message:i}}return e.reason===r.rS.NOT_ENOUGH_WORDS?{message:`Your email must be at least ${r.fy} words (currently ${e.meta.wordsCount}).`}:e.reason===r.rS.TOO_MANY_WORDS?{message:`Your email must be under ${r.Vw} words (currently ${e.meta.wordsCount}).`}:(e=>{switch(e){case r.rS.NOT_AVAILABLE:return{message:"Our experts are currently working on other text. Please try again later."};case r.rS.NOT_AVAILABLE_QUOTA_ERROR:return{title:"Something went wrong",message:"We couldn't determine how many requests you have left. Please try again later."};case r.rS.CONFLICTING_REQUEST:return{title:"Separate request in progress",message:"You can submit this request once the experts are finished with the one you already submitted."};case r.rS.CHECKING_INITIAL_AVAILABILITY:return{message:"Checking for available experts..."};case r.rS.UNSUPPORTED_LANGUAGE:return{message:"Our writing experts can only help with emails written in English."};default:(0,s.vE)(e)}})(e.reason)},o=({info:e,includeTitle:t})=>{const i=n(e);return a.createElement(a.Fragment,null,t?a.createElement(a.Fragment,null,i.title?a.createElement("b",null,i.title):a.createElement("b",null,"Get expert writing help"),a.createElement("br",null)):null,i.message)};o.defaultProps={includeTitle:!1}},60561:(e,t,i)=>{i.d(t,{q:()=>I});var a=i(27378),s=i(9205),r=i(12187),n=i(62369),o=i(13311);const l=({fixSubmitButtonOverflowBottomPadding:e,className:t,...i})=>a.createElement(a.Fragment,null,a.createElement(n.z,{...i,className:null!=t?t:o.feedbackFormSubmitButton},i.children),a.createElement(c,{isEnabled:e})),c=e=>e.isEnabled?a.createElement("div",{className:o.feedbackFormSubmitButtonFixOverflowBottomPadding},a.createElement("div",{className:o.feedbackFormSubmitButtonFixOverflowBottomPaddingChild})):null,d=e=>a.createElement("div",{"data-grammarly-part":"surveys-feedback-form-thank-you",...(0,r.Sh)(o.feedbackFormContainer,o.feedbackFormContainerAlignCenter)},a.createElement("div",{className:o.feedbackFormSuccessMessageTextContainer},a.createElement("div",{className:o.feedbackFormSuccessMessageIcon}),a.createElement("div",{className:o.feedbackFormSuccessMessageTitle},"Thank you!"),a.createElement("div",{className:o.feedbackFormSuccessMessageSubtitle},"Your feedback helps us improve.")),a.createElement(l,{type:"button",kind:"success",onClick:e.onClose},"Done"));var u=i(8096),p=i(48015),m=i(25985);const h=({options:e,onChange:t=(()=>null),ariaLabel:i,className:s})=>{const n=[],[o,l]=a.useState(null);a.useEffect((()=>{var i;null!==o&&(null===(i=n[o])||void 0===i||i.focus()),t(null!==o?e[o].value:null)}),[o]);const c=null!==o?e[o]:null;return a.createElement("div",{"data-grammarly-part":"ui-kit-radio-group",className:s},a.createElement("div",{className:m.radioGroup,role:"radiogroup","aria-label":i,onKeyDown:t=>{if(" "!==t.key||c){if("ArrowRight"===t.key||"ArrowDown"===t.key){t.preventDefault(),t.stopPropagation();l(((o||0)+1)%e.length)}else if("ArrowLeft"===t.key||"ArrowUp"===t.key){t.preventDefault(),t.stopPropagation();const i=(o||0)-1;l(i<0?e.length-1:i)}}else t.preventDefault(),t.stopPropagation(),l(0)}},e.map(((e,t)=>{const i=(null==c?void 0:c.value)===e.value,s=0===t;return a.createElement("div",{key:e.value,...(0,r.Sh)(m.radioGroupOption,i?m.radioGroupOptionSelected:null),role:"radio",tabIndex:i||s&&!c?0:-1,"aria-checked":i,onClick:e=>{e.preventDefault(),e.stopPropagation(),l(t)},ref:e=>n.push(e)},e.render())}))))};var g;!function(e){e.bad="bad",e.ok="ok",e.good="good"}(g||(g={}));var f=i(73610);const v=e=>{const t=[g.bad,g.ok,g.good];return e.isEnabled?a.createElement(a.Fragment,null,a.createElement(h,{ariaLabel:"Feedback Score",options:t.map((e=>({value:e,render:()=>a.createElement("div",{className:f.feedbackFormOption},a.createElement("div",{...(0,r.Sh)(f.feedbackFormOptionIcon,b(e))}),a.createElement("div",null,function(e){switch(e){case g.bad:return"I dislike it";case g.ok:return"It’s OK";case g.good:return"I like it";default:(0,p.vE)(e)}}(e)))}))),onChange:e.onChange,...(0,r.Sh)(o.feedbackFormScore,e.compactDisplay&&o.compact)}),!e.hideTextBoxTitle&&a.createElement("div",{className:o.feedbackFormTextBoxTitle},"Anything we can improve?")):null};function b(e){switch(e){case g.bad:return f.feedbackFormOptionIconDisheartening;case g.ok:return f.feedbackFormOptionIconNeutral;case g.good:return f.feedbackFormOptionIconSmiling;default:(0,p.vE)(e)}}const w=e=>e.isEnabled?a.createElement("div",{className:o.feedbackFormLogo}):null,y=e=>{var t;if(!e.isEnabled)return null;const i=null!==(t=e.title)&&void 0!==t?t:a.createElement("span",null,"How do you like ",a.createElement("br",null)," Grammarly?");return a.createElement("h3",{...(0,r.Sh)(o.feedbackFormTitle,e.isCompact&&o.compact)},i)};var S=i(68610);const k=e=>e.domain?a.createElement(a.Fragment,null,e.withHelpText&&a.createElement("div",{className:o.feedbackFormShareDomainTitle},"Help improve Grammarly by sharing the domain you’re on:"),a.createElement(S.J,{labelId:"feedback-form-share-domain-checkbox",onChange:e.onChange,className:o.feedbackFormShareDomainCheckbox},"Include the domain ",a.createElement("b",null,e.domain)," with my feedback")):null,E=e=>{var t,i,s;const[n,c]=a.useState(null),[d,p]=a.useState(""),[m,h]=a.useState(!1);return a.createElement("form",{"data-grammarly-part":"surveys-feedback-form-fields",...(0,r.Sh)(o.feedbackFormContainer,"center"===e.align&&o.feedbackFormContainerAlignCenter)},a.createElement("div",{className:o.feedbackFormFields},a.createElement(w,{isEnabled:!e.hideLogo}),a.createElement(y,{isEnabled:!e.hideTitle,title:e.title,isCompact:null!==(t=e.compactDisplay)&&void 0!==t&&t}),a.createElement(v,{isEnabled:e.withScore,compactDisplay:e.compactDisplay,hideTextBoxTitle:e.hideTextBoxTitle,onChange:c}),a.createElement(u.z,{onChange:p,placeholder:null!==(i=e.placeholderText)&&void 0!==i?i:"Your thoughts here",ariaLabel:"Feedback Text",iframeTitle:"Feedback text field",...(0,r.Sh)(o.feedbackFormTextBox,e.compactDisplay&&o.compact)}),a.createElement(k,{domain:e.domain,withHelpText:!e.hideDomainHelpText,onChange:h})),a.createElement(l,{type:"submit",kind:null!==(s=e.submitButtonKind)&&void 0!==s?s:"success",disabled:e.withScore?!n:!d,fixSubmitButtonOverflowBottomPadding:e.fixSubmitButtonOverflowBottomPadding,onClick:t=>{t.preventDefault();const i=m?e.domain:void 0;e.withScore&&n?e.onSubmit({score:n,text:d,domain:i}):!e.withScore&&d&&e.onSubmit({text:d,domain:i})}},"Submit"))};var C=i(86061);const A=({hideLogo:e=!1,align:t="center",fixSubmitButtonOverflowBottomPadding:i=!1,showPostSubmitScreen:s=!0,...r})=>{const[n,o]=a.useState(!1),l=n&&s;return a.createElement("div",{style:r.style,"data-grammarly-part":"surveys-feedback-form",role:"region","aria-label":"Provide feedback","aria-live":"polite"},l?a.createElement(d,{fixSubmitButtonOverflowBottomPadding:i,onClose:r.onClose}):a.createElement(E,{...r,hideLogo:e,align:t,fixSubmitButtonOverflowBottomPadding:i,onSubmit:e=>{r.withScore?((0,C.n8)(e),r.onSubmit(e)):((0,C.TY)(e),r.onSubmit(e)),o(!0)}}))},_=({hideLogo:e=!1,align:t="center",fixSubmitButtonOverflowBottomPadding:i=!1,...s})=>{var l;const c=[g.bad,g.ok,g.good],[d,p]=a.useState(null),[m,v]=a.useState(""),[b,w]=a.useState(!1),[y,k]=a.useState(!1);let E;return E=y&&!1!==s.showPostSubmitScreen?a.createElement("div",{"data-grammarly-part":"surveys-feedback-form-thank-you",...(0,r.Sh)(o.feedbackFormContainer,o.feedbackFormContainerAlignCenter)},a.createElement("div",{className:o.feedbackFormSuccessMessageTextContainer},a.createElement("div",{className:o.feedbackFormSuccessMessageIcon}),a.createElement("div",{className:o.feedbackFormSuccessMessageTitle},"Thank you!"),a.createElement("div",{className:o.feedbackFormSuccessMessageSubtitle},"Your feedback helps us improve.")),a.createElement(n.z,{className:o.feedbackFormSubmitButton,kind:"success",type:"submit",onClick:s.onClose},"Done"),i?a.createElement("div",{className:o.feedbackFormSubmitButtonFixOverflowBottomPadding},a.createElement("div",{className:o.feedbackFormSubmitButtonFixOverflowBottomPaddingChild})):null):a.createElement("div",{"data-grammarly-part":"surveys-feedback-form-fields",...(0,r.Sh)(o.feedbackFormContainer,"center"===t?o.feedbackFormContainerAlignCenter:null)},a.createElement("div",{className:o.feedbackFormFields},e?null:a.createElement("div",{className:o.feedbackFormLogo}),s.hideTitle?null:a.createElement("div",{...(0,r.Sh)(o.feedbackFormTitle,s.compactDisplay?o.compact:null)},s.title||a.createElement("span",null,"How do you like ",a.createElement("br",null)," Grammarly?")),s.withScore?a.createElement(a.Fragment,null,a.createElement(h,{ariaLabel:"Feedback Score",options:c.map((e=>({value:e,render(){let t,i;return e===g.bad?(t=f.feedbackFormOptionIconDisheartening,i="I dislike it"):e===g.ok?(t=f.feedbackFormOptionIconNeutral,i="It’s OK"):(t=t=f.feedbackFormOptionIconSmiling,i="I like it"),a.createElement("div",{className:f.feedbackFormOption},a.createElement("div",{...(0,r.Sh)(f.feedbackFormOptionIcon,t)}),a.createElement("div",null,i))}}))),onChange:p,...(0,r.Sh)(o.feedbackFormScore,s.compactDisplay?o.compact:null)}),s.hideTextBoxTitle?null:a.createElement("div",{className:o.feedbackFormTextBoxTitle},"Anything we can improve?")):null,a.createElement(u.z,{onChange:v,placeholder:s.placeholderText||"Your thoughts here",ariaLabel:"Feedback Text",...(0,r.Sh)(o.feedbackFormTextBox,s.compactDisplay?o.compact:null)}),s.domain?a.createElement(a.Fragment,null,s.hideDomainHelpText?null:a.createElement("div",{className:o.feedbackFormShareDomainTitle},"Help improve Grammarly by sharing the domain you’re on:"),a.createElement(S.J,{labelId:"feedback-form-share-domain-checkbox",onChange:w,className:o.feedbackFormShareDomainCheckbox},"Include the domain ",a.createElement("b",null,s.domain)," with my feedback")):null),a.createElement(n.z,{className:o.feedbackFormSubmitButton,kind:null!==(l=s.submitButtonKind)&&void 0!==l?l:"success",type:"submit",disabled:s.withScore?!d:!m,onClick:()=>{var e,t;s.withScore&&d?(null===(e=s.onSubmit)||void 0===e||e.call(s,{score:d,text:m,domain:b?s.domain:void 0}),k(!0)):!s.withScore&&m&&(null===(t=s.onSubmit)||void 0===t||t.call(s,{text:m,domain:b?s.domain:void 0}),k(!0))}},"Submit"),i?a.createElement("div",{className:o.feedbackFormSubmitButtonFixOverflowBottomPadding},a.createElement("div",{className:o.feedbackFormSubmitButtonFixOverflowBottomPaddingChild})):null),a.createElement("div",{style:s.style,"data-grammarly-part":"surveys-feedback-form",role:"region","aria-label":"Provide feedback"},E)},I=({experimentClient:e,...t})=>e.isGateEnabled(s.K.ExtensionA11yKeyboardNavigation)?a.createElement(A,{...t}):a.createElement(_,{...t})},86061:(e,t,i)=>{function a(e){return"score"in e}function s(e){if(!a(e))throw new Error("Received unexpected feedback form data without score")}function r(e){if(a(e))throw new Error("Received unexpected feedback form data with score")}i.d(t,{TY:()=>r,dK:()=>a,n8:()=>s})},11250:(e,t,i)=>{i.d(t,{J:()=>s});var a=i(19374);const s=new Proxy({},{get:(e,t)=>(...e)=>(0,a.E)().bgRpc.api.trackGnar(t,e)})},91980:(e,t,i)=>{var a=i(54933),s=i(93476)(a);s.push([e.id,"._z3YOv-textBox{font-family:Inter,sans-serif;font-style:normal;font-weight:normal;color:#0e101a;font-size:14px;line-height:21px;font-feature-settings:'ss03' on;background:#f9faff;border:1px solid #e7e9f5;box-sizing:border-box;border-radius:4px;padding:10px 8px;overflow-y:auto;cursor:text;width:100%;height:100%;}._z3YOv-textBox:empty:before{font-feature-settings:'ss03' on;font-family:Inter,sans-serif;font-style:normal;font-weight:normal;color:#6d758d;font-size:14px;line-height:21px;content:attr(data-placeholder)}",""]),s.locals={textBox:"_z3YOv-textBox"},e.exports=s},75397:e=>{e.exports={viewAnnouncer:"I0c5l"}},93405:e=>{e.exports={link:"QgFSd",externalLink:"oGmOe",icon:"i3roU",gmail:"h0anR",outlook:"NM8XU",gdocs:"Y9XfU",spin:"YUQEk"}},91308:e=>{e.exports={progressBarBg:"Hz_iW",progressBar:"JxiOG"}},10450:e=>{e.exports={singleCardAssistant:"a_AQd",singleCardAssistantNativeContentWithPadding:"UVkKt"}},52426:e=>{e.exports={getStartedChecklist:"QE3tb",logo:"DOz7G",title:"CzlXc",progressCaption:"TKilD"}},31926:e=>{e.exports={getStartedUseCases:"V1X0D",copyContainer:"AN8Cu",title:"jjHIP",subtitle:"gjGEx",ctaContainer:"s7nMi",ctaCaption:"BJWKo",ctaButtons:"SWGns",externalLink:"JLzQ9",icon:"DhhQ7",gmail:"hRR0U",outlook:"lnWHG",gdocs:"b0ty6",word:"eHkAg",slack:"OppdY",teams:"Hfv16",linkedIn:"hc5LW"}},83598:e=>{e.exports={cardList:"O6x_6",cardListFooterDynamic:"NzU4C",cardListFooterStatic:"kdk1x",cardListFooterAnimate:"CUEf1",upgradeHookWrapper:"fpqSf",assistant:"ziFUs",dragging:"dl2Z_",mainView:"OfKqp"}},64012:e=>{e.exports={emogenieViewOverlayHeader:"saNAB",emogenieViewOverlayHeaderBetaBadge:"J16CK"}},6943:e=>{e.exports={footerButton:"j5lp5",feedbackButton:"_i7kC"}},38575:e=>{e.exports={gbUpsellFooter:"yOr0u",clickableLink:"EfS5Y",icon:"Mmj0G"}},83178:e=>{e.exports={actions_hovered:"FONqd",header:"uDOFr",draggableWrapper:"rjQy5",draggable:"P3jaK",headerActions:"Xtr7I",headerActionBtnProofitIcon:"b5yo3",headerActionBtnGoalsIcon:"pl7ek",logoscore_fadein:"tUJui",fadein:"AQJV1",logoscore_fadeout:"chyj0",fadeout:"ooxFJ",logo_score:"RLHcp",spin:"g0xkj"}},26284:e=>{e.exports={insight:"vaGfd",insight__inline_icon:"M5fov",insight__inline_text:"NodQp"}},22521:e=>{e.exports={predictions:"zAvBV",predictions__header:"p82xz",predictions__card:"ZuLGb",counterContainer:"KwKbD",predictions__zero_text:"IVxiZ",predictions__off_brand:"HrjP2"}},40643:e=>{e.exports={relatedSuggestionsTitle:"AP_Yd"}},31480:e=>{e.exports={viewOverlay:"CpaDC",content:"BWu_L",footer:"Nfocm",viewOverlayGoBack:"EBOfD",defaultViewOverlayPanel:"TFghg",gradientViewOverlayPanel:"a2q6L",proofitViewOverlayPanel:"vCO8v",defaultViewOverlayHeader:"U8zS8",defaultViewOverlayContent:"Z9WSl",gradientViewOverlayContent:"sxmDB",proofitViewOverlayContent:"_nDhb",logo:"OtV3S",proofitViewOverlayHeader:"HuIOP",proofitViewOverlayHeaderBetaBadge:"PUb7a"}},35414:e=>{e.exports={viewOverlay:"p5YK3",content:"werFw",footer:"xehnL",viewOverlayGoBack:"_ntJi",defaultViewOverlayPanel:"R1hmk",gradientViewOverlayPanel:"_l8vR",helpPanel:"tOLsx",defaultViewOverlayHeader:"bUS_N",defaultViewOverlayContent:"bkYBE",gradientViewOverlayContent:"aFjy5",logo:"YI_fU",helpPanelContent:"zWni2",helpBanner:"uyrqp",helpBannerImage:"i3mrJ",helpHeader:"EcAZk",helpBannerMessage:"RaY8U",helpContent:"ZgpAO",heatmap:"AowV7"}},84333:e=>{e.exports={viewOverlay:"r4eDc",content:"BaOKj",footer:"UFbAw",viewOverlayGoBack:"VVZPH",defaultViewOverlayPanel:"K9tay",gradientViewOverlayPanel:"JA0ux",defaultViewOverlayHeader:"bIdOw",defaultViewOverlayContent:"Qr2H0",gradientViewOverlayContent:"W7xRU",logo:"waSFs",cardList:"ujtTF",headerGroup:"PUcC9",questionMarkButton:"eN7Lb",questionMarkIcon:"kD3Tf",summaryWrapper:"mXo_B",message:"fe65j",relatedSuggestionsTitle:"OJegx"}},2005:e=>{e.exports={viewOverlay:"snX4b",content:"fSzZu",footer:"Y8cpA",viewOverlayGoBack:"yEi_t",defaultViewOverlayPanel:"aPyGs",gradientViewOverlayPanel:"gbwcW",settingsViewOverlayPanel:"Rudrm",defaultViewOverlayHeader:"_tUap",defaultViewOverlayContent:"Cs_VJ",gradientViewOverlayContent:"c4WjP",settingsViewOverlayContent:"ZtK1f",logo:"_kPSX",settingsViewDoneButton:"xVshA"}},99603:e=>{e.exports={summary_heading:"NyKz4",summary_wrapper:"WOt5T",summary_fadein:"dScjC",fadein:"ZzgVz",summary_fadeout:"bXfze",fadeout:"BiyF1"}},15346:e=>{e.exports={viewOverlay:"Gsb9P",content:"_HIip",footer:"EZP9j",viewOverlayGoBack:"oEefg",defaultViewOverlayPanel:"jAeU3",gradientViewOverlayPanel:"rIqVr",defaultViewOverlayHeader:"h1FQ0",defaultViewOverlayContent:"YsrUq",gradientViewOverlayContent:"Nc28X",logo:"cMPwC"}},30280:e=>{e.exports={compactSuccessLens:"lP637",compactSuccessLensContainer:"FK4Ma"}},4194:e=>{e.exports={circleProgress:"IkNxu",circleText:"FllLk",card:"BSki0",header:"hk0Yc",compact:"cT3ja",normal:"Jxiqr",progressIcon:"fO9lJ",title:"nsBOt",full:"UibYx",progressContainer:"c5ZRH",progressBar:"ZNrvZ",progressValue:"jhBTZ",description:"raiHm"}},27871:e=>{e.exports={cardBody:"mWkWZ",description:"sJhXN",actions:"LCiQQ",lessIcon:"wEufS",minimalDescription:"lUctj",actionsFooter:"fs9Lo",feedbackFooter:"mQkpR",viewMoreButton:"vASf3"}},32485:e=>{e.exports={miniCard:"VI0d0"}},66853:e=>{e.exports={headerOrFooterWrapper:"Y2H0f"}},764:e=>{e.exports={cardList:"gV0cS"}},10339:e=>{e.exports={premiumLens:"TFbap"}},11102:e=>{e.exports={successLens:"_NLHO"}},34162:e=>{e.exports={footer:"nFy3z",plagiarismButton:"o_JYq",counterWrapper:"mOddw",counter:"csO1n",counterCheckmarkIcon:"cBKjm"}},86642:e=>{e.exports={defaultHeader:"DTiYT",priorityLensHeader:"sHAVn",head:"TGEx5",headerGroup:"oSvN_",logoIcon:"_4cQZf",logoText:"u1K9J",headerButton:"PpuRF",setGoalsButton:"UuSZX",divider:"NPZsq",lensNavigation:"dBaZB",disabledLensNavigation:"hr85r",prioritySwitchWrapper:"iqdfL",prioritySwitchFlatWrapper:"LUmRC"}},31584:e=>{e.exports={wrapper:"QzCRj"}},3320:e=>{e.exports={container:"qfD5D",baseGrid:"iPCw8",bottomLeft:"PuuHv",bottomRight:"r_Ycp",top:"qu1VK",notificationWrapper:"cSTPv"}},2479:e=>{e.exports={sidebarContainer:"OUOwE",sidebarContent:"etRrJ"}},25079:e=>{e.exports={learnMore:"Z_tYK",learnMoreTitle:"wCofj",learnMoreExample:"YSZy0",learnMoreExampleIconAndTitle:"W3Msk",learnMoreExampleIcon:"q0k69",learnMoreExampleCorrectIcon:"TsvDV",learnMoreExampleIncorrectIcon:"DBJgs",learnMoreExampleTitle:"_5iVIT",learnMoreExampleTextItalic:"o84Ep",learnMoreExampleTextMarginLeft:"cTK8V",spin:"DHpIM"}},35583:e=>{e.exports={container:"qAay9"}},81237:e=>{e.exports={singleCardAssistant:"bJPRn",singleCardAssistantHeader:"Zoc_S",singleCardAssistantHeaderDraggable:"ZX00_",singleCardAssistantContent:"p9dQN",singleCardAssistantContentWithPadding:"UAH4K",singleCardAssistantFooter:"VnTOq",singleCardAssistantFooterText:"BgeT4",singleCardAssistantFooterButtonIcon:"kBU3t",spin:"HCSMj"}},24812:e=>{e.exports={emogenieReport:"IPEgR",emogenieReportHeader:"ugGrL",emogenieReportHeaderTitle:"x3FcP",emogenieReportItems:"SwRPf",emogenieReportToneSuggestionInfo:"vLVNY",emogenieReportToneSuggestionInfoEmojiAndTitle:"VinN1",emogenieReportToneSuggestionInfoEmoji:"gmfaf"}},3618:e=>{e.exports={emogenieBrandToneInfoIcon:"pcprF",emogenieReportItem:"LXjD_",emogenieBrandToneInfoIconOn:"KIvz3",emogenieBrandToneInfoIconOff:"NDatF",emogenieReportItemEmotion:"AjVJZ",emogenieReportItemEmotionEmojiAndName:"cIE8j",emogenieReportItemEmotionEmoji:"oZZpB",emogenieReportItemEmotionName:"QWYxt",emogenieReportItemEmotionBadgeOrIntensity:"jw4RJ",emogenieReportItemEmotionIntensity:"Ixu7L",emogenieReportItemEmotionIntensityDot:"aFcXw",emogenieReportItemEmotionIntensityDotActive:"xUxza",emogenieReportItemEmotionActionsMenuButton:"q4wIy",emogenieReportItemEmotionActionsMenuIcon:"V5KFq",emogenieReportItemEmootionActionsMenuThumsUpIcon:"UAfpn",emogenieReportItemEmootionActionsMenuThumsDownIcon:"CoUgw",spin:"tmqUv"}},71212:e=>{e.exports={settingsButtonMediumIcon:"jerdC",settingsButtonSmallIcon:"PlOGe",spin:"MH8w4"}},66206:e=>{e.exports={checkboxContainer:"Te37e",checkbox:"mFHkX",checkboxDS:"DdH2q",checkboxChecked:"JhHnz",checkboxCheckmark:"zShXt",spin:"tww6q"}},40578:e=>{e.exports={popoverNotificationMessage:"p0k9e"}},25985:e=>{e.exports={radioGroup:"KAzfW",radioGroupOption:"WkjDU",radioGroupOptionSelected:"onilo"}},32502:e=>{e.exports={premiumButton:"QpA64",diamondIcon:"JaQvu"}},78258:e=>{e.exports={proofitRequestFormBtnLoadingSpinner:"IrY6A",spin:"m9t2y"}},92647:e=>{e.exports={proofitHowItWorksSteps:"Unehy",proofitHowItWorksStep:"zMEEz",proofitHowItWorksStepNumberContainer:"EfoqG",proofitHowItWorksStepNumber:"XIDZQ",proofitHowItWorksStepOne:"K5qs8",proofitHowItWorksStepOneNumberContainer:"e4ae6",proofitHowItWorksStepTwo:"P3h_J",proofitHowItWorksStepTwoNumberContainer:"YejA_",proofitHowItWorksStepThree:"FYGwC",proofitHowItWorksStepThreeNumberContainer:"YFsfV"}},96528:e=>{e.exports={proofitRequestForm:"QVI6h",proofitRequestFormImg:"wKuXo",proofitRequestFormTitle:"yNxb3",proofitRequestFormDescription:"vLSn1",proofitRequestFormCostAndTime:"b2RwJ",proofitRequestFormTime:"Bo3xu",proofitRequestFormCostAndTimeTitle:"Cu_3T",proofitRequestFormCostAndTimeSubtitle:"NFy21",proofitRequestFormRequestBtn:"beQX2",proofitRequestFormUnavailableMsg:"JDvub",proofitRequestFormFootnote:"S33xD",proofitRequestFormFootnoteFreeTrial:"SflIX",proofitRequestFormFootnoteHowItWorksDontShowAgainCheckbox:"HUrVJ",proofitRequestFormPrivacyInfoTitle:"ymDqL",proofitRequestFormPrivacyInfoDescription:"ZqcFq",proofitRequestFormPrivacyInfoDescriptionItem:"iv8f1",proofitRequestFormPrivacyInfoDescriptionItemBulletPoint:"Duc32"}},21023:e=>{e.exports={proofitReviewForm:"SNt2d",proofitReviewFormTitle:"iMzY2",proofitReviewFormDescription:"jvfyf",proofitFeedbackForm:"eY729",proofitDoneButton:"CTbuu"}},76875:e=>{e.exports={scoreRing:"xlRHm",loading:"A_cJy",rotation:"srLo5",scoreText:"KIWW8"}},13311:e=>{e.exports={feedbackFormContainer:"kjElf",feedbackFormContainerAlignCenter:"hkEx2",feedbackFormFields:"Ua5wJ",feedbackFormTitle:"GnQ_a",feedbackFormTextBoxTitle:"kWEW0",feedbackFormLogo:"phQGV",compact:"b7yYp",feedbackFormScore:"ZOSRK",feedbackFormTextBox:"l8New",feedbackFormShareDomainTitle:"Qbnj_",feedbackFormShareDomainCheckbox:"VBCx1",feedbackFormSubmitButton:"tYYGU",feedbackFormSubmitButtonFixOverflowBottomPadding:"Opd8X",feedbackFormSubmitButtonFixOverflowBottomPaddingChild:"QKLT7",feedbackFormSuccessMessageTextContainer:"ARBzt",feedbackFormSuccessMessageIcon:"kJIzg",feedbackFormSuccessMessageTitle:"iXQnf",feedbackFormSuccessMessageSubtitle:"Ydufo",spin:"Vv6WG"}},73610:e=>{e.exports={feedbackFormOption:"sp8vS",feedbackFormOptionIcon:"eH6DL",feedbackFormOptionIconDisheartening:"DhaWh",feedbackFormOptionIconNeutral:"BS_8d",feedbackFormOptionIconSmiling:"dUZNd",spin:"uouSO"}},80394:e=>{e.exports={label:"cLK4q",selected:"hbRki",option:"UytwF",disabled:"mTk5j",lockIconWrapper:"o4NOU"}},65479:e=>{e.exports={option:"XNQPo"}},44103:e=>{e.exports={option:"dRYWx"}},34917:e=>{e.exports={american:"JRPow",australian:"FZNcB",british:"MzB3a",canadian:"_fn3J",indian:"eqgex"}},50945:e=>{e.exports={hover_blocker:"np9cY"}},34455:e=>{e.exports={settingsContent:"C3SN4",fullWidth:"dRfoN",heading:"_HqAa",allSettings:"pUfgB",separator:"vlSkx",settingsLink:"d_ohh",debugMenu:"iovEn",downloadBtn:"u6BF0",timer:"DQHsO"}},98716:e=>{e.exports={select_checkbox:"cIqfV",centered:"yfVcZ",select_children:"lRjE2",beta:"wvPnO",new:"QHuhM",alpha:"cThIl",checkbox:"F2Xdn",checkbox_check:"QRTZ2",on:"jzBvy",off:"HVvmV",checkbox_check_round:"qeH5k",checkbox_control_wrapper:"UMoTL",grayOut:"Ta6y3",on_off:"c2IdT",keyboard_accessible:"o7ug_",disabled:"KQoMv",setting_item:"HfRCc"}},17347:e=>{e.exports={line:"OBGgK",disabled:"SvddX",dialectPicker:"QNfvS",lockedInfo:"oAPBC"}},65287:e=>{e.exports={container:"FaEBj",containerWithBackground:"W15V7",content:"lof2m",title:"R97wU",button:"Udw_0"}},49405:e=>{e.exports={windows:"ScRGR",setting_item:"byTue",fixing:"tGQgu",thin_text:"Zw2iF",footer:"VarAw",gr_popup_settings:"sCOqq",iOS:"xw90P",footer_btn:"dFcxY",short_border:"GPdi3",top:"a8_HB",content:"eJi6K",upgraded:"fPnHa",since:"KcwUv",business:"HH96k",edu:"C_xJH",my_grammarly:"TPdm3",new_document:"b5rRu",unsupported_site:"FV6cP",unsupported_item:"kI6Es",unsupported_title:"TvJkj",domain:"mbOuw",domain_in_details:"HyZRA",unsupported_temporary:"aeiHl",unsupported_permanently:"e63AG",unsupported_grammarly:"SK755",diamond:"z0724",userPanel:"bG2GY",email:"U4qfE",link:"Vrj67",blue:"Dstaa",edc_stripe:"GEFvM",line:"_o71L",not_supported:"Z9hzt",site_switcher:"LXeMc",upgrade:"BAl_v",def_switcher:"aVnnG",on:"CcnIo",off:"LZuFk",cheetahToggle:"YHW25",favicon:"L5Hrq",centered:"T0qTK",summary:"tuG8u",upgrade_title:"KRcNq",settingsContentWrapper:"OeKpx",settingsContent:"AwQr3",withBackground:"JRZMC",llamaTitle:"WnzAW",llamaDescription:"dDIsV",cheetahLabelAndButton:"WwKRI",cheetahLabel:"aMCQq",cheetahManageButton:"hfCbo"}},30955:e=>{e.exports={content:"IJam9",borderTop:"oKEr5",borderBottom:"lZ1ZL",premiumButton:"bvxiF"}}}]);