(function(){"use strict";const n=nj,e={},l=new ExtStorageManager(null,a=>n(s.bind(this,a)));n(()=>{e.wrapper=n("#wrapper"),e.main=n("#main"),e.aside=n("#aside"),e.nav=n("#nav"),e.menuContent=n("#menuContent"),e.menuContentToggler=n("#menuContentToggler"),e.document=n(document),n("[data-i18n]").forEach(g=>{const o=n(g),u=o.text().split("+").reduce((i,r,m)=>(m&&(i+=" "),i+=r.match(/^(-|_|â€”|\/|\s)$/)?r:t(r),i),"");o.html(u||"{no_text}")}),n("[data-balloon]").forEach(g=>{const o=n(g),p=typeof o.attr("data-balloon-tooltip")=="string",u=typeof o.attr("data-balloon-hover")=="string",i=()=>{o.removeClass("balloon_active"),!p&&e.document.off("click","popup:balloon")};let r=null;o.find("[data-balloon-content]").on("click",m=>m.stopPropagation()),o.find("[data-balloon-trigger]").on("click",()=>{o.addClass("balloon_active"),setTimeout(()=>e.document.on("click",i,"popup:balloon"),0)}),o.find("[data-balloon-action]").on("click",i),u&&o.on("mouseenter",()=>{r=setTimeout(()=>o.addClass("balloon_active"),l.get("config.transitionDelay"))}).on("mouseleave",()=>{clearTimeout(r),o.removeClass("balloon_active")}),p&&e.document.on("click",i,"tooltip:balloon")});const a=e.aside[0].getBoundingClientRect().height;e.wrapper[0].style.setProperty("--aside-height",`${a}px`),n(window).on("scroll",c),e.menuContentToggler.on("click",()=>{e.menuContent.toggleClass("menu__content_active"),e.menuContentToggler[0].blur()}),e.wrapper.on("click",()=>{e.menuContent.removeClass("menu__content_active")}),e.menuContent.on("click",g=>g.stopPropagation()),c();function c(){window.scrollY>a+40?(e.wrapper.hasClass("wrapper_menu")||(e.menuContent[0].append(e.nav[0]),e.wrapper.addClass("wrapper_menu")),e.menuContent.removeClass("menu__content_active")):e.wrapper.hasClass("wrapper_menu")&&(e.aside[0].append(e.nav[0]),e.wrapper.removeClass("wrapper_menu"),e.menuContent.removeClass("menu__content_active"))}});function s(){chrome.runtime.sendMessage({analytics:{name:"page_view",params:{page_title:"Help",page_location:"/help"}}})}})();function checkLang(n,e){const l=n.toLowerCase().split(/_|-/),s=navigator.language.toLowerCase().split(/_|-/),a=l[0]===s[0];return(e?l[1]||s[1]:l[1]&&s[1])?a&&l[1]===s[1]:a}function t(n){let e="";return Array.isArray(n)?e=chrome.i18n.getMessage(n[0],n.splice(1)):e=chrome.i18n.getMessage(n),e||"{no translation}"}function initTranslate(){const n=nj,e=t("extension_lang"),l=navigator.language.startsWith("zh")?navigator.language:navigator.language.split(/-|_/)[0],s=encodeURIComponent(t("extension_translateHint"));checkLang(e,!0)||(n("#translateGoogle").removeClass("hidden"),n("#translateGoogleBtn").off().on("click",()=>{const a=n("#googleTranslateElement select")[0];if(!a||a.options.length<2){n("#translateGoogle").addClass("hidden");return}a.selectedIndex=1,a.dispatchEvent(new Event("change")),localStorage.setItem("translateGoogleHint","false"),chrome.runtime.sendMessage({analytics:{name:"auto_translate",params:{page:"Help"}}})}),localStorage.getItem("translateGoogleHint")!=="false"&&fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&dt=t&sl=${e}&tl=${l}&q=${s}`,{headers:{accept:"application/json"}}).then(a=>a.json()).then(a=>{const c=a[0]&&a[0][0]&&a[0][0][0]||null;c&&(n("#translateGoogleHint").html(c),n("#translateGoogle").addClass("balloon_active"))}),new google.translate.TranslateElement({pageLanguage:e,layout:1,includedLanguages:l},"googleTranslateElement"))}
